<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Mongoose v5.6.0: </title><link rel="apple-touch-icon" sizes="57x57" href="images/favicon/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="images/favicon/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="images/favicon/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="images/favicon/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="images/favicon/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="images/favicon/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="images/favicon/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="images/favicon/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="images/favicon/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="images/favicon/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png"><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans"><link rel="stylesheet" href="/docs/css/github.css"><link rel="stylesheet" href="/docs/css/mongoose5.css"><link rel="apple-touch-icon" sizes="57x57" href="images/favicon/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="images/favicon/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="images/favicon/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="images/favicon/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="images/favicon/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="images/favicon/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="images/favicon/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="images/favicon/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="images/favicon/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="images/favicon/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png"><link rel="manifest" href="images/favicon/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="images/favicon/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/docs/css/api.css"><link rel="stylesheet" href="/docs/css/inlinecpc.css"><script type="text/javascript" src="/docs/js/native.js"></script><style>.api-nav .nav-item-sub {
  display: block !important;
}

.api-content {
  margin-top: 3em;
}
</style></head><body><div id="layout"><div id="mobile-menu"><a class="menu-link" id="menuLink" href="#menu"><span></span></a><div id="mobile-logo-container"><a href="/"><img id="logo" src="/docs/images/mongoose5_62x30_transparent.png"><span class="logo-text">mongoose</span></a></div></div><div id="menu"><div class="pure-menu"><div class="pure-menu-heading" id="logo-container"><a href="/"><img id="logo" src="/docs/images/mongoose5_62x30_transparent.png"><span class="logo-text">mongoose</span></a></div><ul class="pure-menu-list" id="navbar"><li class="pure-menu-horizontal pure-menu-item pure-menu-has-children pure-menu-allow-hover version"><a class="pure-menu-link" href="#">Version 5.6.0</a><ul class="pure-menu-children"><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/4.x">Version 4.13.18</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/3.8.x">Version 3.8.40</a></li></ul></li><li class="pure-menu-item search"><input id="search-input-nav" type="text" placeholder="Search"><button id="search-button-nav"><img src="/docs/images/search.svg"></button></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/index.html">Quick Start</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/guides.html">Guides</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/guide.html">Schemas</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/schematypes.html">SchemaTypes</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/connections.html">Connections</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/models.html">Models</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/documents.html">Documents</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/subdocs.html">Subdocuments</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/queries.html">Queries</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/validation.html">Validation</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/middleware.html">Middleware</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/populate.html">Populate</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/discriminators.html">Discriminators</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/plugins.html">Plugins</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/api.html">API</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/mongoose.html">Mongoose</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/schema.html">Schema</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/connection.html">Connection</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/document.html">Document</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/model.html">Model</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/query.html">Query</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/aggregate.html">Aggregate</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/schematype.html">SchemaType</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/virtualtype.html">VirtualType</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/compatibility.html">Version Compatibility</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/faq.html">FAQ</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/further_reading.html">Further Reading</a></li></ul><div class="cpc-ad"><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=mongoosejscom" id="_carbonads_js"></script></div></div></div><div class="container"><div id="content"><h1>Mongoose</h1><div><div class="native-inline">
  <a href="#native_link#"><span class="sponsor">Sponsor</span> #native_company# â€” #native_desc#</a>
</div>
</div><div class="api-nav"><div class="api-nav-content"><div class="nav-item" id="nav-Mongoose"><div class="nav-item-title" style="font-weight: bold"><a href="mongoose.html">Mongoose</a></div><ul class="nav-item-sub"><li><a href="#mongoose_Mongoose">Mongoose()</a></li><li><a href="#mongoose_Mongoose-Aggregate">Mongoose.prototype.Aggregate()</a></li><li><a href="#mongoose_Mongoose-CastError">Mongoose.prototype.CastError()</a></li><li><a href="#mongoose_Mongoose-Collection">Mongoose.prototype.Collection()</a></li><li><a href="#mongoose_Mongoose-Connection">Mongoose.prototype.Connection()</a></li><li><a href="#mongoose_Mongoose-Decimal128">Mongoose.prototype.Decimal128</a></li><li><a href="#mongoose_Mongoose-Document">Mongoose.prototype.Document()</a></li><li><a href="#mongoose_Mongoose-DocumentProvider">Mongoose.prototype.DocumentProvider()</a></li><li><a href="#mongoose_Mongoose-Error">Mongoose.prototype.Error()</a></li><li><a href="#mongoose_Mongoose-Mixed">Mongoose.prototype.Mixed</a></li><li><a href="#mongoose_Mongoose-Model">Mongoose.prototype.Model()</a></li><li><a href="#mongoose_Mongoose-Mongoose">Mongoose.prototype.Mongoose()</a></li><li><a href="#mongoose_Mongoose-Number">Mongoose.prototype.Number</a></li><li><a href="#mongoose_Mongoose-ObjectId">Mongoose.prototype.ObjectId</a></li><li><a href="#mongoose_Mongoose-Promise">Mongoose.prototype.Promise</a></li><li><a href="#mongoose_Mongoose-PromiseProvider">Mongoose.prototype.PromiseProvider()</a></li><li><a href="#mongoose_Mongoose-Query">Mongoose.prototype.Query()</a></li><li><a href="#mongoose_Mongoose-STATES">Mongoose.prototype.STATES</a></li><li><a href="#mongoose_Mongoose-Schema">Mongoose.prototype.Schema()</a></li><li><a href="#mongoose_Mongoose-SchemaType">Mongoose.prototype.SchemaType()</a></li><li><a href="#mongoose_Mongoose-SchemaTypes">Mongoose.prototype.SchemaTypes</a></li><li><a href="#mongoose_Mongoose-Types">Mongoose.prototype.Types</a></li><li><a href="#mongoose_Mongoose-VirtualType">Mongoose.prototype.VirtualType()</a></li><li><a href="#mongoose_Mongoose-connect">Mongoose.prototype.connect()</a></li><li><a href="#mongoose_Mongoose-connection">Mongoose.prototype.connection</a></li><li><a href="#mongoose_Mongoose-connections">Mongoose.prototype.connections</a></li><li><a href="#mongoose_Mongoose-createConnection">Mongoose.prototype.createConnection()</a></li><li><a href="#mongoose_Mongoose-deleteModel">Mongoose.prototype.deleteModel()</a></li><li><a href="#mongoose_Mongoose-disconnect">Mongoose.prototype.disconnect()</a></li><li><a href="#mongoose_Mongoose-driver">Mongoose.prototype.driver</a></li><li><a href="#mongoose_Mongoose-get">Mongoose.prototype.get()</a></li><li><a href="#mongoose_Mongoose-model">Mongoose.prototype.model()</a></li><li><a href="#mongoose_Mongoose-modelNames">Mongoose.prototype.modelNames()</a></li><li><a href="#mongoose_Mongoose-mongo">Mongoose.prototype.mongo</a></li><li><a href="#mongoose_Mongoose-mquery">Mongoose.prototype.mquery</a></li><li><a href="#mongoose_Mongoose-now">Mongoose.prototype.now()</a></li><li><a href="#mongoose_Mongoose-plugin">Mongoose.prototype.plugin()</a></li><li><a href="#mongoose_Mongoose-pluralize">Mongoose.prototype.pluralize()</a></li><li><a href="#mongoose_Mongoose-set">Mongoose.prototype.set()</a></li><li><a href="#mongoose_Mongoose-startSession">Mongoose.prototype.startSession()</a></li><li><a href="#mongoose_Mongoose-version">Mongoose.prototype.version</a></li></ul></div><div class="nav-item" id="nav-Schema"><div class="nav-item-title"><a href="schema.html">Schema</a></div></div><div class="nav-item" id="nav-Connection"><div class="nav-item-title"><a href="connection.html">Connection</a></div></div><div class="nav-item" id="nav-Document"><div class="nav-item-title"><a href="document.html">Document</a></div></div><div class="nav-item" id="nav-Model"><div class="nav-item-title"><a href="model.html">Model</a></div></div><div class="nav-item" id="nav-Query"><div class="nav-item-title"><a href="query.html">Query</a></div></div><div class="nav-item" id="nav-QueryCursor"><div class="nav-item-title"><a href="querycursor.html">QueryCursor</a></div></div><div class="nav-item" id="nav-Aggregate"><div class="nav-item-title"><a href="aggregate.html">Aggregate</a></div></div><div class="nav-item" id="nav-AggregationCursor"><div class="nav-item-title"><a href="aggregationcursor.html">AggregationCursor</a></div></div><div class="nav-item" id="nav-Schematype"><div class="nav-item-title"><a href="schematype.html">Schematype</a></div></div><div class="nav-item" id="nav-Virtualtype"><div class="nav-item-title"><a href="virtualtype.html">Virtualtype</a></div></div><div class="nav-item" id="nav-Error"><div class="nav-item-title"><a href="error.html">Error</a></div></div><div class="nav-item" id="nav-Array"><div class="nav-item-title"><a href="array.html">Array</a></div></div></div></div><div class="api-content"><ul><li><a href="#mongoose_Mongoose">Mongoose()</a></li><li><a href="#mongoose_Mongoose-Aggregate">Mongoose.prototype.Aggregate()</a></li><li><a href="#mongoose_Mongoose-CastError">Mongoose.prototype.CastError()</a></li><li><a href="#mongoose_Mongoose-Collection">Mongoose.prototype.Collection()</a></li><li><a href="#mongoose_Mongoose-Connection">Mongoose.prototype.Connection()</a></li><li><a href="#mongoose_Mongoose-Decimal128">Mongoose.prototype.Decimal128</a></li><li><a href="#mongoose_Mongoose-Document">Mongoose.prototype.Document()</a></li><li><a href="#mongoose_Mongoose-DocumentProvider">Mongoose.prototype.DocumentProvider()</a></li><li><a href="#mongoose_Mongoose-Error">Mongoose.prototype.Error()</a></li><li><a href="#mongoose_Mongoose-Mixed">Mongoose.prototype.Mixed</a></li><li><a href="#mongoose_Mongoose-Model">Mongoose.prototype.Model()</a></li><li><a href="#mongoose_Mongoose-Mongoose">Mongoose.prototype.Mongoose()</a></li><li><a href="#mongoose_Mongoose-Number">Mongoose.prototype.Number</a></li><li><a href="#mongoose_Mongoose-ObjectId">Mongoose.prototype.ObjectId</a></li><li><a href="#mongoose_Mongoose-Promise">Mongoose.prototype.Promise</a></li><li><a href="#mongoose_Mongoose-PromiseProvider">Mongoose.prototype.PromiseProvider()</a></li><li><a href="#mongoose_Mongoose-Query">Mongoose.prototype.Query()</a></li><li><a href="#mongoose_Mongoose-STATES">Mongoose.prototype.STATES</a></li><li><a href="#mongoose_Mongoose-Schema">Mongoose.prototype.Schema()</a></li><li><a href="#mongoose_Mongoose-SchemaType">Mongoose.prototype.SchemaType()</a></li><li><a href="#mongoose_Mongoose-SchemaTypes">Mongoose.prototype.SchemaTypes</a></li><li><a href="#mongoose_Mongoose-Types">Mongoose.prototype.Types</a></li><li><a href="#mongoose_Mongoose-VirtualType">Mongoose.prototype.VirtualType()</a></li><li><a href="#mongoose_Mongoose-connect">Mongoose.prototype.connect()</a></li><li><a href="#mongoose_Mongoose-connection">Mongoose.prototype.connection</a></li><li><a href="#mongoose_Mongoose-connections">Mongoose.prototype.connections</a></li><li><a href="#mongoose_Mongoose-createConnection">Mongoose.prototype.createConnection()</a></li><li><a href="#mongoose_Mongoose-deleteModel">Mongoose.prototype.deleteModel()</a></li><li><a href="#mongoose_Mongoose-disconnect">Mongoose.prototype.disconnect()</a></li><li><a href="#mongoose_Mongoose-driver">Mongoose.prototype.driver</a></li><li><a href="#mongoose_Mongoose-get">Mongoose.prototype.get()</a></li><li><a href="#mongoose_Mongoose-model">Mongoose.prototype.model()</a></li><li><a href="#mongoose_Mongoose-modelNames">Mongoose.prototype.modelNames()</a></li><li><a href="#mongoose_Mongoose-mongo">Mongoose.prototype.mongo</a></li><li><a href="#mongoose_Mongoose-mquery">Mongoose.prototype.mquery</a></li><li><a href="#mongoose_Mongoose-now">Mongoose.prototype.now()</a></li><li><a href="#mongoose_Mongoose-plugin">Mongoose.prototype.plugin()</a></li><li><a href="#mongoose_Mongoose-pluralize">Mongoose.prototype.pluralize()</a></li><li><a href="#mongoose_Mongoose-set">Mongoose.prototype.set()</a></li><li><a href="#mongoose_Mongoose-startSession">Mongoose.prototype.startSession()</a></li><li><a href="#mongoose_Mongoose-version">Mongoose.prototype.version</a></li></ul><hr class="separate-api-elements"><h3 id="mongoose_Mongoose"><a href="#mongoose_Mongoose">Mongoose()</a></h3><div><p>Mongoose constructor.</p>

<p>The exports object of the <code>mongoose</code> module is an instance of this class. Most apps will only use this one instance.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-Aggregate"><a href="#mongoose_Mongoose-Aggregate">Mongoose.prototype.Aggregate()</a></h3><div><p>The Mongoose Aggregate constructor</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-CastError"><a href="#mongoose_Mongoose-CastError">Mongoose.prototype.CastError()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">type
<span class="method-type">&laquo;String&raquo;</span> The name of the type</li><li class="param">value
<span class="method-type">&laquo;Any&raquo;</span> The value that failed to cast</li><li class="param">path
<span class="method-type">&laquo;String&raquo;</span> The path <code>a.b.c</code> in the doc where this cast error occurred</li><li class="param">[reason]
<span class="method-type">&laquo;Error&raquo;</span> The original error that was thrown</li></ul><div><p>The Mongoose CastError constructor</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-Collection"><a href="#mongoose_Mongoose-Collection">Mongoose.prototype.Collection()</a></h3><div><p>The Mongoose Collection constructor</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-Connection"><a href="#mongoose_Mongoose-Connection">Mongoose.prototype.Connection()</a></h3><div><p>The Mongoose <a href="#connection_Connection">Connection</a> constructor</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-Decimal128"><a href="#mongoose_Mongoose-Decimal128">Mongoose.prototype.Decimal128</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The Mongoose Decimal128 <a href="/docs/schematypes.html">SchemaType</a>. Used for declaring paths in your schema that should be <a href="http://thecodebarbarian.com/a-nodejs-perspective-on-mongodb-34-decimal.html">128-bit decimal floating points</a>. Do not use this to create a new Decimal128 instance, use <code>mongoose.Types.Decimal128</code> instead.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">const</span> vehicleSchema = <span class="hljs-keyword">new</span> Schema({ fuelLevel: mongoose.Decimal128 });</code></pre>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-Document"><a href="#mongoose_Mongoose-Document">Mongoose.prototype.Document()</a></h3><div><p>The Mongoose <a href="#document-js">Document</a> constructor.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-DocumentProvider"><a href="#mongoose_Mongoose-DocumentProvider">Mongoose.prototype.DocumentProvider()</a></h3><div><p>The Mongoose DocumentProvider constructor. Mongoose users should not have to use this directly</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-Error"><a href="#mongoose_Mongoose-Error">Mongoose.prototype.Error()</a></h3><div><p>The <a href="#error_MongooseError">MongooseError</a> constructor.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-Mixed"><a href="#mongoose_Mongoose-Mixed">Mongoose.prototype.Mixed</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The Mongoose Mixed <a href="/docs/schematypes.html">SchemaType</a>. Used for declaring paths in your schema that Mongoose's change tracking, casting, and validation should ignore.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> Schema({ arbitrary: mongoose.Mixed });</code></pre>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-Model"><a href="#mongoose_Mongoose-Model">Mongoose.prototype.Model()</a></h3><div><p>The Mongoose <a href="#model_Model">Model</a> constructor.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-Mongoose"><a href="#mongoose_Mongoose-Mongoose">Mongoose.prototype.Mongoose()</a></h3><div><p>The Mongoose constructor</p>

<p>The exports of the mongoose module is an instance of this class.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">var</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongoose'</span>);
<span class="hljs-keyword">var</span> mongoose2 = <span class="hljs-keyword">new</span> mongoose.Mongoose();</code></pre>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-Number"><a href="#mongoose_Mongoose-Number">Mongoose.prototype.Number</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The Mongoose Number <a href="/docs/schematypes.html">SchemaType</a>. Used for declaring paths in your schema that Mongoose should cast to numbers.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> Schema({ num: mongoose.Number });
<span class="hljs-comment">// Equivalent to:</span>
<span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> Schema({ num: <span class="hljs-string">'number'</span> });</code></pre>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-ObjectId"><a href="#mongoose_Mongoose-ObjectId">Mongoose.prototype.ObjectId</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The Mongoose ObjectId <a href="/docs/schematypes.html">SchemaType</a>. Used for declaring paths in your schema that should be <a href="https://docs.mongodb.com/manual/reference/method/ObjectId/">MongoDB ObjectIds</a>. Do not use this to create a new ObjectId instance, use <code>mongoose.Types.ObjectId</code> instead.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">const</span> childSchema = <span class="hljs-keyword">new</span> Schema({ parentId: mongoose.ObjectId });</code></pre>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-Promise"><a href="#mongoose_Mongoose-Promise">Mongoose.prototype.Promise</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The Mongoose <a href="#promise_Promise">Promise</a> constructor.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-PromiseProvider"><a href="#mongoose_Mongoose-PromiseProvider">Mongoose.prototype.PromiseProvider()</a></h3><div><p>Storage layer for mongoose promises</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-Query"><a href="#mongoose_Mongoose-Query">Mongoose.prototype.Query()</a></h3><div><p>The Mongoose <a href="#query_Query">Query</a> constructor.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-STATES"><a href="#mongoose_Mongoose-STATES">Mongoose.prototype.STATES</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>Expose connection states for user-land</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-Schema"><a href="#mongoose_Mongoose-Schema">Mongoose.prototype.Schema()</a></h3><div><p>The Mongoose <a href="#schema_Schema">Schema</a> constructor</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">var</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongoose'</span>);
<span class="hljs-keyword">var</span> Schema = mongoose.Schema;
<span class="hljs-keyword">var</span> CatSchema = <span class="hljs-keyword">new</span> Schema(..);</code></pre>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-SchemaType"><a href="#mongoose_Mongoose-SchemaType">Mongoose.prototype.SchemaType()</a></h3><div><p>The Mongoose <a href="#schematype_SchemaType">SchemaType</a> constructor</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-SchemaTypes"><a href="#mongoose_Mongoose-SchemaTypes">Mongoose.prototype.SchemaTypes</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The various Mongoose SchemaTypes.</p>

<h4>Note:</h4>

<p><em>Alias of mongoose.Schema.Types for backwards compatibility.</em></p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-Types"><a href="#mongoose_Mongoose-Types">Mongoose.prototype.Types</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The various Mongoose Types.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">var</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongoose'</span>);
<span class="hljs-keyword">var</span> array = mongoose.Types.Array;</code></pre>

<h4>Types:</h4>

<ul>
<li><a href="#types-objectid-js">ObjectId</a></li>
<li><a href="#types-buffer-js">Buffer</a></li>
<li><a href="#types-embedded-js">SubDocument</a></li>
<li><a href="#types-array-js">Array</a></li>
<li><a href="#types-documentarray-js">DocumentArray</a></li>
</ul>

<p>Using this exposed access to the <code>ObjectId</code> type, we can construct ids on demand.</p>

<pre><code><span class="hljs-keyword">var</span> ObjectId = mongoose.Types.ObjectId;
<span class="hljs-keyword">var</span> id1 = <span class="hljs-keyword">new</span> ObjectId;</code></pre>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-VirtualType"><a href="#mongoose_Mongoose-VirtualType">Mongoose.prototype.VirtualType()</a></h3><div><p>The Mongoose <a href="#virtualtype_VirtualType">VirtualType</a> constructor</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-connect"><a href="#mongoose_Mongoose-connect">Mongoose.prototype.connect()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">uri(s)
<span class="method-type">&laquo;String&raquo;</span> </li><li class="param">[options]
<span class="method-type">&laquo;Object&raquo;</span> passed down to the <a href="http://mongodb.github.io/node-mongodb-native/3.0/api/MongoClient.html">MongoDB driver&#39;s <code>connect()</code> function</a>, except for 4 mongoose-specific options explained below.</li><ul style="margin-top: 0.5em"><li>[options.dbName]
<span class="method-type">&laquo;String&raquo;</span> The name of the database we want to use. If not provided, use database name from connection string.</li></ul><ul style="margin-top: 0.5em"><li>[options.user]
<span class="method-type">&laquo;String&raquo;</span> username for authentication, equivalent to <code>options.auth.user</code>. Maintained for backwards compatibility.</li></ul><ul style="margin-top: 0.5em"><li>[options.pass]
<span class="method-type">&laquo;String&raquo;</span> password for authentication, equivalent to <code>options.auth.password</code>. Maintained for backwards compatibility.</li></ul><ul style="margin-top: 0.5em"><li>[options.autoIndex=true]
<span class="method-type">&laquo;Boolean&raquo;</span> Mongoose-specific option. Set to false to disable automatic index creation for all models associated with this connection.</li></ul><ul style="margin-top: 0.5em"><li>[options.bufferCommands=true]
<span class="method-type">&laquo;Boolean&raquo;</span> Mongoose specific option. Set to false to <a href="http://mongoosejs.com/docs/faq.html#callback_never_executes">disable buffering</a> on all models associated with this connection.</li></ul><ul style="margin-top: 0.5em"><li>[options.useCreateIndex=true]
<span class="method-type">&laquo;Boolean&raquo;</span> Mongoose-specific option. If <code>true</code>, this connection will use <a href="/docs/deprecations.html#-ensureindex-"><code>createIndex()</code> instead of <code>ensureIndex()</code></a> for automatic index builds via <a href="/docs/api.html#model_Model.init"><code>Model.init()</code></a>.</li></ul><ul style="margin-top: 0.5em"><li>[options.useFindAndModify=true]
<span class="method-type">&laquo;Boolean&raquo;</span> True by default. Set to <code>false</code> to make <code>findOneAndUpdate()</code> and <code>findOneAndRemove()</code> use native <code>findOneAndUpdate()</code> rather than <code>findAndModify()</code>.</li></ul><ul style="margin-top: 0.5em"><li>[options.useNewUrlParser=false]
<span class="method-type">&laquo;Boolean&raquo;</span> False by default. Set to <code>true</code> to make all connections set the <code>useNewUrlParser</code> option by default.</li></ul><li class="param">[callback]
<span class="method-type">&laquo;Function&raquo;</span> </li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Promise&raquo;</span> resolves to <code>this</code> if connection succeeded</li></ul><div><p>Opens the default mongoose connection.</p>

<h4>Example:</h4>

<pre><code>mongoose.connect(<span class="hljs-string">'mongodb://user:pass@localhost:port/database'</span>);

<span class="hljs-comment">// replica sets</span>
<span class="hljs-keyword">var</span> uri = <span class="hljs-string">'mongodb://user:pass@localhost:port,anotherhost:port,yetanother:port/mydatabase'</span>;
mongoose.connect(uri);

<span class="hljs-comment">// with options</span>
mongoose.connect(uri, options);

<span class="hljs-comment">// optional callback that gets fired when initial connection completed</span>
<span class="hljs-keyword">var</span> uri = <span class="hljs-string">'mongodb://nonexistent.domain:27000'</span>;
mongoose.connect(uri, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) </span>{
  <span class="hljs-comment">// if error is truthy, the initial connection failed.</span>
})</code></pre>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-connection"><a href="#mongoose_Mongoose-connection">Mongoose.prototype.connection</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;Connection&raquo;</span></li></ul><div><p>The Mongoose module's default connection. Equivalent to <code>mongoose.connections][0]</code>, see <a href="#mongoose_Mongoose-connections"><code>connections</code></a>.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">var</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongoose'</span>);
mongoose.connect(...);
mongoose.connection.on(<span class="hljs-string">'error'</span>, cb);</code></pre>

<p>This is the connection used by default for every model created using <a href="#index_Mongoose-model">mongoose.model</a>.</p>

<p>To create a new connection, use <a href="#mongoose_Mongoose-createConnection"><code>createConnection()</code></a>.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-connections"><a href="#mongoose_Mongoose-connections">Mongoose.prototype.connections</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;Array&raquo;</span></li></ul><div><p>An array containing all <a href="connections.html">connections</a> associated with this Mongoose instance. By default, there is 1 connection. Calling <a href="#mongoose_Mongoose-createConnection"><code>createConnection()</code></a> adds a connection to this array.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongoose'</span>);
mongoose.connections.length; <span class="hljs-comment">// 1, just the default connection</span>
mongoose.connections[<span class="hljs-number">0</span>] === mongoose.connection; <span class="hljs-comment">// true</span>

mongoose.createConnection(<span class="hljs-string">'mongodb://localhost:27017/test'</span>);
mongoose.connections.length; <span class="hljs-comment">// 2</span></code></pre>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-createConnection"><a href="#mongoose_Mongoose-createConnection">Mongoose.prototype.createConnection()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">[uri]
<span class="method-type">&laquo;String&raquo;</span> a mongodb:// URI</li><li class="param">[options]
<span class="method-type">&laquo;Object&raquo;</span> passed down to the <a href="http://mongodb.github.io/node-mongodb-native/3.0/api/MongoClient.html">MongoDB driver&#39;s <code>connect()</code> function</a>, except for 4 mongoose-specific options explained below.</li><ul style="margin-top: 0.5em"><li>[options.user]
<span class="method-type">&laquo;String&raquo;</span> username for authentication, equivalent to <code>options.auth.user</code>. Maintained for backwards compatibility.</li></ul><ul style="margin-top: 0.5em"><li>[options.pass]
<span class="method-type">&laquo;String&raquo;</span> password for authentication, equivalent to <code>options.auth.password</code>. Maintained for backwards compatibility.</li></ul><ul style="margin-top: 0.5em"><li>[options.autoIndex=true]
<span class="method-type">&laquo;Boolean&raquo;</span> Mongoose-specific option. Set to false to disable automatic index creation for all models associated with this connection.</li></ul><ul style="margin-top: 0.5em"><li>[options.bufferCommands=true]
<span class="method-type">&laquo;Boolean&raquo;</span> Mongoose specific option. Set to false to <a href="http://mongoosejs.com/docs/faq.html#callback_never_executes">disable buffering</a> on all models associated with this connection.</li></ul></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Connection&raquo;</span> the created Connection object. Connections are thenable, so you can do <code>await mongoose.createConnection()</code></li></ul><div><p>Creates a Connection instance.</p>

<p>Each <code>connection</code> instance maps to a single database. This method is helpful when mangaging multiple db connections.</p>

<p><em>Options passed take precedence over options included in connection strings.</em></p>

<h4>Example:</h4>

<pre><code><span class="hljs-comment">// with mongodb:// URI</span>
db = mongoose.createConnection(<span class="hljs-string">'mongodb://user:pass@localhost:port/database'</span>);

<span class="hljs-comment">// and options</span>
<span class="hljs-keyword">var</span> opts = { db: { native_parser: <span class="hljs-literal">true</span> }}
db = mongoose.createConnection(<span class="hljs-string">'mongodb://user:pass@localhost:port/database'</span>, opts);

<span class="hljs-comment">// replica sets</span>
db = mongoose.createConnection(<span class="hljs-string">'mongodb://user:pass@localhost:port,anotherhost:port,yetanother:port/database'</span>);

<span class="hljs-comment">// and options</span>
<span class="hljs-keyword">var</span> opts = { replset: { strategy: <span class="hljs-string">'ping'</span>, rs_name: <span class="hljs-string">'testSet'</span> }}
db = mongoose.createConnection(<span class="hljs-string">'mongodb://user:pass@localhost:port,anotherhost:port,yetanother:port/database'</span>, opts);

<span class="hljs-comment">// and options</span>
<span class="hljs-keyword">var</span> opts = { server: { auto_reconnect: <span class="hljs-literal">false</span> }, user: <span class="hljs-string">'username'</span>, pass: <span class="hljs-string">'mypassword'</span> }
db = mongoose.createConnection(<span class="hljs-string">'localhost'</span>, <span class="hljs-string">'database'</span>, port, opts)

<span class="hljs-comment">// initialize now, connect later</span>
db = mongoose.createConnection();
db.openUri(<span class="hljs-string">'localhost'</span>, <span class="hljs-string">'database'</span>, port, [opts]);</code></pre>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-deleteModel"><a href="#mongoose_Mongoose-deleteModel">Mongoose.prototype.deleteModel()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">name
<span class="method-type">&laquo;String|RegExp&raquo;</span> if string, the name of the model to remove. If regexp, removes all models whose name matches the regexp.</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Mongoose&raquo;</span> this</li></ul><div><p>Removes the model named <code>name</code> from the default connection, if it exists. You can use this function to clean up any models you created in your tests to prevent OverwriteModelErrors.</p>

<p>Equivalent to <code>mongoose.connection.deleteModel(name)</code>.</p>

<h4>Example:</h4>

<pre><code>mongoose.model(<span class="hljs-string">'User'</span>, <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span> }));
<span class="hljs-built_in">console</span>.log(mongoose.model(<span class="hljs-string">'User'</span>)); <span class="hljs-comment">// Model object</span>
mongoose.deleteModel(<span class="hljs-string">'User'</span>);
<span class="hljs-built_in">console</span>.log(mongoose.model(<span class="hljs-string">'User'</span>)); <span class="hljs-comment">// undefined</span>

<span class="hljs-comment">// Usually useful in a Mocha `afterEach()` hook</span>
afterEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  mongoose.deleteModel(<span class="hljs-regexp">/.+/</span>); <span class="hljs-comment">// Delete every model</span>
});</code></pre>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-disconnect"><a href="#mongoose_Mongoose-disconnect">Mongoose.prototype.disconnect()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">[callback]
<span class="method-type">&laquo;Function&raquo;</span> called after all connection close, or when first error occurred.</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Promise&raquo;</span> resolves when all connections are closed, or rejects with the first error that occurred.</li></ul><div><p>Runs <code>.close()</code> on all connections in parallel.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-driver"><a href="#mongoose_Mongoose-driver">Mongoose.prototype.driver</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The underlying driver this Mongoose instance uses to communicate with the database. A driver is a Mongoose-specific interface that defines functions like <code>find()</code>.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-get"><a href="#mongoose_Mongoose-get">Mongoose.prototype.get()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">key
<span class="method-type">&laquo;String&raquo;</span> </li></ul><div><p>Gets mongoose options</p>

<h4>Example:</h4>

<pre><code>mongoose.get(<span class="hljs-string">'test'</span>) <span class="hljs-comment">// returns the 'test' value</span></code></pre>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-model"><a href="#mongoose_Mongoose-model">Mongoose.prototype.model()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">name
<span class="method-type">&laquo;String|Function&raquo;</span> model name or class extending Model</li><li class="param">[schema]
<span class="method-type">&laquo;Schema&raquo;</span> the schema to use.</li><li class="param">[collection]
<span class="method-type">&laquo;String&raquo;</span> name (optional, inferred from model name)</li><li class="param">[skipInit]
<span class="method-type">&laquo;Boolean&raquo;</span> whether to skip initialization (defaults to false)</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Model&raquo;</span> The model associated with <code>name</code>. Mongoose will create the model if it doesn&#39;t already exist.</li></ul><div><p>Defines a model or retrieves it.</p>

<p>Models defined on the <code>mongoose</code> instance are available to all connection created by the same <code>mongoose</code> instance.</p>

<p>If you call <code>mongoose.model()</code> with twice the same name but a different schema, you will get an <code>OverwriteModelError</code>. If you call <code>mongoose.model()</code> with the same name and same schema, you'll get the same schema back.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">var</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongoose'</span>);

<span class="hljs-comment">// define an Actor model with this mongoose instance</span>
<span class="hljs-keyword">const</span> Schema = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span> });
mongoose.model(<span class="hljs-string">'Actor'</span>, schema);

<span class="hljs-comment">// create a new connection</span>
<span class="hljs-keyword">var</span> conn = mongoose.createConnection(..);

<span class="hljs-comment">// create Actor model</span>
<span class="hljs-keyword">var</span> Actor = conn.model(<span class="hljs-string">'Actor'</span>, schema);
conn.model(<span class="hljs-string">'Actor'</span>) === Actor; <span class="hljs-comment">// true</span>
conn.model(<span class="hljs-string">'Actor'</span>, schema) === Actor; <span class="hljs-comment">// true, same schema</span>
conn.model(<span class="hljs-string">'Actor'</span>, schema, <span class="hljs-string">'actors'</span>) === Actor; <span class="hljs-comment">// true, same schema and collection name</span>

<span class="hljs-comment">// This throws an `OverwriteModelError` because the schema is different.</span>
conn.model(<span class="hljs-string">'Actor'</span>, <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span> }));</code></pre>

<p><em>When no <code>collection</code> argument is passed, Mongoose uses the model name. If you don't like this behavior, either pass a collection name, use <code>mongoose.pluralize()</code>, or set your schemas collection name option.</em></p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">var</span> schema = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span> }, { collection: <span class="hljs-string">'actor'</span> });

<span class="hljs-comment">// or</span>

schema.set(<span class="hljs-string">'collection'</span>, <span class="hljs-string">'actor'</span>);

<span class="hljs-comment">// or</span>

<span class="hljs-keyword">var</span> collectionName = <span class="hljs-string">'actor'</span>
<span class="hljs-keyword">var</span> M = mongoose.model(<span class="hljs-string">'Actor'</span>, schema, collectionName)</code></pre>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-modelNames"><a href="#mongoose_Mongoose-modelNames">Mongoose.prototype.modelNames()</a></h3><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Array&raquo;</span> </li></ul><div><p>Returns an array of model names created on this instance of Mongoose.</p>

<h4>Note:</h4>

<p><em>Does not include names of models created using <code>connection.model()</code>.</em></p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-mongo"><a href="#mongoose_Mongoose-mongo">Mongoose.prototype.mongo</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The <a href="https://github.com/mongodb/node-mongodb-native">node-mongodb-native</a> driver Mongoose uses.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-mquery"><a href="#mongoose_Mongoose-mquery">Mongoose.prototype.mquery</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The <a href="https://github.com/aheckmann/mquery">mquery</a> query builder Mongoose uses.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-now"><a href="#mongoose_Mongoose-now">Mongoose.prototype.now()</a></h3><div><p>Mongoose uses this function to get the current time when setting <a href="/docs/guide.html#timestamps">timestamps</a>. You may stub out this function using a tool like <a href="https://www.npmjs.com/package/sinon">Sinon</a> for testing.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-plugin"><a href="#mongoose_Mongoose-plugin">Mongoose.prototype.plugin()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">fn
<span class="method-type">&laquo;Function&raquo;</span> plugin callback</li><li class="param">[opts]
<span class="method-type">&laquo;Object&raquo;</span> optional options</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Mongoose&raquo;</span> this</li></ul><div><p>Declares a global plugin executed on all Schemas.</p>

<p>Equivalent to calling <code>.plugin(fn)</code> on each Schema you create.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-pluralize"><a href="#mongoose_Mongoose-pluralize">Mongoose.prototype.pluralize()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">[fn]
<span class="method-type">&laquo;Function|null&raquo;</span> overwrites the function used to pluralize collection names</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Function,null&raquo;</span> the current function used to pluralize collection names, defaults to the legacy function from <code>mongoose-legacy-pluralize</code>.</li></ul><div><p>Getter/setter around function for pluralizing collection names.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-set"><a href="#mongoose_Mongoose-set">Mongoose.prototype.set()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">key
<span class="method-type">&laquo;String&raquo;</span> </li><li class="param">value
<span class="method-type">&laquo;String|Function|Boolean&raquo;</span> </li></ul><div><p>Sets mongoose options</p>

<h4>Example:</h4>

<pre><code>mongoose.set(<span class="hljs-string">'test'</span>, value) <span class="hljs-comment">// sets the 'test' option to `value`</span>

mongoose.set(<span class="hljs-string">'debug'</span>, <span class="hljs-literal">true</span>) <span class="hljs-comment">// enable logging collection methods + arguments to the console</span>

mongoose.set(<span class="hljs-string">'debug'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">collectionName, methodName, arg1, arg2...</span>) </span>{}); <span class="hljs-comment">// use custom function to log collection methods + arguments</span></code></pre>

<h2>Currently supported options are</h2>

<ul>
<li>'debug': prints the operations mongoose sends to MongoDB to the console</li>
<li>'bufferCommands': enable/disable mongoose's buffering mechanism for all connections and models</li>
<li>'useCreateIndex': false by default. Set to <code>true</code> to make Mongoose's default index build use <code>createIndex()</code> instead of <code>ensureIndex()</code> to avoid deprecation warnings from the MongoDB driver.</li>
<li>'useFindAndModify': true by default. Set to <code>false</code> to make <code>findOneAndUpdate()</code> and <code>findOneAndRemove()</code> use native <code>findOneAndUpdate()</code> rather than <code>findAndModify()</code>.</li>
<li>'useNewUrlParser': false by default. Set to <code>true</code> to make all connections set the <code>useNewUrlParser</code> option by default</li>
<li>'cloneSchemas': false by default. Set to <code>true</code> to <code>clone()</code> all schemas before compiling into a model.</li>
<li>'applyPluginsToDiscriminators': false by default. Set to true to apply global plugins to discriminator schemas. This typically isn't necessary because plugins are applied to the base schema and discriminators copy all middleware, methods, statics, and properties from the base schema.</li>
<li>'objectIdGetter': true by default. Mongoose adds a getter to MongoDB ObjectId's called <code>_id</code> that returns <code>this</code> for convenience with populate. Set this to false to remove the getter.</li>
<li>'runValidators': false by default. Set to true to enable <a href="/docs/validation.html#update-validators">update validators</a> for all validators by default.</li>
<li>'toObject': <code>{ transform: true, flattenDecimals: true }</code> by default. Overwrites default objects to <a href="/docs/api.html#document_Document-toObject"><code>toObject()</code></a></li>
<li>'toJSON': <code>{ transform: true, flattenDecimals: true }</code> by default. Overwrites default objects to <a href="/docs/api.html#document_Document-toJSON"><code>toJSON()</code></a>, for determining how Mongoose documents get serialized by <code>JSON.stringify()</code></li>
<li>'strict': true by default, may be <code>false</code>, <code>true</code>, or <code>'throw'</code>. Sets the default strict mode for schemas.</li>
<li>'selectPopulatedPaths': true by default. Set to false to opt out of Mongoose adding all fields that you <code>populate()</code> to your <code>select()</code>. The schema-level option <code>selectPopulatedPaths</code> overwrites this one.</li>
</ul>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-startSession"><a href="#mongoose_Mongoose-startSession">Mongoose.prototype.startSession()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">[options]
<span class="method-type">&laquo;Object&raquo;</span> see the <a href="http://mongodb.github.io/node-mongodb-native/3.0/api/MongoClient.html#startSession">mongodb driver options</a></li><ul style="margin-top: 0.5em"><li>[options.causalConsistency=true]
<span class="method-type">&laquo;Boolean&raquo;</span> set to false to disable causal consistency</li></ul><li class="param">[callback]
<span class="method-type">&laquo;Function&raquo;</span> </li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Promise&lt;ClientSession&gt;&raquo;</span> promise that resolves to a MongoDB driver <code>ClientSession</code></li></ul><div><p><em>Requires MongoDB >= 3.6.0.</em> Starts a <a href="https://docs.mongodb.com/manual/release-notes/3.6/#client-sessions">MongoDB session</a> for benefits like causal consistency, <a href="https://docs.mongodb.com/manual/core/retryable-writes/">retryable writes</a>, and <a href="http://thecodebarbarian.com/a-node-js-perspective-on-mongodb-4-transactions.html">transactions</a>.</p>

<p>Calling <code>mongoose.startSession()</code> is equivalent to calling <code>mongoose.connection.startSession()</code>. Sessions are scoped to a connection, so calling <code>mongoose.startSession()</code> starts a session on the <a href="/docs/api.html#mongoose_Mongoose-connection">default mongoose connection</a>.</p>  </div><hr class="separate-api-elements"><h3 id="mongoose_Mongoose-version"><a href="#mongoose_Mongoose-version">Mongoose.prototype.version</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The Mongoose version</p>

<h4>Example</h4>

<pre><code><span class="hljs-built_in">console</span>.log(mongoose.version); <span class="hljs-comment">// '5.x.x'</span></code></pre>  </div></div><script>_native.init("CK7DT53U",{
  targetClass: 'native-inline'
});</script></div></div><script type="text/javascript">var xhr = new XMLHttpRequest();
xhr.open('POST', 'https://g0a3nbw0xa.execute-api.us-east-1.amazonaws.com/prod/track', true);
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onreadystatechange = function() {};
xhr.send(JSON.stringify({
  path: window.location.pathname,
  hostname: window.location.hostname,
  hash: window.location.hash
}));</script><script type="text/javascript" src="/docs/js/navbar-search.js"></script><script type="text/javascript">(function (window, document) {
  var layout   = document.getElementById('layout'),
      menu     = document.getElementById('menu'),
      menuLink = document.getElementById('menuLink'),
      content  = document.getElementById('content');

  function toggleClass(element, className) {
      var classes = element.className.split(/\s+/),
          length = classes.length,
          i = 0;

      for(; i < length; i++) {
        if (classes[i] === className) {
          classes.splice(i, 1);
          break;
        }
      }
      // The className is not found
      if (length === classes.length) {
          classes.push(className);
      }

      element.className = classes.join(' ');
  }

  function toggleAll(e) {
      var active = 'active';

      e.preventDefault();
      toggleClass(layout, active);
      toggleClass(menu, active);
      toggleClass(menuLink, active);
  }

  menuLink.onclick = function (e) {
      toggleAll(e);
  };

  content.onclick = function(e) {
      if (menu.className.indexOf('active') !== -1) {
          toggleAll(e);
      }
  };

}(this, this.document));</script></div></body></html>