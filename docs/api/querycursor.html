<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Mongoose v8.13.3: QueryCursor</title><link rel="apple-touch-icon" sizes="57x57" href="/docs/images/favicon/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/docs/images/favicon/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/docs/images/favicon/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/docs/images/favicon/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/docs/images/favicon/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/docs/images/favicon/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/docs/images/favicon/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/docs/images/favicon/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/docs/images/favicon/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/docs/images/favicon/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/docs/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/docs/images/favicon/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/docs/images/favicon/favicon-16x16.png"><link rel="manifest" href="/docs/images/favicon/manifest.json"><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans"><link rel="stylesheet" href="/docs/css/github.css"><link rel="stylesheet" href="/docs/css/mongoose5.css"><link rel="stylesheet" href="/docs/css/carbonads.css"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/docs/images/favicon/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/docs/css/api.css"><script src="/docs/js/api-bold-current-nav.js"></script><script src="/docs/js/convert-old-anchorid.js"></script><script type="text/javascript" src="//m.servedby-buysellads.com/monetization.custom.js"></script><link rel="stylesheet" href="/docs/css/inlinecpc.css"></head><body><div id="layout"><div id="mobile-menu"><a class="menu-link" id="menuLink" href="#menu"><svg width="100%" height="100%" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></a><div id="mobile-logo-container"><a href="/"><img id="logo" src="/docs/images/mongoose5_62x30_transparent.png"><span class="logo-text">mongoose</span></a></div></div><div id="menu"><nav class="pure-menu"><div class="pure-menu-heading" id="logo-container"><a href="/"><img id="logo" src="/docs/images/mongoose5_62x30_transparent.png"><span class="logo-text">mongoose</span></a></div><ul class="pure-menu-list" id="navbar"><li class="pure-menu-horizontal pure-menu-item pure-menu-has-children pure-menu-allow-hover version"><a class="pure-menu-link" href="/docs/index.html">Version 8.13.3</a><ul class="pure-menu-children"><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/7.x/index.html">Version 7.8.6</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/6.x/index.html">Version 6.13.8</a></li></ul></li><li class="pure-menu-item search"><input id="search-input-nav" type="text" placeholder="Search"><button id="search-button-nav"><img src="/docs/images/search.svg"></button></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/index.html">Quick Start</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/guides.html">Guides</a><ul class="pure-menu-list"><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/guide.html">Schemas</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/schematypes.html">SchemaTypes</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/connections.html">Connections</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/models.html">Models</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/documents.html">Documents</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/subdocs.html">Subdocuments</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/queries.html">Queries</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/validation.html">Validation</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/middleware.html">Middleware</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/populate.html">Populate</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/discriminators.html">Discriminators</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/plugins.html">Plugins</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/timestamps.html">Timestamps</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/transactions.html">Transactions</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/typescript.html">TypeScript</a></li></ul></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/api/mongoose.html">API</a><ul class="pure-menu-list"><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/mongoose.html">Mongoose</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/schema.html">Schema</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/connection.html">Connection</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/document.html">Document</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/model.html">Model</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/query.html">Query</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/aggregate.html">Aggregate</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/schematype.html">SchemaType</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/virtualtype.html">VirtualType</a></li></ul></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/migrating_to_8.html">Migration Guide</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/compatibility.html">Version Compatibility</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/version-support.html">Version Support</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/faq.html">FAQ</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/further_reading.html">Further Reading</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/enterprise.html">For Enterprise</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/sponsors.html" >Sponsors</a></li></ul><div class="cpc-ad"><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CKYIL27I&placement=mongoosejscom" id="_carbonads_js"></script></div></nav></div><div class="container"><div id="content"><a class="edit-docs-link" href="https://github.com/Automattic/mongoose/blob/master/lib/cursor/queryCursor.js" target="_blank">
<img src="/docs/images/pencil.svg" />
</a><h1>QueryCursor</h1><script type="text/javascript" src="//m.servedby-buysellads.com/monetization.custom.js"></script><link rel="stylesheet" href="/docs/css/inlinecpc.css"><div id="native-direct"></div><script>(function() {
if (typeof _bsa !== 'undefined' && _bsa) {
_bsa.init('custom', 'CK7DT53U', 'placement:mongoosejscom',
{
target: '#native-direct',
template: `
<div class="native-inline">
<a rel="sponsored noopener" target="_blank" href="##statlink##" title="##company## — ##tagline##"><span class="sponsor">Sponsor</span> ##company## — ##description##</a>
</div>
</a>
`
}
);
}
})();</script><div class="api-nav"><div class="api-nav-content"><div class="nav-item" id="nav-Mongoose"><div class="nav-item-title"><a href="mongoose.html">Mongoose</a></div></div><div class="nav-item" id="nav-Schema"><div class="nav-item-title"><a href="schema.html">Schema</a></div></div><div class="nav-item" id="nav-Connection"><div class="nav-item-title"><a href="connection.html">Connection</a></div></div><div class="nav-item" id="nav-Document"><div class="nav-item-title"><a href="document.html">Document</a></div></div><div class="nav-item" id="nav-Model"><div class="nav-item-title"><a href="model.html">Model</a></div></div><div class="nav-item" id="nav-Query"><div class="nav-item-title"><a href="query.html">Query</a></div></div><div class="nav-item" id="nav-QueryCursor"><div class="nav-item-title" style="font-weight: bold"><a href="querycursor.html">QueryCursor</a></div><ul class="nav-item-sub"><li><a href="#QueryCursor()"><code>QueryCursor()</code></a></li><li><a href="#QueryCursor.prototype.addCursorFlag()"><code>QueryCursor.prototype.addCursorFlag()</code></a></li><li><a href="#QueryCursor.prototype.close()"><code>QueryCursor.prototype.close()</code></a></li><li><a href="#QueryCursor.prototype.eachAsync()"><code>QueryCursor.prototype.eachAsync()</code></a></li><li><a href="#QueryCursor.prototype.getDriverCursor()"><code>QueryCursor.prototype.getDriverCursor()</code></a></li><li><a href="#QueryCursor.prototype.map()"><code>QueryCursor.prototype.map()</code></a></li><li><a href="#QueryCursor.prototype.next()"><code>QueryCursor.prototype.next()</code></a></li><li><a href="#QueryCursor.prototype.options"><code>QueryCursor.prototype.options</code></a></li><li><a href="#QueryCursor.prototype.rewind()"><code>QueryCursor.prototype.rewind()</code></a></li><li><a href="#QueryCursor.prototype[Symbol.asyncIterator]()"><code>QueryCursor.prototype[Symbol.asyncIterator]()</code></a></li></ul></div><div class="nav-item" id="nav-Aggregate"><div class="nav-item-title"><a href="aggregate.html">Aggregate</a></div></div><div class="nav-item" id="nav-AggregationCursor"><div class="nav-item-title"><a href="aggregationcursor.html">AggregationCursor</a></div></div><div class="nav-item" id="nav-SchemaType"><div class="nav-item-title"><a href="schematype.html">SchemaType</a></div></div><div class="nav-item" id="nav-VirtualType"><div class="nav-item-title"><a href="virtualtype.html">VirtualType</a></div></div><div class="nav-item" id="nav-Error"><div class="nav-item-title"><a href="error.html">Error</a></div></div><div class="nav-item" id="nav-SchemaArray"><div class="nav-item-title"><a href="schemaarray.html">SchemaArray</a></div></div><div class="nav-item" id="nav-SchemaDocumentArray"><div class="nav-item-title"><a href="schemadocumentarray.html">SchemaDocumentArray</a></div></div><div class="nav-item" id="nav-SchemaSubdocument"><div class="nav-item-title"><a href="schemasubdocument.html">SchemaSubdocument</a></div></div><div class="nav-item" id="nav-SchemaBoolean"><div class="nav-item-title"><a href="schemaboolean.html">SchemaBoolean</a></div></div><div class="nav-item" id="nav-SchemaBuffer"><div class="nav-item-title"><a href="schemabuffer.html">SchemaBuffer</a></div></div><div class="nav-item" id="nav-SchemaNumber"><div class="nav-item-title"><a href="schemanumber.html">SchemaNumber</a></div></div><div class="nav-item" id="nav-SchemaObjectId"><div class="nav-item-title"><a href="schemaobjectid.html">SchemaObjectId</a></div></div><div class="nav-item" id="nav-SchemaString"><div class="nav-item-title"><a href="schemastring.html">SchemaString</a></div></div><div class="nav-item" id="nav-DocumentArray"><div class="nav-item-title"><a href="documentarray.html">DocumentArray</a></div></div><div class="nav-item" id="nav-Subdocument"><div class="nav-item-title"><a href="subdocument.html">Subdocument</a></div></div><div class="nav-item" id="nav-ArraySubdocument"><div class="nav-item-title"><a href="arraysubdocument.html">ArraySubdocument</a></div></div><div class="nav-item" id="nav-Buffer"><div class="nav-item-title"><a href="buffer.html">Buffer</a></div></div><div class="nav-item" id="nav-Decimal128"><div class="nav-item-title"><a href="decimal128.html">Decimal128</a></div></div><div class="nav-item" id="nav-Map"><div class="nav-item-title"><a href="map.html">Map</a></div></div><div class="nav-item" id="nav-Array"><div class="nav-item-title"><a href="array.html">Array</a></div></div></div></div><div class="api-content"><ul><li><a href="#QueryCursor()"><code>QueryCursor()</code></a></li><li><a href="#QueryCursor.prototype.addCursorFlag()"><code>QueryCursor.prototype.addCursorFlag()</code></a></li><li><a href="#QueryCursor.prototype.close()"><code>QueryCursor.prototype.close()</code></a></li><li><a href="#QueryCursor.prototype.eachAsync()"><code>QueryCursor.prototype.eachAsync()</code></a></li><li><a href="#QueryCursor.prototype.getDriverCursor()"><code>QueryCursor.prototype.getDriverCursor()</code></a></li><li><a href="#QueryCursor.prototype.map()"><code>QueryCursor.prototype.map()</code></a></li><li><a href="#QueryCursor.prototype.next()"><code>QueryCursor.prototype.next()</code></a></li><li><a href="#QueryCursor.prototype.options"><code>QueryCursor.prototype.options</code></a></li><li><a href="#QueryCursor.prototype.rewind()"><code>QueryCursor.prototype.rewind()</code></a></li><li><a href="#QueryCursor.prototype[Symbol.asyncIterator]()"><code>QueryCursor.prototype[Symbol.asyncIterator]()</code></a></li></ul><hr class="separate-api-elements"><h3 id="QueryCursor()"><a href="#QueryCursor()"><code>QueryCursor()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>query</code>
<span class="method-type">&laquo;Query&raquo;</span> </li><li class="param"><code>options</code>
<span class="method-type">&laquo;Object&raquo;</span> query options passed to <code>.find()</code></p>
</li></ul><h5>Inherits:</h5><ul><li><span class="method-type"><a href="https://nodejs.org/api/stream.html#class-streamreadable">&laquo;Readable&raquo;</a></span></li></ul><div><p>A QueryCursor is a concurrency primitive for processing query results
one document at a time. A QueryCursor fulfills the Node.js streams3 API,
in addition to several other mechanisms for loading documents from MongoDB
one at a time.</p>
<p>QueryCursors execute the model&#39;s pre <code>find</code> hooks before loading any documents
from MongoDB, and the model&#39;s post <code>find</code> hooks after loading each document.</p>
<p>Unless you&#39;re an advanced user, do <strong>not</strong> instantiate this class directly.
Use <a href="/docs/api/query.html#Query.prototype.cursor()"><code>Query#cursor()</code></a> instead.</p>
  </div><hr class="separate-api-elements"><h3 id="QueryCursor.prototype.addCursorFlag()"><a href="#QueryCursor.prototype.addCursorFlag()"><code>QueryCursor.prototype.addCursorFlag()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>flag</code>
<span class="method-type">&laquo;String&raquo;</span> </li><li class="param"><code>value</code>
<span class="method-type">&laquo;Boolean&raquo;</span> </li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;AggregationCursor&raquo;</span> this</li></ul><div><p>Adds a <a href="https://mongodb.github.io/node-mongodb-native/4.9/classes/FindCursor.html#addCursorFlag">cursor flag</a>.
Useful for setting the <code>noCursorTimeout</code> and <code>tailable</code> flags.</p>
  </div><hr class="separate-api-elements"><h3 id="QueryCursor.prototype.close()"><a href="#QueryCursor.prototype.close()"><code>QueryCursor.prototype.close()</code></a></h3><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Promise&raquo;</span> </li></ul><h5>See:</h5><ul><li><span class="method-type"><a href="https://mongodb.github.io/node-mongodb-native/4.9/classes/AggregationCursor.html#close">AggregationCursor.close</a></span></li></ul><div><p>Marks this cursor as closed. Will stop streaming and subsequent calls to
<code>next()</code> will error.</p>
  </div><hr class="separate-api-elements"><h3 id="QueryCursor.prototype.eachAsync()"><a href="#QueryCursor.prototype.eachAsync()"><code>QueryCursor.prototype.eachAsync()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>fn</code>
<span class="method-type">&laquo;Function&raquo;</span> </li><li class="param"><code>[options]</code>
<span class="method-type">&laquo;Object&raquo;</span> </li><ul style="margin-top: 0.5em"><li><code>[options.parallel]</code>
<span class="method-type">&laquo;Number&raquo;</span> the number of promises to execute in parallel. Defaults to 1.</p>
</li></ul><ul style="margin-top: 0.5em"><li><code>[options.batchSize]</code>
<span class="method-type">&laquo;Number&raquo;</span> if set, will call <code>fn()</code> with arrays of documents with length at most <code>batchSize</code></p>
</li></ul><ul style="margin-top: 0.5em"><li><code>[options.continueOnError=false]</code>
<span class="method-type">&laquo;Boolean&raquo;</span> if true, <code>eachAsync()</code> iterates through all docs even if <code>fn</code> throws an error. If false, <code>eachAsync()</code> throws an error immediately if the given function <code>fn()</code> throws an error.</p>
</li></ul></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Promise&raquo;</span> </li></ul><div><p>Execute <code>fn</code> for every document in the cursor. If <code>fn</code> returns a promise,
will wait for the promise to resolve before iterating on to the next one.
Returns a promise that resolves when done.</p>
<h4 id="example">
        <a href="#example">
          Example:
        </a>
      </h4>
<pre><code lang="javascript"><span class="hljs-comment">// Iterate over documents asynchronously</span>
<span class="hljs-title class_">Thing</span>.
  <span class="hljs-title function_">find</span>({ <span class="hljs-attr">name</span>: <span class="hljs-regexp">/^hello/</span> }).
  <span class="hljs-title function_">cursor</span>().
  <span class="hljs-title function_">eachAsync</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">doc, i</span>) {
    doc.<span class="hljs-property">foo</span> = doc.<span class="hljs-property">bar</span> + i;
    <span class="hljs-keyword">await</span> doc.<span class="hljs-title function_">save</span>();
  })</code></pre>  </div><hr class="separate-api-elements"><h3 id="QueryCursor.prototype.getDriverCursor()"><a href="#QueryCursor.prototype.getDriverCursor()"><code>QueryCursor.prototype.getDriverCursor()</code></a></h3><div><p>Returns the underlying cursor from the MongoDB Node driver that this cursor uses.</p>
  </div><hr class="separate-api-elements"><h3 id="QueryCursor.prototype.map()"><a href="#QueryCursor.prototype.map()"><code>QueryCursor.prototype.map()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>fn</code>
<span class="method-type">&laquo;Function&raquo;</span> </li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;QueryCursor&raquo;</span> </li></ul><div><p>Registers a transform function which subsequently maps documents retrieved
via the streams interface or <code>.next()</code></p>
<h4 id="example">
        <a href="#example">
          Example:
        </a>
      </h4>
<pre><code lang="javascript"><span class="hljs-comment">// Map documents returned by `data` events</span>
<span class="hljs-title class_">Thing</span>.
  <span class="hljs-title function_">find</span>({ <span class="hljs-attr">name</span>: <span class="hljs-regexp">/^hello/</span> }).
  <span class="hljs-title function_">cursor</span>().
  <span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">doc</span>) {
   doc.<span class="hljs-property">foo</span> = <span class="hljs-string">&quot;bar&quot;</span>;
   <span class="hljs-keyword">return</span> doc;
  })
  <span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">doc</span>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(doc.<span class="hljs-property">foo</span>); });

<span class="hljs-comment">// Or map documents returned by `.next()`</span>
<span class="hljs-keyword">const</span> cursor = <span class="hljs-title class_">Thing</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">name</span>: <span class="hljs-regexp">/^hello/</span> }).
  <span class="hljs-title function_">cursor</span>().
  <span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">doc</span>) {
    doc.<span class="hljs-property">foo</span> = <span class="hljs-string">&quot;bar&quot;</span>;
    <span class="hljs-keyword">return</span> doc;
  });
cursor.<span class="hljs-title function_">next</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">error, doc</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(doc.<span class="hljs-property">foo</span>);
});</code></pre>  </div><hr class="separate-api-elements"><h3 id="QueryCursor.prototype.next()"><a href="#QueryCursor.prototype.next()"><code>QueryCursor.prototype.next()</code></a></h3><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Promise&raquo;</span> </li></ul><div><p>Get the next document from this cursor. Will return <code>null</code> when there are
no documents left.</p>
  </div><hr class="separate-api-elements"><h3 id="QueryCursor.prototype.options"><a href="#QueryCursor.prototype.options"><code>QueryCursor.prototype.options</code></a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The <code>options</code> passed in to the <code>QueryCursor</code> constructor.</p>
  </div><hr class="separate-api-elements"><h3 id="QueryCursor.prototype.rewind()"><a href="#QueryCursor.prototype.rewind()"><code>QueryCursor.prototype.rewind()</code></a></h3><h5>Returns:</h5><ul><li><span class="method-type">&laquo;AggregationCursor&raquo;</span> this</li></ul><div><p>Rewind this cursor to its uninitialized state. Any options that are present on the cursor will
remain in effect. Iterating this cursor will cause new queries to be sent to the server, even
if the resultant data has already been retrieved by this cursor.</p>
  </div><hr class="separate-api-elements"><h3 id="QueryCursor.prototype[Symbol.asyncIterator]()"><a href="#QueryCursor.prototype[Symbol.asyncIterator]()"><code>QueryCursor.prototype[Symbol.asyncIterator]()</code></a></h3><div><p>Returns an asyncIterator for use with <a href="https://thecodebarbarian.com/getting-started-with-async-iterators-in-node-js"><code>for/await/of</code> loops</a>.
You do not need to call this function explicitly, the JavaScript runtime
will call it for you.</p>
<h4 id="example">
        <a href="#example">
          Example:
        </a>
      </h4>
<pre><code lang="javascript"><span class="hljs-comment">// Works without using `cursor()`</span>
<span class="hljs-keyword">for</span> <span class="hljs-title function_">await</span> (<span class="hljs-keyword">const</span> doc <span class="hljs-keyword">of</span> <span class="hljs-title class_">Model</span>.<span class="hljs-title function_">find</span>([{ <span class="hljs-attr">$sort</span>: { <span class="hljs-attr">name</span>: <span class="hljs-number">1</span> } }])) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(doc.<span class="hljs-property">name</span>);
}

<span class="hljs-comment">// Can also use `cursor()`</span>
<span class="hljs-keyword">for</span> <span class="hljs-title function_">await</span> (<span class="hljs-keyword">const</span> doc <span class="hljs-keyword">of</span> <span class="hljs-title class_">Model</span>.<span class="hljs-title function_">find</span>([{ <span class="hljs-attr">$sort</span>: { <span class="hljs-attr">name</span>: <span class="hljs-number">1</span> } }]).<span class="hljs-title function_">cursor</span>()) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(doc.<span class="hljs-property">name</span>);
}</code></pre><p>Node.js 10.x supports async iterators natively without any flags. You can
enable async iterators in Node.js 8.x using the <a href="https://github.com/tc39/proposal-async-iteration/issues/117#issuecomment-346695187"><code>--harmony_async_iteration</code> flag</a>.</p>
<p><strong>Note:</strong> This function is not if <code>Symbol.asyncIterator</code> is undefined. If
<code>Symbol.asyncIterator</code> is undefined, that means your Node.js version does not
support async iterators.</p>
  </div></div></div></div><div id="jobs"><div class="job-listing"><a href="/docs/jobs.html#61f0b0402d893554bc3a247f"><div class="company-logo"><img src="https://assets.localizecdn.com/uploads/1689251999716.png"></div><div class="description"><div class="company">Localize</div><div class="title">Full Stack Engineer</div><div class="location">Anywhere</div></div></a></div><div class="button jobs-view-more"><a href="/docs/jobs.html">View more jobs!</a></div></div><script type="text/javascript" src="/docs/js/navbar-search.js"></script><script type="text/javascript" src="/docs/js/mobile-navbar-toggle.js"></script></div></body></html>