<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Mongoose v8.3.1: Schema</title><link rel="apple-touch-icon" sizes="57x57" href="/docs/images/favicon/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/docs/images/favicon/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/docs/images/favicon/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/docs/images/favicon/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/docs/images/favicon/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/docs/images/favicon/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/docs/images/favicon/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/docs/images/favicon/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/docs/images/favicon/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/docs/images/favicon/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/docs/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/docs/images/favicon/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/docs/images/favicon/favicon-16x16.png"><link rel="manifest" href="/docs/images/favicon/manifest.json"><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans"><link rel="stylesheet" href="/docs/css/github.css"><link rel="stylesheet" href="/docs/css/mongoose5.css"><link rel="stylesheet" href="/docs/css/carbonads.css"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/docs/images/favicon/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/docs/css/api.css"><script src="/docs/js/api-bold-current-nav.js"></script><script src="/docs/js/convert-old-anchorid.js"></script><script type="text/javascript" src="//m.servedby-buysellads.com/monetization.custom.js"></script><link rel="stylesheet" href="/docs/css/inlinecpc.css"></head><body><div id="layout"><div id="mobile-menu"><a class="menu-link" id="menuLink" href="#menu"><svg width="100%" height="100%" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></a><div id="mobile-logo-container"><a href="/"><img id="logo" src="/docs/images/mongoose5_62x30_transparent.png"><span class="logo-text">mongoose</span></a></div></div><div id="menu"><nav class="pure-menu"><div class="pure-menu-heading" id="logo-container"><a href="/"><img id="logo" src="/docs/images/mongoose5_62x30_transparent.png"><span class="logo-text">mongoose</span></a></div><ul class="pure-menu-list" id="navbar"><li class="pure-menu-horizontal pure-menu-item pure-menu-has-children pure-menu-allow-hover version"><a class="pure-menu-link" href="/docs/index.html">Version 8.3.1</a><ul class="pure-menu-children"><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/7.x/index.html">Version 7.6.10</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/6.x/index.html">Version 6.12.7</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/5.x/index.html">Version 5.13.22</a></li></ul></li><li class="pure-menu-item search"><input id="search-input-nav" type="text" placeholder="Search"><button id="search-button-nav"><img src="/docs/images/search.svg"></button></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/index.html">Quick Start</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/guides.html">Guides</a><ul class="pure-menu-list"><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/guide.html">Schemas</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/schematypes.html">SchemaTypes</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/connections.html">Connections</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/models.html">Models</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/documents.html">Documents</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/subdocs.html">Subdocuments</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/queries.html">Queries</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/validation.html">Validation</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/middleware.html">Middleware</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/populate.html">Populate</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/discriminators.html">Discriminators</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/plugins.html">Plugins</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/timestamps.html">Timestamps</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/transactions.html">Transactions</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/typescript.html">TypeScript</a></li></ul></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/api/mongoose.html">API</a><ul class="pure-menu-list"><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/mongoose.html">Mongoose</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link selected" href="/docs/api/schema.html">Schema</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/connection.html">Connection</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/document.html">Document</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/model.html">Model</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/query.html">Query</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/aggregate.html">Aggregate</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/schematype.html">SchemaType</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/virtualtype.html">VirtualType</a></li></ul></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/migrating_to_8.html">Migration Guide</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/compatibility.html">Version Compatibility</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/version-support.html">Version Support</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/faq.html">FAQ</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/further_reading.html">Further Reading</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/enterprise.html">For Enterprise</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/sponsors.html" >Sponsors</a></li></ul><div class="cpc-ad"><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CKYIL27I&placement=mongoosejscom" id="_carbonads_js"></script></div></nav></div><div class="container"><div id="content"><a class="edit-docs-link" href="https://github.com/Automattic/mongoose/blob/master/lib/schema.js" target="_blank">
<img src="/docs/images/pencil.svg" />
</a><h1>Schema</h1><script type="text/javascript" src="//m.servedby-buysellads.com/monetization.custom.js"></script><link rel="stylesheet" href="/docs/css/inlinecpc.css"><div id="native-direct"></div><script>(function() {
if (typeof _bsa !== 'undefined' && _bsa) {
_bsa.init('custom', 'CK7DT53U', 'placement:mongoosejscom',
{
target: '#native-direct',
template: `
<div class="native-inline">
<a rel="sponsored noopener" target="_blank" href="##statlink##" title="##company## — ##tagline##"><span class="sponsor">Sponsor</span> ##company## — ##description##</a>
</div>
</a>
`
}
);
}
})();</script><div class="api-nav"><div class="api-nav-content"><div class="nav-item" id="nav-Mongoose"><div class="nav-item-title"><a href="mongoose.html">Mongoose</a></div></div><div class="nav-item" id="nav-Schema"><div class="nav-item-title" style="font-weight: bold"><a href="schema.html">Schema</a></div><ul class="nav-item-sub"><li><a href="#Schema()"><code>Schema()</code></a></li><li><a href="#Schema.Types"><code>Schema.Types</code></a></li><li><a href="#Schema.indexTypes"><code>Schema.indexTypes</code></a></li><li><a href="#Schema.prototype.add()"><code>Schema.prototype.add()</code></a></li><li><a href="#Schema.prototype.alias()"><code>Schema.prototype.alias()</code></a></li><li><a href="#Schema.prototype.childSchemas"><code>Schema.prototype.childSchemas</code></a></li><li><a href="#Schema.prototype.clearIndexes()"><code>Schema.prototype.clearIndexes()</code></a></li><li><a href="#Schema.prototype.clone()"><code>Schema.prototype.clone()</code></a></li><li><a href="#Schema.prototype.discriminator()"><code>Schema.prototype.discriminator()</code></a></li><li><a href="#Schema.prototype.eachPath()"><code>Schema.prototype.eachPath()</code></a></li><li><a href="#Schema.prototype.get()"><code>Schema.prototype.get()</code></a></li><li><a href="#Schema.prototype.index()"><code>Schema.prototype.index()</code></a></li><li><a href="#Schema.prototype.indexes()"><code>Schema.prototype.indexes()</code></a></li><li><a href="#Schema.prototype.loadClass()"><code>Schema.prototype.loadClass()</code></a></li><li><a href="#Schema.prototype.method()"><code>Schema.prototype.method()</code></a></li><li><a href="#Schema.prototype.obj"><code>Schema.prototype.obj</code></a></li><li><a href="#Schema.prototype.omit()"><code>Schema.prototype.omit()</code></a></li><li><a href="#Schema.prototype.path()"><code>Schema.prototype.path()</code></a></li><li><a href="#Schema.prototype.pathType()"><code>Schema.prototype.pathType()</code></a></li><li><a href="#Schema.prototype.paths"><code>Schema.prototype.paths</code></a></li><li><a href="#Schema.prototype.pick()"><code>Schema.prototype.pick()</code></a></li><li><a href="#Schema.prototype.plugin()"><code>Schema.prototype.plugin()</code></a></li><li><a href="#Schema.prototype.post()"><code>Schema.prototype.post()</code></a></li><li><a href="#Schema.prototype.pre()"><code>Schema.prototype.pre()</code></a></li><li><a href="#Schema.prototype.queue()"><code>Schema.prototype.queue()</code></a></li><li><a href="#Schema.prototype.remove()"><code>Schema.prototype.remove()</code></a></li><li><a href="#Schema.prototype.removeIndex()"><code>Schema.prototype.removeIndex()</code></a></li><li><a href="#Schema.prototype.removeVirtual()"><code>Schema.prototype.removeVirtual()</code></a></li><li><a href="#Schema.prototype.requiredPaths()"><code>Schema.prototype.requiredPaths()</code></a></li><li><a href="#Schema.prototype.searchIndex()"><code>Schema.prototype.searchIndex()</code></a></li><li><a href="#Schema.prototype.set()"><code>Schema.prototype.set()</code></a></li><li><a href="#Schema.prototype.static()"><code>Schema.prototype.static()</code></a></li><li><a href="#Schema.prototype.virtual()"><code>Schema.prototype.virtual()</code></a></li><li><a href="#Schema.prototype.virtualpath()"><code>Schema.prototype.virtualpath()</code></a></li><li><a href="#Schema.prototype.virtuals"><code>Schema.prototype.virtuals</code></a></li><li><a href="#Schema.reserved"><code>Schema.reserved</code></a></li></ul></div><div class="nav-item" id="nav-Connection"><div class="nav-item-title"><a href="connection.html">Connection</a></div></div><div class="nav-item" id="nav-Document"><div class="nav-item-title"><a href="document.html">Document</a></div></div><div class="nav-item" id="nav-Model"><div class="nav-item-title"><a href="model.html">Model</a></div></div><div class="nav-item" id="nav-Query"><div class="nav-item-title"><a href="query.html">Query</a></div></div><div class="nav-item" id="nav-QueryCursor"><div class="nav-item-title"><a href="querycursor.html">QueryCursor</a></div></div><div class="nav-item" id="nav-Aggregate"><div class="nav-item-title"><a href="aggregate.html">Aggregate</a></div></div><div class="nav-item" id="nav-AggregationCursor"><div class="nav-item-title"><a href="aggregationcursor.html">AggregationCursor</a></div></div><div class="nav-item" id="nav-SchemaType"><div class="nav-item-title"><a href="schematype.html">SchemaType</a></div></div><div class="nav-item" id="nav-VirtualType"><div class="nav-item-title"><a href="virtualtype.html">VirtualType</a></div></div><div class="nav-item" id="nav-Error"><div class="nav-item-title"><a href="error.html">Error</a></div></div><div class="nav-item" id="nav-SchemaArray"><div class="nav-item-title"><a href="schemaarray.html">SchemaArray</a></div></div><div class="nav-item" id="nav-SchemaDocumentArray"><div class="nav-item-title"><a href="schemadocumentarray.html">SchemaDocumentArray</a></div></div><div class="nav-item" id="nav-SchemaSubdocument"><div class="nav-item-title"><a href="schemasubdocument.html">SchemaSubdocument</a></div></div><div class="nav-item" id="nav-SchemaBoolean"><div class="nav-item-title"><a href="schemaboolean.html">SchemaBoolean</a></div></div><div class="nav-item" id="nav-SchemaBuffer"><div class="nav-item-title"><a href="schemabuffer.html">SchemaBuffer</a></div></div><div class="nav-item" id="nav-SchemaNumber"><div class="nav-item-title"><a href="schemanumber.html">SchemaNumber</a></div></div><div class="nav-item" id="nav-SchemaObjectId"><div class="nav-item-title"><a href="schemaobjectid.html">SchemaObjectId</a></div></div><div class="nav-item" id="nav-SchemaString"><div class="nav-item-title"><a href="schemastring.html">SchemaString</a></div></div><div class="nav-item" id="nav-DocumentArray"><div class="nav-item-title"><a href="documentarray.html">DocumentArray</a></div></div><div class="nav-item" id="nav-Subdocument"><div class="nav-item-title"><a href="subdocument.html">Subdocument</a></div></div><div class="nav-item" id="nav-ArraySubdocument"><div class="nav-item-title"><a href="arraysubdocument.html">ArraySubdocument</a></div></div><div class="nav-item" id="nav-Buffer"><div class="nav-item-title"><a href="buffer.html">Buffer</a></div></div><div class="nav-item" id="nav-Decimal128"><div class="nav-item-title"><a href="decimal128.html">Decimal128</a></div></div><div class="nav-item" id="nav-Map"><div class="nav-item-title"><a href="map.html">Map</a></div></div><div class="nav-item" id="nav-Array"><div class="nav-item-title"><a href="array.html">Array</a></div></div></div></div><div class="api-content"><ul><li><a href="#Schema()"><code>Schema()</code></a></li><li><a href="#Schema.Types"><code>Schema.Types</code></a></li><li><a href="#Schema.indexTypes"><code>Schema.indexTypes</code></a></li><li><a href="#Schema.prototype.add()"><code>Schema.prototype.add()</code></a></li><li><a href="#Schema.prototype.alias()"><code>Schema.prototype.alias()</code></a></li><li><a href="#Schema.prototype.childSchemas"><code>Schema.prototype.childSchemas</code></a></li><li><a href="#Schema.prototype.clearIndexes()"><code>Schema.prototype.clearIndexes()</code></a></li><li><a href="#Schema.prototype.clone()"><code>Schema.prototype.clone()</code></a></li><li><a href="#Schema.prototype.discriminator()"><code>Schema.prototype.discriminator()</code></a></li><li><a href="#Schema.prototype.eachPath()"><code>Schema.prototype.eachPath()</code></a></li><li><a href="#Schema.prototype.get()"><code>Schema.prototype.get()</code></a></li><li><a href="#Schema.prototype.index()"><code>Schema.prototype.index()</code></a></li><li><a href="#Schema.prototype.indexes()"><code>Schema.prototype.indexes()</code></a></li><li><a href="#Schema.prototype.loadClass()"><code>Schema.prototype.loadClass()</code></a></li><li><a href="#Schema.prototype.method()"><code>Schema.prototype.method()</code></a></li><li><a href="#Schema.prototype.obj"><code>Schema.prototype.obj</code></a></li><li><a href="#Schema.prototype.omit()"><code>Schema.prototype.omit()</code></a></li><li><a href="#Schema.prototype.path()"><code>Schema.prototype.path()</code></a></li><li><a href="#Schema.prototype.pathType()"><code>Schema.prototype.pathType()</code></a></li><li><a href="#Schema.prototype.paths"><code>Schema.prototype.paths</code></a></li><li><a href="#Schema.prototype.pick()"><code>Schema.prototype.pick()</code></a></li><li><a href="#Schema.prototype.plugin()"><code>Schema.prototype.plugin()</code></a></li><li><a href="#Schema.prototype.post()"><code>Schema.prototype.post()</code></a></li><li><a href="#Schema.prototype.pre()"><code>Schema.prototype.pre()</code></a></li><li><a href="#Schema.prototype.queue()"><code>Schema.prototype.queue()</code></a></li><li><a href="#Schema.prototype.remove()"><code>Schema.prototype.remove()</code></a></li><li><a href="#Schema.prototype.removeIndex()"><code>Schema.prototype.removeIndex()</code></a></li><li><a href="#Schema.prototype.removeVirtual()"><code>Schema.prototype.removeVirtual()</code></a></li><li><a href="#Schema.prototype.requiredPaths()"><code>Schema.prototype.requiredPaths()</code></a></li><li><a href="#Schema.prototype.searchIndex()"><code>Schema.prototype.searchIndex()</code></a></li><li><a href="#Schema.prototype.set()"><code>Schema.prototype.set()</code></a></li><li><a href="#Schema.prototype.static()"><code>Schema.prototype.static()</code></a></li><li><a href="#Schema.prototype.virtual()"><code>Schema.prototype.virtual()</code></a></li><li><a href="#Schema.prototype.virtualpath()"><code>Schema.prototype.virtualpath()</code></a></li><li><a href="#Schema.prototype.virtuals"><code>Schema.prototype.virtuals</code></a></li><li><a href="#Schema.reserved"><code>Schema.reserved</code></a></li></ul><hr class="separate-api-elements"><h3 id="Schema()"><a href="#Schema()"><code>Schema()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>[definition]</code>
<span class="method-type">&laquo;Object|Schema|Array&raquo;</span> Can be one of: object describing schema paths, or schema to copy, or array of objects and schemas</p>
</li><li class="param"><code>[options]</code>
<span class="method-type">&laquo;Object&raquo;</span> </li></ul><h5>Inherits:</h5><ul><li><span class="method-type"><a href="https://nodejs.org/api/events.html#class-eventemitter">&laquo;NodeJS EventEmitter&raquo;</a></span></li></ul><div><p>Schema constructor.</p>
<h4 id="example">Example:</h4>
<pre><code>const child = new Schema({ name: String });
const schema = new Schema({ name: String, age: Number, children: [child] });
const Tree = mongoose.model(&#39;Tree&#39;, schema);

// setting schema options
new Schema({ name: String }, { id: false, autoIndex: false })
</code></pre>
<h4 id="options">Options:</h4>
<ul>
<li><a href="/docs/guide.html#autoIndex">autoIndex</a>: bool - defaults to null (which means use the connection&#39;s autoIndex option)</li>
<li><a href="/docs/guide.html#autoCreate">autoCreate</a>: bool - defaults to null (which means use the connection&#39;s autoCreate option)</li>
<li><a href="/docs/guide.html#bufferCommands">bufferCommands</a>: bool - defaults to true</li>
<li><a href="/docs/guide.html#bufferTimeoutMS">bufferTimeoutMS</a>: number - defaults to 10000 (10 seconds). If <code>bufferCommands</code> is enabled, the amount of time Mongoose will wait for connectivity to be restablished before erroring out.</li>
<li><a href="/docs/guide.html#capped">capped</a>: bool | number | object - defaults to false</li>
<li><a href="/docs/guide.html#collection">collection</a>: string - no default</li>
<li><a href="/docs/guide.html#discriminatorKey">discriminatorKey</a>: string - defaults to <code>__t</code></li>
<li><a href="/docs/guide.html#id">id</a>: bool - defaults to true</li>
<li><a href="/docs/guide.html#_id">_id</a>: bool - defaults to true</li>
<li><a href="/docs/guide.html#minimize">minimize</a>: bool - controls <a href="/docs/api/document.html#Document.prototype.toObject()">document#toObject</a> behavior when called manually - defaults to true</li>
<li><a href="/docs/guide.html#read">read</a>: string</li>
<li><a href="/docs/guide.html#writeConcern">writeConcern</a>: object - defaults to null, use to override <a href="https://www.mongodb.com/docs/manual/reference/write-concern/">the MongoDB server&#39;s default write concern settings</a></li>
<li><a href="/docs/guide.html#shardKey">shardKey</a>: object - defaults to <code>null</code></li>
<li><a href="/docs/guide.html#strict">strict</a>: bool - defaults to true</li>
<li><a href="/docs/guide.html#strictQuery">strictQuery</a>: bool - defaults to false</li>
<li><a href="/docs/guide.html#toJSON">toJSON</a> - object - no default</li>
<li><a href="/docs/guide.html#toObject">toObject</a> - object - no default</li>
<li><a href="/docs/guide.html#typeKey">typeKey</a> - string - defaults to &#39;type&#39;</li>
<li><a href="/docs/guide.html#validateBeforeSave">validateBeforeSave</a> - bool - defaults to <code>true</code></li>
<li><a href="/docs/api/document.html#Document.prototype.validate()">validateModifiedOnly</a> - bool - defaults to <code>false</code></li>
<li><a href="/docs/guide.html#versionKey">versionKey</a>: string or object - defaults to &quot;__v&quot;</li>
<li><a href="/docs/guide.html#optimisticConcurrency">optimisticConcurrency</a>: bool - defaults to false. Set to true to enable <a href="https://thecodebarbarian.com/whats-new-in-mongoose-5-10-optimistic-concurrency.html">optimistic concurrency</a>.</li>
<li><a href="/docs/guide.html#collation">collation</a>: object - defaults to null (which means use no collation)</li>
<li><a href="/docs/guide.html#timeseries">timeseries</a>: object - defaults to null (which means this schema&#39;s collection won&#39;t be a timeseries collection)</li>
<li><a href="/docs/guide.html#selectPopulatedPaths">selectPopulatedPaths</a>: boolean - defaults to <code>true</code></li>
<li><a href="/docs/guide.html#skipVersioning">skipVersioning</a>: object - paths to exclude from versioning</li>
<li><a href="/docs/guide.html#timestamps">timestamps</a>: object or boolean - defaults to <code>false</code>. If true, Mongoose adds <code>createdAt</code> and <code>updatedAt</code> properties to your schema and manages those properties for you.</li>
<li><a href="/docs/guide.html#pluginTags">pluginTags</a>: array of strings - defaults to <code>undefined</code>. If set and plugin called with <code>tags</code> option, will only apply that plugin to schemas with a matching tag.</li>
<li><a href="/docs/tutorials/virtuals.html#virtuals-via-schema-options">virtuals</a>: object - virtuals to define, alias for <a href="#Schema.prototype.virtual()"><code>.virtual</code></a></li>
<li>[collectionOptions]: object with options passed to <a href="https://www.mongodb.com/docs/manual/reference/method/db.createCollection/"><code>createCollection()</code></a> when calling <code>Model.createCollection()</code> or <code>autoCreate</code> set to true.</li>
</ul>
<h4 id="options-for-nested-schemas">Options for Nested Schemas:</h4>
<ul>
<li><code>excludeIndexes</code>: bool - defaults to <code>false</code>. If <code>true</code>, skip building indexes on this schema&#39;s paths.</li>
</ul>
<h4 id="note">Note:</h4>
<p><em>When nesting schemas, (<code>children</code> in the example above), always declare the child schema first before passing it into its parent.</em></p>
  </div><hr class="separate-api-elements"><h3 id="Schema.Types"><a href="#Schema.Types"><code>Schema.Types</code></a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The various built-in Mongoose Schema Types.</p>
<h4 id="example">Example:</h4>
<pre><code>const mongoose = require(&#39;mongoose&#39;);
const ObjectId = mongoose.Schema.Types.ObjectId;
</code></pre>
<h4 id="types">Types:</h4>
<ul>
<li><a href="/docs/schematypes.html#strings">String</a></li>
<li><a href="/docs/schematypes.html#numbers">Number</a></li>
<li><a href="/docs/schematypes.html#booleans">Boolean</a> | Bool</li>
<li><a href="/docs/schematypes.html#arrays">Array</a></li>
<li><a href="/docs/schematypes.html#buffers">Buffer</a></li>
<li><a href="/docs/schematypes.html#dates">Date</a></li>
<li><a href="/docs/schematypes.html#objectids">ObjectId</a> | Oid</li>
<li><a href="/docs/schematypes.html#mixed">Mixed</a></li>
<li><a href="/docs/schematypes.html#uuid">UUID</a></li>
<li><a href="/docs/schematypes.html#bigint">BigInt</a></li>
</ul>
<p>Using this exposed access to the <code>Mixed</code> SchemaType, we can use them in our schema.</p>
<pre><code>const Mixed = mongoose.Schema.Types.Mixed;
new mongoose.Schema({ _user: Mixed })
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.indexTypes"><a href="#Schema.indexTypes"><code>Schema.indexTypes</code></a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The allowed index types</p>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.add()"><a href="#Schema.prototype.add()"><code>Schema.prototype.add()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>obj</code>
<span class="method-type">&laquo;Object|Schema&raquo;</span> plain object with paths to add, or another schema</p>
</li><li class="param"><code>[prefix]</code>
<span class="method-type">&laquo;String&raquo;</span> path to prefix the newly added paths with</p>
</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> the Schema instance</li></ul><div><p>Adds key path / schema type pairs to this schema.</p>
<h4 id="example">Example:</h4>
<pre><code>const ToySchema = new Schema();
ToySchema.add({ name: &#39;string&#39;, color: &#39;string&#39;, price: &#39;number&#39; });

const TurboManSchema = new Schema();
// You can also `add()` another schema and copy over all paths, virtuals,
// getters, setters, indexes, methods, and statics.
TurboManSchema.add(ToySchema).add({ year: Number });
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.alias()"><a href="#Schema.prototype.alias()"><code>Schema.prototype.alias()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>path</code>
<span class="method-type">&laquo;String&raquo;</span> real path to alias</p>
</li><li class="param"><code>alias</code>
<span class="method-type">&laquo;String|Array[String]&raquo;</span> the path(s) to use as an alias for <code>path</code></p>
</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> the Schema instance</li></ul><div><p>Add an alias for <code>path</code>. This means getting or setting the <code>alias</code>
is equivalent to getting or setting the <code>path</code>.</p>
<h4 id="example">Example:</h4>
<pre><code>const toySchema = new Schema({ n: String });

// Make &#39;name&#39; an alias for &#39;n&#39;
toySchema.alias(&#39;n&#39;, &#39;name&#39;);

const Toy = mongoose.model(&#39;Toy&#39;, toySchema);
const turboMan = new Toy({ n: &#39;Turbo Man&#39; });

turboMan.name; // &#39;Turbo Man&#39;
turboMan.n; // &#39;Turbo Man&#39;

turboMan.name = &#39;Turbo Man Action Figure&#39;;
turboMan.n; // &#39;Turbo Man Action Figure&#39;

await turboMan.save(); // Saves { _id: ..., n: &#39;Turbo Man Action Figure&#39; }
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.childSchemas"><a href="#Schema.prototype.childSchemas"><code>Schema.prototype.childSchemas</code></a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>Array of child schemas (from document arrays and single nested subdocs)
and their corresponding compiled models. Each element of the array is
an object with 2 properties: <code>schema</code> and <code>model</code>.</p>
<p>This property is typically only useful for plugin authors and advanced users.
You do not need to interact with this property at all to use mongoose.</p>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.clearIndexes()"><a href="#Schema.prototype.clearIndexes()"><code>Schema.prototype.clearIndexes()</code></a></h3><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> the Schema instance</li></ul><div><p>Remove all indexes from this schema.</p>
<p>clearIndexes only removes indexes from your schema object. Does <strong>not</strong> affect the indexes
in MongoDB.</p>
<h4 id="example">Example:</h4>
<pre><code>const ToySchema = new Schema({ name: String, color: String, price: Number });
ToySchema.index({ name: 1 });
ToySchema.index({ color: 1 });

// Remove all indexes on this schema
ToySchema.clearIndexes();

ToySchema.indexes(); // []
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.clone()"><a href="#Schema.prototype.clone()"><code>Schema.prototype.clone()</code></a></h3><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> the cloned schema</li></ul><div><p>Returns a deep copy of the schema</p>
<h4 id="example">Example:</h4>
<pre><code>const schema = new Schema({ name: String });
const clone = schema.clone();
clone === schema; // false
clone.path(&#39;name&#39;); // SchemaString { ... }
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.discriminator()"><a href="#Schema.prototype.discriminator()"><code>Schema.prototype.discriminator()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>name</code>
<span class="method-type">&laquo;String&raquo;</span> the name of the discriminator</p>
</li><li class="param"><code>schema</code>
<span class="method-type">&laquo;Schema&raquo;</span> the discriminated Schema</p>
</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> the Schema instance</li></ul><div><p>Inherit a Schema by applying a discriminator on an existing Schema.</p>
<h4 id="example">Example:</h4>
<pre><code>const eventSchema = new mongoose.Schema({ timestamp: Date }, { discriminatorKey: &#39;kind&#39; });

const clickedEventSchema = new mongoose.Schema({ element: String }, { discriminatorKey: &#39;kind&#39; });
const ClickedModel = eventSchema.discriminator(&#39;clicked&#39;, clickedEventSchema);

const Event = mongoose.model(&#39;Event&#39;, eventSchema);

Event.discriminators[&#39;clicked&#39;]; // Model { clicked }

const doc = await Event.create({ kind: &#39;clicked&#39;, element: &#39;#hero&#39; });
doc.element; // &#39;#hero&#39;
doc instanceof ClickedModel; // true
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.eachPath()"><a href="#Schema.prototype.eachPath()"><code>Schema.prototype.eachPath()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>fn</code>
<span class="method-type">&laquo;Function&raquo;</span> callback function</p>
</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> this</li></ul><div><p>Iterates the schemas paths similar to Array#forEach.</p>
<p>The callback is passed the pathname and the schemaType instance.</p>
<h4 id="example">Example:</h4>
<pre><code>const userSchema = new Schema({ name: String, registeredAt: Date });
userSchema.eachPath((pathname, schematype) =&gt; {
  // Prints twice:
  // name SchemaString { ... }
  // registeredAt SchemaDate { ... }
  console.log(pathname, schematype);
});
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.get()"><a href="#Schema.prototype.get()"><code>Schema.prototype.get()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>key</code>
<span class="method-type">&laquo;String&raquo;</span> The name of the Option to get the current value for</p>
</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Any&raquo;</span> the option&#39;s value</li></ul><div><p>Gets a schema option.</p>
<h4 id="example">Example:</h4>
<pre><code>schema.get(&#39;strict&#39;); // true
schema.set(&#39;strict&#39;, false);
schema.get(&#39;strict&#39;); // false
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.index()"><a href="#Schema.prototype.index()"><code>Schema.prototype.index()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>fields</code>
<span class="method-type">&laquo;Object&raquo;</span> The Fields to index, with the order, available values: <code>1 | -1 | &#39;2d&#39; | &#39;2dsphere&#39; | &#39;geoHaystack&#39; | &#39;hashed&#39; | &#39;text&#39;</code></p>
</li><li class="param"><code>[options]</code>
<span class="method-type">&laquo;Object&raquo;</span> Options to pass to <a href="https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html#createIndex">MongoDB driver&#39;s <code>createIndex()</code> function</a></p>
</li><ul style="margin-top: 0.5em"><li><code>[options.expires=null]</code>
<span class="method-type">&laquo;String|number&raquo;</span> Mongoose-specific syntactic sugar, uses <a href="https://www.npmjs.com/package/ms">ms</a> to convert <code>expires</code> option into seconds for the <code>expireAfterSeconds</code> in the above link.</p>
</li></ul><ul style="margin-top: 0.5em"><li><code>[options.language_override=null]</code>
<span class="method-type">&laquo;String&raquo;</span> Tells mongodb to use the specified field instead of <code>language</code> for parsing text indexes.</p>
</li></ul></ul><div><p>Defines an index (most likely compound) for this schema.</p>
<h4 id="example">Example:</h4>
<pre><code>schema.index({ first: 1, last: -1 })
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.indexes()"><a href="#Schema.prototype.indexes()"><code>Schema.prototype.indexes()</code></a></h3><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Array&raquo;</span> list of indexes defined in the schema</li></ul><div><p>Returns a list of indexes that this schema declares, via <code>schema.index()</code> or by <code>index: true</code> in a path&#39;s options.
Indexes are expressed as an array <code>[spec, options]</code>.</p>
<h4 id="example">Example:</h4>
<pre><code>const userSchema = new Schema({
  email: { type: String, required: true, unique: true },
  registeredAt: { type: Date, index: true }
});

// [ [ { email: 1 }, { unique: true, background: true } ],
//   [ { registeredAt: 1 }, { background: true } ] ]
userSchema.indexes();
</code></pre>
<p><a href="/docs/plugins.html">Plugins</a> can use the return value of this function to modify a schema&#39;s indexes.
For example, the below plugin makes every index unique by default.</p>
<pre><code>function myPlugin(schema) {
  for (const index of schema.indexes()) {
    if (index[1].unique === undefined) {
      index[1].unique = true;
    }
  }
}
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.loadClass()"><a href="#Schema.prototype.loadClass()"><code>Schema.prototype.loadClass()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>model</code>
<span class="method-type">&laquo;Function&raquo;</span> The Class to load</p>
</li><li class="param"><code>[virtualsOnly]</code>
<span class="method-type">&laquo;Boolean&raquo;</span> if truthy, only pulls virtuals from the class, not methods or statics</p>
</li></ul><div><p>Loads an ES6 class into a schema. Maps <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set">setters</a> + <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get">getters</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/static">static methods</a>,
and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#Class_body_and_method_definitions">instance methods</a>
to schema <a href="/docs/guide.html#virtuals">virtuals</a>,
<a href="/docs/guide.html#statics">statics</a>, and
<a href="/docs/guide.html#methods">methods</a>.</p>
<h4 id="example">Example:</h4>
<pre><code class="language-javascript">const md5 = require(&#39;md5&#39;);
const userSchema = new Schema({ email: String });
class UserClass {
  // `gravatarImage` becomes a virtual
  get gravatarImage() {
    const hash = md5(this.email.toLowerCase());
    return `https://www.gravatar.com/avatar/${hash}`;
  }

  // `getProfileUrl()` becomes a document method
  getProfileUrl() {
    return `https://mysite.com/${this.email}`;
  }

  // `findByEmail()` becomes a static
  static findByEmail(email) {
    return this.findOne({ email });
  }
}

// `schema` will now have a `gravatarImage` virtual, a `getProfileUrl()` method,
// and a `findByEmail()` static
userSchema.loadClass(UserClass);
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.method()"><a href="#Schema.prototype.method()"><code>Schema.prototype.method()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>name</code>
<span class="method-type">&laquo;String|Object&raquo;</span> The Method Name for a single function, or a Object of &quot;string-function&quot; pairs.</p>
</li><li class="param"><code>[fn]</code>
<span class="method-type">&laquo;Function&raquo;</span> The Function in a single-function definition.</p>
</li></ul><div><p>Adds an instance method to documents constructed from Models compiled from this schema.</p>
<h4 id="example">Example:</h4>
<pre><code>const schema = kittySchema = new Schema(..);

schema.method(&#39;meow&#39;, function () {
  console.log(&#39;meeeeeoooooooooooow&#39;);
})

const Kitty = mongoose.model(&#39;Kitty&#39;, schema);

const fizz = new Kitty;
fizz.meow(); // meeeeeooooooooooooow
</code></pre>
<p>If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as methods.</p>
<pre><code>schema.method({
    purr: function () {}
  , scratch: function () {}
});

// later
const fizz = new Kitty;
fizz.purr();
fizz.scratch();
</code></pre>
<p>NOTE: <code>Schema.method()</code> adds instance methods to the <code>Schema.methods</code> object. You can also add instance methods directly to the <code>Schema.methods</code> object as seen in the <a href="/docs/guide.html#methods">guide</a></p>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.obj"><a href="#Schema.prototype.obj"><code>Schema.prototype.obj</code></a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The original object passed to the schema constructor</p>
<h4 id="example">Example:</h4>
<pre><code>const schema = new Schema({ a: String }).add({ b: String });
schema.obj; // { a: String }
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.omit()"><a href="#Schema.prototype.omit()"><code>Schema.prototype.omit()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>paths</code>
<span class="method-type">&laquo;Array[String]&raquo;</span> List of Paths to omit for the new Schema</p>
</li><li class="param"><code>[options]</code>
<span class="method-type">&laquo;Object&raquo;</span> Options to pass to the new Schema Constructor (same as <code>new Schema(.., Options)</code>). Defaults to <code>this.options</code> if not set.</p>
</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> </li></ul><div><p>Returns a new schema that has the <code>paths</code> from the original schema, minus the omitted ones.</p>
<p>This method is analagous to <a href="https://lodash.com/docs/#omit">Lodash&#39;s <code>omit()</code> function</a> for Mongoose schemas.</p>
<h4 id="example">Example:</h4>
<pre><code>const schema = Schema({ name: String, age: Number });
// Creates a new schema omitting the `age` path
const newSchema = schema.omit([&#39;age&#39;]);

newSchema.path(&#39;name&#39;); // SchemaString { ... }
newSchema.path(&#39;age&#39;); // undefined
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.path()"><a href="#Schema.prototype.path()"><code>Schema.prototype.path()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>path</code>
<span class="method-type">&laquo;String&raquo;</span> The name of the Path to get / set</p>
</li><li class="param"><code>[obj]</code>
<span class="method-type">&laquo;Object&raquo;</span> The Type to set the path to, if provided the path will be SET, otherwise the path will be GET</p>
</li></ul><div><p>Gets/sets schema paths.</p>
<p>Sets a path (if arity 2)
Gets a path (if arity 1)</p>
<h4 id="example">Example:</h4>
<pre><code>schema.path(&#39;name&#39;) // returns a SchemaType
schema.path(&#39;name&#39;, Number) // changes the schemaType of `name` to Number
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.pathType()"><a href="#Schema.prototype.pathType()"><code>Schema.prototype.pathType()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>path</code>
<span class="method-type">&laquo;String&raquo;</span> </li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;String&raquo;</span> </li></ul><div><p>Returns the pathType of <code>path</code> for this schema.</p>
<p>Given a path, returns whether it is a real, virtual, nested, or ad-hoc/undefined path.</p>
<h4 id="example">Example:</h4>
<pre><code>const s = new Schema({ name: String, nested: { foo: String } });
s.virtual(&#39;foo&#39;).get(() =&gt; 42);
s.pathType(&#39;name&#39;); // &quot;real&quot;
s.pathType(&#39;nested&#39;); // &quot;nested&quot;
s.pathType(&#39;foo&#39;); // &quot;virtual&quot;
s.pathType(&#39;fail&#39;); // &quot;adhocOrUndefined&quot;
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.paths"><a href="#Schema.prototype.paths"><code>Schema.prototype.paths</code></a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The paths defined on this schema. The keys are the top-level paths
in this schema, and the values are instances of the SchemaType class.</p>
<h4 id="example">Example:</h4>
<pre><code>const schema = new Schema({ name: String }, { _id: false });
schema.paths; // { name: SchemaString { ... } }

schema.add({ age: Number });
schema.paths; // { name: SchemaString { ... }, age: SchemaNumber { ... } }
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.pick()"><a href="#Schema.prototype.pick()"><code>Schema.prototype.pick()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>paths</code>
<span class="method-type">&laquo;Array[String]&raquo;</span> List of Paths to pick for the new Schema</p>
</li><li class="param"><code>[options]</code>
<span class="method-type">&laquo;Object&raquo;</span> Options to pass to the new Schema Constructor (same as <code>new Schema(.., Options)</code>). Defaults to <code>this.options</code> if not set.</p>
</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> </li></ul><div><p>Returns a new schema that has the picked <code>paths</code> from this schema.</p>
<p>This method is analagous to <a href="https://lodash.com/docs/4.17.15#pick">Lodash&#39;s <code>pick()</code> function</a> for Mongoose schemas.</p>
<h4 id="example">Example:</h4>
<pre><code>const schema = Schema({ name: String, age: Number });
// Creates a new schema with the same `name` path as `schema`,
// but no `age` path.
const newSchema = schema.pick([&#39;name&#39;]);

newSchema.path(&#39;name&#39;); // SchemaString { ... }
newSchema.path(&#39;age&#39;); // undefined
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.plugin()"><a href="#Schema.prototype.plugin()"><code>Schema.prototype.plugin()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>plugin</code>
<span class="method-type">&laquo;Function&raquo;</span> The Plugin&#39;s callback</p>
</li><li class="param"><code>[opts]</code>
<span class="method-type">&laquo;Object&raquo;</span> Options to pass to the plugin</p>
</li><ul style="margin-top: 0.5em"><li><code>[opts.deduplicate=false]</code>
<span class="method-type">&laquo;Boolean&raquo;</span> If true, ignore duplicate plugins (same <code>fn</code> argument using <code>===</code>)</p>
</li></ul></ul><h5>See:</h5><ul><li><span class="method-type"><a href="/docs/plugins.html">plugins</a></span></li></ul><div><p>Registers a plugin for this schema.</p>
<h4 id="example">Example:</h4>
<pre><code>const s = new Schema({ name: String });
s.plugin(schema =&gt; console.log(schema.path(&#39;name&#39;).path));
mongoose.model(&#39;Test&#39;, s); // Prints &#39;name&#39;
</code></pre>
<p>Or with Options:</p>
<pre><code>const s = new Schema({ name: String });
s.plugin((schema, opts) =&gt; console.log(opts.text, schema.path(&#39;name&#39;).path), { text: &quot;Schema Path Name:&quot; });
mongoose.model(&#39;Test&#39;, s); // Prints &#39;Schema Path Name: name&#39;
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.post()"><a href="#Schema.prototype.post()"><code>Schema.prototype.post()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>methodName</code>
<span class="method-type">&laquo;String|RegExp|Array[String]&raquo;</span> The method name or regular expression to match method name</p>
</li><li class="param"><code>[options]</code>
<span class="method-type">&laquo;Object&raquo;</span> </li><ul style="margin-top: 0.5em"><li><code>[options.document]</code>
<span class="method-type">&laquo;Boolean&raquo;</span> If <code>name</code> is a hook for both document and query middleware, set to <code>true</code> to run on document middleware.</p>
</li></ul><ul style="margin-top: 0.5em"><li><code>[options.query]</code>
<span class="method-type">&laquo;Boolean&raquo;</span> If <code>name</code> is a hook for both document and query middleware, set to <code>true</code> to run on query middleware.</p>
</li></ul><li class="param"><code>fn</code>
<span class="method-type">&laquo;Function&raquo;</span> callback</p>
</li></ul><h5>See:</h5><ul><li><span class="method-type"><a href="/docs/middleware.html">middleware</a></span></li><li><span class="method-type"><a href="https://npmjs.org/package/kareem">kareem</a></span></li></ul><div><p>Defines a post hook for the document</p>
<pre><code>const schema = new Schema(..);
schema.post(&#39;save&#39;, function (doc) {
  console.log(&#39;this fired after a document was saved&#39;);
});

schema.post(&#39;find&#39;, function(docs) {
  console.log(&#39;this fired after you ran a find query&#39;);
});

schema.post(/Many$/, function(res) {
  console.log(&#39;this fired after you ran `updateMany()` or `deleteMany()`&#39;);
});

const Model = mongoose.model(&#39;Model&#39;, schema);

const m = new Model(..);
m.save(function(err) {
  console.log(&#39;this fires after the `post` hook&#39;);
});

m.find(function(err, docs) {
  console.log(&#39;this fires after the post find hook&#39;);
});
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.pre()"><a href="#Schema.prototype.pre()"><code>Schema.prototype.pre()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>methodName</code>
<span class="method-type">&laquo;String|RegExp|Array[String]&raquo;</span> The method name or regular expression to match method name</p>
</li><li class="param"><code>[options]</code>
<span class="method-type">&laquo;Object&raquo;</span> </li><ul style="margin-top: 0.5em"><li><code>[options.document]</code>
<span class="method-type">&laquo;Boolean&raquo;</span> If <code>name</code> is a hook for both document and query middleware, set to <code>true</code> to run on document middleware. For example, set <code>options.document</code> to <code>true</code> to apply this hook to <code>Document#deleteOne()</code> rather than <code>Query#deleteOne()</code>.</p>
</li></ul><ul style="margin-top: 0.5em"><li><code>[options.query]</code>
<span class="method-type">&laquo;Boolean&raquo;</span> If <code>name</code> is a hook for both document and query middleware, set to <code>true</code> to run on query middleware.</p>
</li></ul><li class="param"><code>callback</code>
<span class="method-type">&laquo;Function&raquo;</span> </li></ul><div><p>Defines a pre hook for the model.</p>
<h4 id="example">Example:</h4>
<pre><code>const toySchema = new Schema({ name: String, created: Date });

toySchema.pre(&#39;save&#39;, function(next) {
  if (!this.created) this.created = new Date;
  next();
});

toySchema.pre(&#39;validate&#39;, function(next) {
  if (this.name !== &#39;Woody&#39;) this.name = &#39;Woody&#39;;
  next();
});

// Equivalent to calling `pre()` on `find`, `findOne`, `findOneAndUpdate`.
toySchema.pre(/^find/, function(next) {
  console.log(this.getFilter());
});

// Equivalent to calling `pre()` on `updateOne`, `findOneAndUpdate`.
toySchema.pre([&#39;updateOne&#39;, &#39;findOneAndUpdate&#39;], function(next) {
  console.log(this.getFilter());
});

toySchema.pre(&#39;deleteOne&#39;, function() {
  // Runs when you call `Toy.deleteOne()`
});

toySchema.pre(&#39;deleteOne&#39;, { document: true }, function() {
  // Runs when you call `doc.deleteOne()`
});
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.queue()"><a href="#Schema.prototype.queue()"><code>Schema.prototype.queue()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>name</code>
<span class="method-type">&laquo;String&raquo;</span> name of the document method to call later</p>
</li><li class="param"><code>args</code>
<span class="method-type">&laquo;Array&raquo;</span> arguments to pass to the method</p>
</li></ul><div><p>Adds a method call to the queue.</p>
<h4 id="example">Example:</h4>
<pre><code>schema.methods.print = function() { console.log(this); };
schema.queue(&#39;print&#39;, []); // Print the doc every one is instantiated

const Model = mongoose.model(&#39;Test&#39;, schema);
new Model({ name: &#39;test&#39; }); // Prints &#39;{&quot;_id&quot;: ..., &quot;name&quot;: &quot;test&quot; }&#39;
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.remove()"><a href="#Schema.prototype.remove()"><code>Schema.prototype.remove()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>path</code>
<span class="method-type">&laquo;String|Array&raquo;</span> The Path(s) to remove</p>
</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> the Schema instance</li></ul><div><p>Removes the given <code>path</code> (or [<code>paths</code>]).</p>
<h4 id="example">Example:</h4>
<pre><code>const schema = new Schema({ name: String, age: Number });
schema.remove(&#39;name&#39;);
schema.path(&#39;name&#39;); // Undefined
schema.path(&#39;age&#39;); // SchemaNumber { ... }
</code></pre>
<p>Or as a Array:</p>
<pre><code>schema.remove([&#39;name&#39;, &#39;age&#39;]);
schema.path(&#39;name&#39;); // Undefined
schema.path(&#39;age&#39;); // Undefined
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.removeIndex()"><a href="#Schema.prototype.removeIndex()"><code>Schema.prototype.removeIndex()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>index</code>
<span class="method-type">&laquo;Object|string&raquo;</span> name or index specification</p>
</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> the Schema instance</li></ul><div><p>Remove an index by name or index specification.</p>
<p>removeIndex only removes indexes from your schema object. Does <strong>not</strong> affect the indexes
in MongoDB.</p>
<h4 id="example">Example:</h4>
<pre><code>const ToySchema = new Schema({ name: String, color: String, price: Number });

// Add a new index on { name, color }
ToySchema.index({ name: 1, color: 1 });

// Remove index on { name, color }
// Keep in mind that order matters! `removeIndex({ color: 1, name: 1 })` won&#39;t remove the index
ToySchema.removeIndex({ name: 1, color: 1 });

// Add an index with a custom name
ToySchema.index({ color: 1 }, { name: &#39;my custom index name&#39; });
// Remove index by name
ToySchema.removeIndex(&#39;my custom index name&#39;);
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.removeVirtual()"><a href="#Schema.prototype.removeVirtual()"><code>Schema.prototype.removeVirtual()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>path</code>
<span class="method-type">&laquo;String|Array&raquo;</span> The virutal path(s) to remove.</p>
</li></ul><div><p>Removes the given virtual or virtuals from the schema.</p>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.requiredPaths()"><a href="#Schema.prototype.requiredPaths()"><code>Schema.prototype.requiredPaths()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>invalidate</code>
<span class="method-type">&laquo;Boolean&raquo;</span> Refresh the cache</p>
</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Array&raquo;</span> </li></ul><div><p>Returns an Array of path strings that are required by this schema.</p>
<h4 id="example">Example:</h4>
<pre><code>const s = new Schema({
  name: { type: String, required: true },
  age: { type: String, required: true },
  notes: String
});
s.requiredPaths(); // [ &#39;age&#39;, &#39;name&#39; ]
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.searchIndex()"><a href="#Schema.prototype.searchIndex()"><code>Schema.prototype.searchIndex()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>description</code>
<span class="method-type">&laquo;Object&raquo;</span> index options, including <code>name</code> and <code>definition</code></p>
</li><li class="param"><code>description.name</code>
<span class="method-type">&laquo;String&raquo;</span> </li><li class="param"><code>description.definition</code>
<span class="method-type">&laquo;Object&raquo;</span> </li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> the Schema instance</li></ul><div><p>Add an <a href="https://www.mongodb.com/docs/atlas/atlas-search/create-index/">Atlas search index</a> that Mongoose will create using <code>Model.createSearchIndex()</code>.
This function only works when connected to MongoDB Atlas.</p>
<h4 id="example">Example:</h4>
<pre><code>const ToySchema = new Schema({ name: String, color: String, price: Number });
ToySchema.searchIndex({ name: &#39;test&#39;, definition: { mappings: { dynamic: true } } });
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.set()"><a href="#Schema.prototype.set()"><code>Schema.prototype.set()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>key</code>
<span class="method-type">&laquo;String&raquo;</span> The name of the option to set the value to</p>
</li><li class="param"><code>[value]</code>
<span class="method-type">&laquo;Object&raquo;</span> The value to set the option to, if not passed, the option will be reset to default</p>
</li><li class="param"><code>[tags]</code>
<span class="method-type">&laquo;Array&lt;string&gt;&raquo;</span> tags to add to read preference if key === &#39;read&#39;</p>
</li></ul><h5>See:</h5><ul><li><span class="method-type"><a href="#Schema()">Schema</a></span></li></ul><div><p>Sets a schema option.</p>
<h4 id="example">Example:</h4>
<pre><code>schema.set(&#39;strict&#39;); // &#39;true&#39; by default
schema.set(&#39;strict&#39;, false); // Sets &#39;strict&#39; to false
schema.set(&#39;strict&#39;); // &#39;false&#39;
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.static()"><a href="#Schema.prototype.static()"><code>Schema.prototype.static()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>name</code>
<span class="method-type">&laquo;String|Object&raquo;</span> The Method Name for a single function, or a Object of &quot;string-function&quot; pairs.</p>
</li><li class="param"><code>[fn]</code>
<span class="method-type">&laquo;Function&raquo;</span> The Function in a single-function definition.</p>
</li></ul><h5>See:</h5><ul><li><span class="method-type"><a href="/docs/guide.html#statics">Statics</a></span></li></ul><div><p>Adds static &quot;class&quot; methods to Models compiled from this schema.</p>
<h4 id="example">Example:</h4>
<pre><code>const schema = new Schema(..);
// Equivalent to `schema.statics.findByName = function(name) {}`;
schema.static(&#39;findByName&#39;, function(name) {
  return this.find({ name: name });
});

const Drink = mongoose.model(&#39;Drink&#39;, schema);
await Drink.findByName(&#39;LaCroix&#39;);
</code></pre>
<p>If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as methods.</p>
<pre><code>schema.static({
    findByName: function () {..}
  , findByCost: function () {..}
});

const Drink = mongoose.model(&#39;Drink&#39;, schema);
await Drink.findByName(&#39;LaCroix&#39;);
await Drink.findByCost(3);
</code></pre>
<p>If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as statics.</p>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.virtual()"><a href="#Schema.prototype.virtual()"><code>Schema.prototype.virtual()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>name</code>
<span class="method-type">&laquo;String&raquo;</span> The name of the Virtual</p>
</li><li class="param"><code>[options]</code>
<span class="method-type">&laquo;Object&raquo;</span> </li><ul style="margin-top: 0.5em"><li><code>[options.ref]</code>
<span class="method-type">&laquo;String|Model&raquo;</span> model name or model instance. Marks this as a <a href="/docs/populate.html#populate-virtuals">populate virtual</a>.</p>
</li></ul><ul style="margin-top: 0.5em"><li><code>[options.localField]</code>
<span class="method-type">&laquo;String|Function&raquo;</span> Required for populate virtuals. See <a href="/docs/populate.html#populate-virtuals">populate virtual docs</a> for more information.</p>
</li></ul><ul style="margin-top: 0.5em"><li><code>[options.foreignField]</code>
<span class="method-type">&laquo;String|Function&raquo;</span> Required for populate virtuals. See <a href="/docs/populate.html#populate-virtuals">populate virtual docs</a> for more information.</p>
</li></ul><ul style="margin-top: 0.5em"><li><code>[options.justOne=false]</code>
<span class="method-type">&laquo;Boolean|Function&raquo;</span> Only works with populate virtuals. If <a href="https://masteringjs.io/tutorials/fundamentals/truthy">truthy</a>, will be a single doc or <code>null</code>. Otherwise, the populate virtual will be an array.</p>
</li></ul><ul style="margin-top: 0.5em"><li><code>[options.count=false]</code>
<span class="method-type">&laquo;Boolean&raquo;</span> Only works with populate virtuals. If <a href="https://masteringjs.io/tutorials/fundamentals/truthy">truthy</a>, this populate virtual will contain the number of documents rather than the documents themselves when you <code>populate()</code>.</p>
</li></ul><ul style="margin-top: 0.5em"><li><code>[options.get=null]</code>
<span class="method-type">&laquo;Function|null&raquo;</span> Adds a <a href="/docs/tutorials/getters-setters.html">getter</a> to this virtual to transform the populated doc.</p>
</li></ul><ul style="margin-top: 0.5em"><li><code>[options.match=null]</code>
<span class="method-type">&laquo;Object|Function&raquo;</span> Apply a default <a href="/docs/populate.html#match"><code>match</code> option to populate</a>, adding an additional filter to the populate query.</p>
</li></ul></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;VirtualType&raquo;</span> </li></ul><div><p>Creates a virtual type with the given name.</p>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.virtualpath()"><a href="#Schema.prototype.virtualpath()"><code>Schema.prototype.virtualpath()</code></a></h3><h5>Parameters:</h5><ul class="params"><li class="param"><code>name</code>
<span class="method-type">&laquo;String&raquo;</span> The name of the Virtual to get</p>
</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;VirtualType,null&raquo;</span> </li></ul><div><p>Returns the virtual type with the given <code>name</code>.</p>
  </div><hr class="separate-api-elements"><h3 id="Schema.prototype.virtuals"><a href="#Schema.prototype.virtuals"><code>Schema.prototype.virtuals</code></a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>Object containing all virtuals defined on this schema.
The objects&#39; keys are the virtual paths and values are instances of <code>VirtualType</code>.</p>
<p>This property is typically only useful for plugin authors and advanced users.
You do not need to interact with this property at all to use mongoose.</p>
<h4 id="example">Example:</h4>
<pre><code>const schema = new Schema({});
schema.virtual(&#39;answer&#39;).get(() =&gt; 42);

console.log(schema.virtuals); // { answer: VirtualType { path: &#39;answer&#39;, ... } }
console.log(schema.virtuals[&#39;answer&#39;].getters[0].call()); // 42
</code></pre>
  </div><hr class="separate-api-elements"><h3 id="Schema.reserved"><a href="#Schema.reserved"><code>Schema.reserved</code></a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>Reserved document keys.</p>
<p>Keys in this object are names that are warned in schema declarations
because they have the potential to break Mongoose/ Mongoose plugins functionality. If you create a schema
using <code>new Schema()</code> with one of these property names, Mongoose will log a warning.</p>
<ul>
<li>_posts</li>
<li>_pres</li>
<li>collection</li>
<li>emit</li>
<li>errors</li>
<li>get</li>
<li>init</li>
<li>isModified</li>
<li>isNew</li>
<li>listeners</li>
<li>modelName</li>
<li>on</li>
<li>once</li>
<li>populated</li>
<li>prototype</li>
<li>remove</li>
<li>removeListener</li>
<li>save</li>
<li>schema</li>
<li>toObject</li>
<li>validate</li>
</ul>
<p><em>NOTE:</em> Use of these terms as method names is permitted, but play at your own risk, as they may be existing mongoose document methods you are stomping on.</p>
<pre><code> const schema = new Schema(..);
 schema.methods.init = function () {} // potentially breaking
</code></pre>
  </div></div></div></div><div id="jobs"><div class="job-listing"><a href="/docs/jobs.html#61f0b0402d893554bc3a247f"><div class="company-logo"><img src="https://assets.localizecdn.com/uploads/1689251999716.png"></div><div class="description"><div class="company">Localize</div><div class="title">Full Stack Engineer</div><div class="location">Anywhere</div></div></a></div><div class="button jobs-view-more"><a href="/docs/jobs.html">View more jobs!</a></div></div><script type="text/javascript" src="/docs/js/navbar-search.js"></script><script type="text/javascript" src="/docs/js/mobile-navbar-toggle.js"></script></div></body></html>