<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Mongoose v5.6.0: </title><link rel="apple-touch-icon" sizes="57x57" href="images/favicon/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="images/favicon/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="images/favicon/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="images/favicon/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="images/favicon/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="images/favicon/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="images/favicon/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="images/favicon/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="images/favicon/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="images/favicon/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png"><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans"><link rel="stylesheet" href="/docs/css/github.css"><link rel="stylesheet" href="/docs/css/mongoose5.css"><link rel="apple-touch-icon" sizes="57x57" href="images/favicon/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="images/favicon/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="images/favicon/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="images/favicon/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="images/favicon/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="images/favicon/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="images/favicon/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="images/favicon/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="images/favicon/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="images/favicon/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png"><link rel="manifest" href="images/favicon/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="images/favicon/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/docs/css/api.css"><link rel="stylesheet" href="/docs/css/inlinecpc.css"><script type="text/javascript" src="/docs/js/native.js"></script><style>.api-nav .nav-item-sub {
  display: block !important;
}

.api-content {
  margin-top: 3em;
}
</style></head><body><div id="layout"><div id="mobile-menu"><a class="menu-link" id="menuLink" href="#menu"><span></span></a><div id="mobile-logo-container"><a href="/"><img id="logo" src="/docs/images/mongoose5_62x30_transparent.png"><span class="logo-text">mongoose</span></a></div></div><div id="menu"><div class="pure-menu"><div class="pure-menu-heading" id="logo-container"><a href="/"><img id="logo" src="/docs/images/mongoose5_62x30_transparent.png"><span class="logo-text">mongoose</span></a></div><ul class="pure-menu-list" id="navbar"><li class="pure-menu-horizontal pure-menu-item pure-menu-has-children pure-menu-allow-hover version"><a class="pure-menu-link" href="#">Version 5.6.0</a><ul class="pure-menu-children"><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/4.x">Version 4.13.18</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/3.8.x">Version 3.8.40</a></li></ul></li><li class="pure-menu-item search"><input id="search-input-nav" type="text" placeholder="Search"><button id="search-button-nav"><img src="/docs/images/search.svg"></button></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/index.html">Quick Start</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/guides.html">Guides</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/guide.html">Schemas</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/schematypes.html">SchemaTypes</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/connections.html">Connections</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/models.html">Models</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/documents.html">Documents</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/subdocs.html">Subdocuments</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/queries.html">Queries</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/validation.html">Validation</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/middleware.html">Middleware</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/populate.html">Populate</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/discriminators.html">Discriminators</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/plugins.html">Plugins</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/api.html">API</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/mongoose.html">Mongoose</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/schema.html">Schema</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/connection.html">Connection</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/document.html">Document</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/model.html">Model</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/query.html">Query</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/aggregate.html">Aggregate</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/schematype.html">SchemaType</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/virtualtype.html">VirtualType</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/compatibility.html">Version Compatibility</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/faq.html">FAQ</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/further_reading.html">Further Reading</a></li></ul><div class="cpc-ad"><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=mongoosejscom" id="_carbonads_js"></script></div></div></div><div class="container"><div id="content"><h1>Schema</h1><div><div class="native-inline">
  <a href="#native_link#"><span class="sponsor">Sponsor</span> #native_company# â€” #native_desc#</a>
</div>
</div><div class="api-nav"><div class="api-nav-content"><div class="nav-item" id="nav-Mongoose"><div class="nav-item-title"><a href="mongoose.html">Mongoose</a></div></div><div class="nav-item" id="nav-Schema"><div class="nav-item-title" style="font-weight: bold"><a href="schema.html">Schema</a></div><ul class="nav-item-sub"><li><a href="#schema_Schema">Schema()</a></li><li><a href="#schema_Schema.Types">Schema.Types</a></li><li><a href="#schema_Schema-indexTypes">Schema.indexTypes</a></li><li><a href="#schema_Schema-add">Schema.prototype.add()</a></li><li><a href="#schema_Schema-childSchemas">Schema.prototype.childSchemas</a></li><li><a href="#schema_Schema-clone">Schema.prototype.clone()</a></li><li><a href="#schema_Schema-eachPath">Schema.prototype.eachPath()</a></li><li><a href="#schema_Schema-get">Schema.prototype.get()</a></li><li><a href="#schema_Schema-index">Schema.prototype.index()</a></li><li><a href="#schema_Schema-indexes">Schema.prototype.indexes()</a></li><li><a href="#schema_Schema-loadClass">Schema.prototype.loadClass()</a></li><li><a href="#schema_Schema-method">Schema.prototype.method()</a></li><li><a href="#schema_Schema-obj">Schema.prototype.obj</a></li><li><a href="#schema_Schema-path">Schema.prototype.path()</a></li><li><a href="#schema_Schema-pathType">Schema.prototype.pathType()</a></li><li><a href="#schema_Schema-plugin">Schema.prototype.plugin()</a></li><li><a href="#schema_Schema-post">Schema.prototype.post()</a></li><li><a href="#schema_Schema-pre">Schema.prototype.pre()</a></li><li><a href="#schema_Schema-queue">Schema.prototype.queue()</a></li><li><a href="#schema_Schema-remove">Schema.prototype.remove()</a></li><li><a href="#schema_Schema-requiredPaths">Schema.prototype.requiredPaths()</a></li><li><a href="#schema_Schema-set">Schema.prototype.set()</a></li><li><a href="#schema_Schema-static">Schema.prototype.static()</a></li><li><a href="#schema_Schema-virtual">Schema.prototype.virtual()</a></li><li><a href="#schema_Schema-virtualpath">Schema.prototype.virtualpath()</a></li><li><a href="#schema_Schema.reserved">Schema.reserved</a></li></ul></div><div class="nav-item" id="nav-Connection"><div class="nav-item-title"><a href="connection.html">Connection</a></div></div><div class="nav-item" id="nav-Document"><div class="nav-item-title"><a href="document.html">Document</a></div></div><div class="nav-item" id="nav-Model"><div class="nav-item-title"><a href="model.html">Model</a></div></div><div class="nav-item" id="nav-Query"><div class="nav-item-title"><a href="query.html">Query</a></div></div><div class="nav-item" id="nav-QueryCursor"><div class="nav-item-title"><a href="querycursor.html">QueryCursor</a></div></div><div class="nav-item" id="nav-Aggregate"><div class="nav-item-title"><a href="aggregate.html">Aggregate</a></div></div><div class="nav-item" id="nav-AggregationCursor"><div class="nav-item-title"><a href="aggregationcursor.html">AggregationCursor</a></div></div><div class="nav-item" id="nav-Schematype"><div class="nav-item-title"><a href="schematype.html">Schematype</a></div></div><div class="nav-item" id="nav-Virtualtype"><div class="nav-item-title"><a href="virtualtype.html">Virtualtype</a></div></div><div class="nav-item" id="nav-Error"><div class="nav-item-title"><a href="error.html">Error</a></div></div><div class="nav-item" id="nav-Array"><div class="nav-item-title"><a href="array.html">Array</a></div></div></div></div><div class="api-content"><ul><li><a href="#schema_Schema">Schema()</a></li><li><a href="#schema_Schema.Types">Schema.Types</a></li><li><a href="#schema_Schema-indexTypes">Schema.indexTypes</a></li><li><a href="#schema_Schema-add">Schema.prototype.add()</a></li><li><a href="#schema_Schema-childSchemas">Schema.prototype.childSchemas</a></li><li><a href="#schema_Schema-clone">Schema.prototype.clone()</a></li><li><a href="#schema_Schema-eachPath">Schema.prototype.eachPath()</a></li><li><a href="#schema_Schema-get">Schema.prototype.get()</a></li><li><a href="#schema_Schema-index">Schema.prototype.index()</a></li><li><a href="#schema_Schema-indexes">Schema.prototype.indexes()</a></li><li><a href="#schema_Schema-loadClass">Schema.prototype.loadClass()</a></li><li><a href="#schema_Schema-method">Schema.prototype.method()</a></li><li><a href="#schema_Schema-obj">Schema.prototype.obj</a></li><li><a href="#schema_Schema-path">Schema.prototype.path()</a></li><li><a href="#schema_Schema-pathType">Schema.prototype.pathType()</a></li><li><a href="#schema_Schema-plugin">Schema.prototype.plugin()</a></li><li><a href="#schema_Schema-post">Schema.prototype.post()</a></li><li><a href="#schema_Schema-pre">Schema.prototype.pre()</a></li><li><a href="#schema_Schema-queue">Schema.prototype.queue()</a></li><li><a href="#schema_Schema-remove">Schema.prototype.remove()</a></li><li><a href="#schema_Schema-requiredPaths">Schema.prototype.requiredPaths()</a></li><li><a href="#schema_Schema-set">Schema.prototype.set()</a></li><li><a href="#schema_Schema-static">Schema.prototype.static()</a></li><li><a href="#schema_Schema-virtual">Schema.prototype.virtual()</a></li><li><a href="#schema_Schema-virtualpath">Schema.prototype.virtualpath()</a></li><li><a href="#schema_Schema.reserved">Schema.reserved</a></li></ul><hr class="separate-api-elements"><h3 id="schema_Schema"><a href="#schema_Schema">Schema()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">[definition]
<span class="method-type">&laquo;Object|Schema|Array&raquo;</span> Can be one of: object describing schema paths, or schema to copy, or array of objects and schemas</li><li class="param">[options]
<span class="method-type">&laquo;Object&raquo;</span> </li></ul><div><p>Schema constructor.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">var</span> child = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span> });
<span class="hljs-keyword">var</span> schema = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span>, age: <span class="hljs-built_in">Number</span>, children: [child] });
<span class="hljs-keyword">var</span> Tree = mongoose.model(<span class="hljs-string">'Tree'</span>, schema);

<span class="hljs-comment">// setting schema options</span>
<span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span> }, { _id: <span class="hljs-literal">false</span>, autoIndex: <span class="hljs-literal">false</span> })</code></pre>

<h4>Options:</h4>

<ul>
<li><a href="/docs/guide.html#autoIndex">autoIndex</a>: bool - defaults to null (which means use the connection's autoIndex option)</li>
<li><a href="/docs/guide.html#autoCreate">autoCreate</a>: bool - defaults to null (which means use the connection's autoCreate option)</li>
<li><a href="/docs/guide.html#bufferCommands">bufferCommands</a>: bool - defaults to true</li>
<li><a href="/docs/guide.html#capped">capped</a>: bool - defaults to false</li>
<li><a href="/docs/guide.html#collection">collection</a>: string - no default</li>
<li><a href="/docs/guide.html#id">id</a>: bool - defaults to true</li>
<li><a href="/docs/guide.html#_id">_id</a>: bool - defaults to true</li>
<li><code>minimize</code>: bool - controls <a href="#document_Document-toObject">document#toObject</a> behavior when called manually - defaults to true</li>
<li><a href="/docs/guide.html#read">read</a>: string</li>
<li><a href="/docs/guide.html#writeConcern">writeConcern</a>: object - defaults to null, use to override <a href="https://docs.mongodb.com/manual/reference/write-concern/">the MongoDB server's default write concern settings</a></li>
<li><a href="/docs/guide.html#shardKey">shardKey</a>: object - defaults to <code>null</code></li>
<li><a href="/docs/guide.html#strict">strict</a>: bool - defaults to true</li>
<li><a href="/docs/guide.html#strictQuery">strictQuery</a>: bool - defaults to false</li>
<li><a href="/docs/guide.html#toJSON">toJSON</a> - object - no default</li>
<li><a href="/docs/guide.html#toObject">toObject</a> - object - no default</li>
<li><a href="/docs/guide.html#typeKey">typeKey</a> - string - defaults to 'type'</li>
<li><a href="/docs/guide.html#useNestedStrict">useNestedStrict</a> - boolean - defaults to false</li>
<li><a href="/docs/guide.html#validateBeforeSave">validateBeforeSave</a> - bool - defaults to <code>true</code></li>
<li><a href="/docs/guide.html#versionKey">versionKey</a>: string - defaults to "__v"</li>
<li><a href="/docs/guide.html#collation">collation</a>: object - defaults to null (which means use no collation)</li>
<li><a href="/docs/guide.html#selectPopulatedPaths">selectPopulatedPaths</a>: boolean - defaults to <code>true</code></li>
<li><a href="/docs/guide.html#skipVersioning">skipVersioning</a>: object - paths to exclude from versioning</li>
<li><a href="/docs/guide.html#timestamps">timestamps</a>: object or boolean - defaults to <code>false</code>. If true, Mongoose adds <code>createdAt</code> and <code>updatedAt</code> properties to your schema and manages those properties for you.</li>
<li><a href="/docs/guide.html#storeSubdocValidationError">storeSubdocValidationError</a>: boolean - Defaults to true. If false, Mongoose will wrap validation errors in single nested document subpaths into a single validation error on the single nested subdoc's path.</li>
</ul>

<h4>Note:</h4>

<p><em>When nesting schemas, (<code>children</code> in the example above), always declare the child schema first before passing it into its parent.</em></p>  </div><hr class="separate-api-elements"><h3 id="schema_Schema.Types"><a href="#schema_Schema.Types">Schema.Types</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The various built-in Mongoose Schema Types.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">var</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongoose'</span>);
<span class="hljs-keyword">var</span> ObjectId = mongoose.Schema.Types.ObjectId;</code></pre>

<h4>Types:</h4>

<ul>
<li><a href="#schema-string-js">String</a></li>
<li><a href="#schema-number-js">Number</a></li>
<li><a href="#schema-boolean-js">Boolean</a> | Bool</li>
<li><a href="#schema-array-js">Array</a></li>
<li><a href="#schema-buffer-js">Buffer</a></li>
<li><a href="#schema-date-js">Date</a></li>
<li><a href="#schema-objectid-js">ObjectId</a> | Oid</li>
<li><a href="#schema-mixed-js">Mixed</a></li>
</ul>

<p>Using this exposed access to the <code>Mixed</code> SchemaType, we can use them in our schema.</p>

<pre><code><span class="hljs-keyword">var</span> Mixed = mongoose.Schema.Types.Mixed;
<span class="hljs-keyword">new</span> mongoose.Schema({ _user: Mixed })</code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-indexTypes"><a href="#schema_Schema-indexTypes">Schema.indexTypes</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The allowed index types</p>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-add"><a href="#schema_Schema-add">Schema.prototype.add()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">obj
<span class="method-type">&laquo;Object|Schema&raquo;</span> plain object with paths to add, or another schema</li><li class="param">[prefix]
<span class="method-type">&laquo;String&raquo;</span> path to prefix the newly added paths with</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> the Schema instance</li></ul><div><p>Adds key path / schema type pairs to this schema.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">const</span> ToySchema = <span class="hljs-keyword">new</span> Schema();
ToySchema.add({ name: <span class="hljs-string">'string'</span>, color: <span class="hljs-string">'string'</span>, price: <span class="hljs-string">'number'</span> });

<span class="hljs-keyword">const</span> TurboManSchema = <span class="hljs-keyword">new</span> Schema();
<span class="hljs-comment">// You can also `add()` another schema and copy over all paths, virtuals,</span>
<span class="hljs-comment">// getters, setters, indexes, methods, and statics.</span>
TurboManSchema.add(ToySchema).add({ year: <span class="hljs-built_in">Number</span> });</code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-childSchemas"><a href="#schema_Schema-childSchemas">Schema.prototype.childSchemas</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>Array of child schemas (from document arrays and single nested subdocs) and their corresponding compiled models. Each element of the array is an object with 2 properties: <code>schema</code> and <code>model</code>.</p>

<p>This property is typically only useful for plugin authors and advanced users. You do not need to interact with this property at all to use mongoose.</p>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-clone"><a href="#schema_Schema-clone">Schema.prototype.clone()</a></h3><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> the cloned schema</li></ul><div><p>Returns a deep copy of the schema</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span> });
<span class="hljs-keyword">const</span> clone = schema.clone();
clone === schema; <span class="hljs-comment">// false</span>
clone.path(<span class="hljs-string">'name'</span>); <span class="hljs-comment">// SchemaString { ... }</span></code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-eachPath"><a href="#schema_Schema-eachPath">Schema.prototype.eachPath()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">fn
<span class="method-type">&laquo;Function&raquo;</span> callback function</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> this</li></ul><div><p>Iterates the schemas paths similar to Array#forEach.</p>

<p>The callback is passed the pathname and the schemaType instance.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">const</span> userSchema = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span>, registeredAt: <span class="hljs-built_in">Date</span> });
userSchema.eachPath((pathname, schematype) =&gt; {
  <span class="hljs-comment">// Prints twice:</span>
  <span class="hljs-comment">// name SchemaString { ... }</span>
  <span class="hljs-comment">// registeredAt SchemaDate { ... }</span>
  <span class="hljs-built_in">console</span>.log(pathname, schematype);
});</code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-get"><a href="#schema_Schema-get">Schema.prototype.get()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">key
<span class="method-type">&laquo;String&raquo;</span> option name</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Any&raquo;</span> the option&#39;s value</li></ul><div><p>Gets a schema option.</p>

<h4>Example:</h4>

<pre><code>schema.get(<span class="hljs-string">'strict'</span>); <span class="hljs-comment">// true</span>
schema.set(<span class="hljs-string">'strict'</span>, <span class="hljs-literal">false</span>);
schema.get(<span class="hljs-string">'strict'</span>); <span class="hljs-comment">// false</span></code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-index"><a href="#schema_Schema-index">Schema.prototype.index()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">fields
<span class="method-type">&laquo;Object&raquo;</span> </li><li class="param">[options]
<span class="method-type">&laquo;Object&raquo;</span> Options to pass to <a href="http://mongodb.github.io/node-mongodb-native/2.0/api/Collection.html#createIndex">MongoDB driver&#39;s <code>createIndex()</code> function</a></li><ul style="margin-top: 0.5em"><li>[options.expires=null]
<span class="method-type">&laquo;String&raquo;</span> Mongoose-specific syntactic sugar, uses <a href="https://www.npmjs.com/package/ms">ms</a> to convert <code>expires</code> option into seconds for the <code>expireAfterSeconds</code> in the above link.</li></ul></ul><div><p>Defines an index (most likely compound) for this schema.</p>

<h4>Example</h4>

<pre><code>schema.index({ first: <span class="hljs-number">1</span>, last: <span class="hljs-number">-1</span> })</code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-indexes"><a href="#schema_Schema-indexes">Schema.prototype.indexes()</a></h3><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Array&raquo;</span> list of indexes defined in the schema</li></ul><div><p>Returns a list of indexes that this schema declares, via <code>schema.index()</code> or by <code>index: true</code> in a path's options.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">const</span> userSchema = <span class="hljs-keyword">new</span> Schema({
  email: { type: <span class="hljs-built_in">String</span>, required: <span class="hljs-literal">true</span>, unique: <span class="hljs-literal">true</span> },
  registeredAt: { type: <span class="hljs-built_in">Date</span>, index: <span class="hljs-literal">true</span> }
});

<span class="hljs-comment">// [ [ { email: 1 }, { unique: true, background: true } ],</span>
<span class="hljs-comment">//   [ { registeredAt: 1 }, { background: true } ] ]</span>
userSchema.indexes();</code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-loadClass"><a href="#schema_Schema-loadClass">Schema.prototype.loadClass()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">model
<span class="method-type">&laquo;Function&raquo;</span> </li><li class="param">[virtualsOnly]
<span class="method-type">&laquo;Boolean&raquo;</span> if truthy, only pulls virtuals from the class, not methods or statics</li></ul><div><p>Loads an ES6 class into a schema. Maps <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set">setters</a> + <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get">getters</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/static">static methods</a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#Class_body_and_method_definitions">instance methods</a> to schema <a href="http://mongoosejs.com/docs/guide.html#virtuals">virtuals</a>, <a href="http://mongoosejs.com/docs/guide.html#statics">statics</a>, and <a href="http://mongoosejs.com/docs/guide.html#methods">methods</a>.</p>

<h4>Example:</h4>

<div class="highlight"><pre lang="javascript">const md5 = require('md5');
const userSchema = new Schema({ email: String });
class UserClass {
  // `gravatarImage` becomes a virtual
  get gravatarImage() {
    const hash = md5(this.email.toLowerCase());
    return `<a href='https://www.gravatar.com/avatar/${hash}`'>https://www.gravatar.com/avatar/${hash}`</a>;
  }

  // `getProfileUrl()` becomes a document method
  getProfileUrl() {
    return `<a href='https://mysite.com/${this.email}`'>https://mysite.com/${this.email}`</a>;
  }

  // `findByEmail()` becomes a static
  static findByEmail(email) {
    return this.findOne({ email });
  }
}

// `schema` will now have a `gravatarImage` virtual, a `getProfileUrl()` method,
// and a `findByEmail()` static
userSchema.loadClass(UserClass);
</pre></div>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-method"><a href="#schema_Schema-method">Schema.prototype.method()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">method
<span class="method-type">&laquo;String|Object&raquo;</span> name</li><li class="param">[fn]
<span class="method-type">&laquo;Function&raquo;</span> </li></ul><div><p>Adds an instance method to documents constructed from Models compiled from this schema.</p>

<h4>Example</h4>

<pre><code><span class="hljs-keyword">var</span> schema = kittySchema = <span class="hljs-keyword">new</span> Schema(..);

schema.method(<span class="hljs-string">'meow'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'meeeeeoooooooooooow'</span>);
})

<span class="hljs-keyword">var</span> Kitty = mongoose.model(<span class="hljs-string">'Kitty'</span>, schema);

<span class="hljs-keyword">var</span> fizz = <span class="hljs-keyword">new</span> Kitty;
fizz.meow(); <span class="hljs-comment">// meeeeeooooooooooooow</span></code></pre>

<p>If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as methods.</p>

<pre><code>schema.method({
    purr: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{}
  , scratch: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{}
});

<span class="hljs-comment">// later</span>
fizz.purr();
fizz.scratch();</code></pre>

<p>NOTE: <code>Schema.method()</code> adds instance methods to the <code>Schema.methods</code> object. You can also add instance methods directly to the <code>Schema.methods</code> object as seen in the <a href="./guide.html#methods">guide</a></p>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-obj"><a href="#schema_Schema-obj">Schema.prototype.obj</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>The original object passed to the schema constructor</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">var</span> schema = <span class="hljs-keyword">new</span> Schema({ a: <span class="hljs-built_in">String</span> }).add({ b: <span class="hljs-built_in">String</span> });
schema.obj; <span class="hljs-comment">// { a: String }</span></code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-path"><a href="#schema_Schema-path">Schema.prototype.path()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">path
<span class="method-type">&laquo;String&raquo;</span> </li><li class="param">constructor
<span class="method-type">&laquo;Object&raquo;</span> </li></ul><div><p>Gets/sets schema paths.</p>

<p>Sets a path (if arity 2) Gets a path (if arity 1)</p>

<h4>Example</h4>

<pre><code>schema.path(<span class="hljs-string">'name'</span>) <span class="hljs-comment">// returns a SchemaType</span>
schema.path(<span class="hljs-string">'name'</span>, <span class="hljs-built_in">Number</span>) <span class="hljs-comment">// changes the schemaType of `name` to Number</span></code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-pathType"><a href="#schema_Schema-pathType">Schema.prototype.pathType()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">path
<span class="method-type">&laquo;String&raquo;</span> </li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;String&raquo;</span> </li></ul><div><p>Returns the pathType of <code>path</code> for this schema.</p>

<p>Given a path, returns whether it is a real, virtual, nested, or ad-hoc/undefined path.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span>, nested: { foo: <span class="hljs-built_in">String</span> } });
s.virtual(<span class="hljs-string">'foo'</span>).get(() =&gt; <span class="hljs-number">42</span>);
s.pathType(<span class="hljs-string">'name'</span>); <span class="hljs-comment">// "real"</span>
s.pathType(<span class="hljs-string">'nested'</span>); <span class="hljs-comment">// "nested"</span>
s.pathType(<span class="hljs-string">'foo'</span>); <span class="hljs-comment">// "virtual"</span>
s.pathType(<span class="hljs-string">'fail'</span>); <span class="hljs-comment">// "adhocOrUndefined"</span></code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-plugin"><a href="#schema_Schema-plugin">Schema.prototype.plugin()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">plugin
<span class="method-type">&laquo;Function&raquo;</span> callback</li><li class="param">[opts]
<span class="method-type">&laquo;Object&raquo;</span> </li></ul><div><p>Registers a plugin for this schema.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span> });
s.plugin(schema =&gt; <span class="hljs-built_in">console</span>.log(schema.path(<span class="hljs-string">'name'</span>).path));
mongoose.model(<span class="hljs-string">'Test'</span>, schema); <span class="hljs-comment">// Prints 'name'</span></code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-post"><a href="#schema_Schema-post">Schema.prototype.post()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">The
<span class="method-type">&laquo;String|RegExp&raquo;</span> method name or regular expression to match method name</li><li class="param">[options]
<span class="method-type">&laquo;Object&raquo;</span> </li><ul style="margin-top: 0.5em"><li>[options.document]
<span class="method-type">&laquo;Boolean&raquo;</span> If <code>name</code> is a hook for both document and query middleware, set to <code>true</code> to run on document middleware.</li></ul><ul style="margin-top: 0.5em"><li>[options.query]
<span class="method-type">&laquo;Boolean&raquo;</span> If <code>name</code> is a hook for both document and query middleware, set to <code>true</code> to run on query middleware.</li></ul><li class="param">fn
<span class="method-type">&laquo;Function&raquo;</span> callback</li></ul><div><p>Defines a post hook for the document</p>

<pre><code>var schema = new Schema(..);
schema.post('save', function (doc) {
  console.log('this fired after a document was saved');
});

schema.post('find', function(docs) {
  console.log('this fired after you ran a find query');
});

schema.post(/Many$/, function(res) {
  console.log('this fired after you ran `updateMany()` or `deleteMany()`);
});

var Model = mongoose.model('Model', schema);

var m = new Model(..);
m.save(function(err) {
  console.log('this fires after the `post` hook');
});

m.find(function(err, docs) {
  console.log('this fires after the post find hook');
});</code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-pre"><a href="#schema_Schema-pre">Schema.prototype.pre()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">The
<span class="method-type">&laquo;String|RegExp&raquo;</span> method name or regular expression to match method name</li><li class="param">[options]
<span class="method-type">&laquo;Object&raquo;</span> </li><ul style="margin-top: 0.5em"><li>[options.document]
<span class="method-type">&laquo;Boolean&raquo;</span> If <code>name</code> is a hook for both document and query middleware, set to <code>true</code> to run on document middleware.</li></ul><ul style="margin-top: 0.5em"><li>[options.query]
<span class="method-type">&laquo;Boolean&raquo;</span> If <code>name</code> is a hook for both document and query middleware, set to <code>true</code> to run on query middleware.</li></ul><li class="param">callback
<span class="method-type">&laquo;Function&raquo;</span> </li></ul><div><p>Defines a pre hook for the document.</p>

<h4>Example</h4>

<pre><code><span class="hljs-keyword">var</span> toySchema = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span>, created: <span class="hljs-built_in">Date</span> });

toySchema.pre(<span class="hljs-string">'save'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.created) <span class="hljs-keyword">this</span>.created = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>;
  next();
});

toySchema.pre(<span class="hljs-string">'validate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.name !== <span class="hljs-string">'Woody'</span>) <span class="hljs-keyword">this</span>.name = <span class="hljs-string">'Woody'</span>;
  next();
});

<span class="hljs-comment">// Equivalent to calling `pre()` on `find`, `findOne`, `findOneAndUpdate`.</span>
toySchema.pre(<span class="hljs-regexp">/^find/</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.getFilter());
});</code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-queue"><a href="#schema_Schema-queue">Schema.prototype.queue()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">name
<span class="method-type">&laquo;String&raquo;</span> name of the document method to call later</li><li class="param">args
<span class="method-type">&laquo;Array&raquo;</span> arguments to pass to the method</li></ul><div><p>Adds a method call to the queue.</p>

<h4>Example:</h4>

<pre><code>schema.methods.print = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>); };
schema.queue(<span class="hljs-string">'print'</span>, []); <span class="hljs-comment">// Print the doc every one is instantiated</span>

<span class="hljs-keyword">const</span> Model = mongoose.model(<span class="hljs-string">'Test'</span>, schema);
<span class="hljs-keyword">new</span> Model({ name: <span class="hljs-string">'test'</span> }); <span class="hljs-comment">// Prints '{"_id": ..., "name": "test" }'</span></code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-remove"><a href="#schema_Schema-remove">Schema.prototype.remove()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">path
<span class="method-type">&laquo;String|Array&raquo;</span> </li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Schema&raquo;</span> the Schema instance</li></ul><div><p>Removes the given <code>path</code> (or [<code>paths</code>]).</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> Schema({ name: <span class="hljs-built_in">String</span>, age: <span class="hljs-built_in">Number</span> });
schema.remove(<span class="hljs-string">'name'</span>);
schema.path(<span class="hljs-string">'name'</span>); <span class="hljs-comment">// Undefined</span>
schema.path(<span class="hljs-string">'age'</span>); <span class="hljs-comment">// SchemaNumber { ... }</span></code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-requiredPaths"><a href="#schema_Schema-requiredPaths">Schema.prototype.requiredPaths()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">invalidate
<span class="method-type">&laquo;Boolean&raquo;</span> refresh the cache</li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;Array&raquo;</span> </li></ul><div><p>Returns an Array of path strings that are required by this schema.</p>

<h4>Example:</h4>

<pre><code><span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> Schema({
  name: { type: <span class="hljs-built_in">String</span>, required: <span class="hljs-literal">true</span> },
  age: { type: <span class="hljs-built_in">String</span>, required: <span class="hljs-literal">true</span> },
  notes: <span class="hljs-built_in">String</span>
});
s.requiredPaths(); <span class="hljs-comment">// [ 'age', 'name' ]</span></code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-set"><a href="#schema_Schema-set">Schema.prototype.set()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">key
<span class="method-type">&laquo;String&raquo;</span> option name</li><li class="param">[value]
<span class="method-type">&laquo;Object&raquo;</span> if not passed, the current option value is returned</li></ul><div><p>Sets/gets a schema option.</p>

<h4>Example</h4>

<pre><code>schema.set(<span class="hljs-string">'strict'</span>); <span class="hljs-comment">// 'true' by default</span>
schema.set(<span class="hljs-string">'strict'</span>, <span class="hljs-literal">false</span>); <span class="hljs-comment">// Sets 'strict' to false</span>
schema.set(<span class="hljs-string">'strict'</span>); <span class="hljs-comment">// 'false'</span></code></pre>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-static"><a href="#schema_Schema-static">Schema.prototype.static()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">name
<span class="method-type">&laquo;String|Object&raquo;</span> </li><li class="param">[fn]
<span class="method-type">&laquo;Function&raquo;</span> </li></ul><div><p>Adds static "class" methods to Models compiled from this schema.</p>

<h4>Example</h4>

<pre><code><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> Schema(..);
<span class="hljs-comment">// Equivalent to `schema.statics.findByName = function(name) {}`;</span>
schema.static(<span class="hljs-string">'findByName'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.find({ name: name });
});

<span class="hljs-keyword">const</span> Drink = mongoose.model(<span class="hljs-string">'Drink'</span>, schema);
<span class="hljs-keyword">await</span> Drink.findByName(<span class="hljs-string">'LaCroix'</span>);</code></pre>

<p>If a hash of name/fn pairs is passed as the only argument, each name/fn pair will be added as statics.</p>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-virtual"><a href="#schema_Schema-virtual">Schema.prototype.virtual()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">name
<span class="method-type">&laquo;String&raquo;</span> </li><li class="param">[options]
<span class="method-type">&laquo;Object&raquo;</span> </li><ul style="margin-top: 0.5em"><li>[options.ref]
<span class="method-type">&laquo;String|Model&raquo;</span> model name or model instance. Marks this as a <a href="populate.html#populate-virtuals">populate virtual</a>.</li></ul><ul style="margin-top: 0.5em"><li>[options.localField]
<span class="method-type">&laquo;String|Function&raquo;</span> Required for populate virtuals. See <a href="populate.html#populate-virtuals">populate virtual docs</a> for more information.</li></ul><ul style="margin-top: 0.5em"><li>[options.foreignField]
<span class="method-type">&laquo;String|Function&raquo;</span> Required for populate virtuals. See <a href="populate.html#populate-virtuals">populate virtual docs</a> for more information.</li></ul><ul style="margin-top: 0.5em"><li>[options.justOne=false]
<span class="method-type">&laquo;Boolean|Function&raquo;</span> Only works with populate virtuals. If truthy, will be a single doc or <code>null</code>. Otherwise, the populate virtual will be an array.</li></ul><ul style="margin-top: 0.5em"><li>[options.count=false]
<span class="method-type">&laquo;Boolean&raquo;</span> Only works with populate virtuals. If truthy, this populate virtual will contain the number of documents rather than the documents themselves when you <code>populate()</code>.</li></ul></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;VirtualType&raquo;</span> </li></ul><div><p>Creates a virtual type with the given name.</p>  </div><hr class="separate-api-elements"><h3 id="schema_Schema-virtualpath"><a href="#schema_Schema-virtualpath">Schema.prototype.virtualpath()</a></h3><h5>Parameters</h5><ul class="params"><li class="param">name
<span class="method-type">&laquo;String&raquo;</span> </li></ul><h5>Returns:</h5><ul><li><span class="method-type">&laquo;VirtualType&raquo;</span> </li></ul><div><p>Returns the virtual type with the given <code>name</code>.</p>  </div><hr class="separate-api-elements"><h3 id="schema_Schema.reserved"><a href="#schema_Schema.reserved">Schema.reserved</a></h3><h5>Type:</h5><ul><li><span class="method-type">&laquo;property&raquo;</span></li></ul><div><p>Reserved document keys.</p>

<p>Keys in this object are names that are rejected in schema declarations because they conflict with Mongoose functionality. If you create a schema using <code>new Schema()</code> with one of these property names, Mongoose will throw an error.</p>

<ul>
<li>prototype</li>
<li>emit</li>
<li>on</li>
<li>once</li>
<li>listeners</li>
<li>removeListener</li>
<li>collection</li>
<li>db</li>
<li>errors</li>
<li>init</li>
<li>isModified</li>
<li>isNew</li>
<li>get</li>
<li>modelName</li>
<li>save</li>
<li>schema</li>
<li>toObject</li>
<li>validate</li>
<li>remove</li>
<li>populated</li>
<li>_pres</li>
<li>_posts</li>
</ul>

<p><em>NOTE:</em> Use of these terms as method names is permitted, but play at your own risk, as they may be existing mongoose document methods you are stomping on.</p>

<pre><code><span class="hljs-keyword">var</span> schema = <span class="hljs-keyword">new</span> Schema(..);
 schema.methods.init = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{} <span class="hljs-comment">// potentially breaking</span></code></pre>  </div></div><script>_native.init("CK7DT53U",{
  targetClass: 'native-inline'
});</script></div></div><script type="text/javascript">var xhr = new XMLHttpRequest();
xhr.open('POST', 'https://g0a3nbw0xa.execute-api.us-east-1.amazonaws.com/prod/track', true);
xhr.setRequestHeader('Content-Type', 'application/json');
xhr.onreadystatechange = function() {};
xhr.send(JSON.stringify({
  path: window.location.pathname,
  hostname: window.location.hostname,
  hash: window.location.hash
}));</script><script type="text/javascript" src="/docs/js/navbar-search.js"></script><script type="text/javascript">(function (window, document) {
  var layout   = document.getElementById('layout'),
      menu     = document.getElementById('menu'),
      menuLink = document.getElementById('menuLink'),
      content  = document.getElementById('content');

  function toggleClass(element, className) {
      var classes = element.className.split(/\s+/),
          length = classes.length,
          i = 0;

      for(; i < length; i++) {
        if (classes[i] === className) {
          classes.splice(i, 1);
          break;
        }
      }
      // The className is not found
      if (length === classes.length) {
          classes.push(className);
      }

      element.className = classes.join(' ');
  }

  function toggleAll(e) {
      var active = 'active';

      e.preventDefault();
      toggleClass(layout, active);
      toggleClass(menu, active);
      toggleClass(menuLink, active);
  }

  menuLink.onclick = function (e) {
      toggleAll(e);
  };

  content.onclick = function(e) {
      if (menu.className.indexOf('active') !== -1) {
          toggleAll(e);
      }
  };

}(this, this.document));</script></div></body></html>