<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Mongoose v9.1.2: Migrating to Mongoose 9</title><script>(function() {
  var theme = localStorage.getItem('mongoose-theme');
  if (theme) {
    document.documentElement.setAttribute('data-theme', theme);
  }
})();</script><link rel="apple-touch-icon" sizes="57x57" href="/docs/images/favicon/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/docs/images/favicon/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/docs/images/favicon/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/docs/images/favicon/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/docs/images/favicon/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/docs/images/favicon/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/docs/images/favicon/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/docs/images/favicon/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/docs/images/favicon/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/docs/images/favicon/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/docs/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/docs/images/favicon/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/docs/images/favicon/favicon-16x16.png"><link rel="manifest" href="/docs/images/favicon/manifest.json"><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans"><link rel="stylesheet" href="/docs/css/mongoose5.css?v=1767626653653"><link rel="stylesheet" href="/docs/css/github.css?v=1767626653653"><link rel="stylesheet" href="/docs/css/carbonads.css"><link rel="stylesheet" href="/docs/css/copy-code.css"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/docs/images/favicon/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/docs/css/inlinecpc.css"><script type="text/javascript" src="/docs/js/native.js"></script><style>p { line-height: 1.5em }
</style></head><body><div id="layout"><div id="theme-toggle"><button id="theme-toggle-btn" aria-label="Toggle dark mode" title="Toggle dark/light theme"><svg id="theme-icon-light" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
<svg id="theme-icon-dark" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg></button></div><div id="mobile-menu"><a class="menu-link" id="menuLink" href="#menu"><svg width="100%" height="100%" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></a><div id="mobile-logo-container"><a href="/"><span id="logo" role="img" aria-label="Mongoose logo"></span><span class="logo-text">mongoose</span></a></div></div><div id="menu"><nav class="pure-menu"><div class="pure-menu-heading" id="logo-container"><a href="/"><span id="logo" role="img" aria-label="Mongoose logo"></span><span class="logo-text">mongoose</span></a></div><ul class="pure-menu-list" id="navbar"><li class="pure-menu-horizontal pure-menu-item pure-menu-has-children pure-menu-allow-hover version"><a class="pure-menu-link" href="/docs/index.html">Version 9.1.2</a><ul class="pure-menu-children"><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/8.x/index.html">Version 8.21.0</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/7.x/index.html">Version 7.8.8</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/6.x/index.html">Version 6.13.8</a></li></ul></li><li class="pure-menu-item search"><input id="search-input-nav" type="text" placeholder="Search"><button id="search-button-nav"><img src="/docs/images/search.svg"></button></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/index.html">Quick Start</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/guides.html">Guides</a><ul class="pure-menu-list"><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/guide.html">Schemas</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/schematypes.html">SchemaTypes</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/connections.html">Connections</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/models.html">Models</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/documents.html">Documents</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/subdocs.html">Subdocuments</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/queries.html">Queries</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/validation.html">Validation</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/middleware.html">Middleware</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/populate.html">Populate</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/discriminators.html">Discriminators</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/plugins.html">Plugins</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/timestamps.html">Timestamps</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/transactions.html">Transactions</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/typescript.html">TypeScript</a></li></ul></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/api/mongoose.html">API</a><ul class="pure-menu-list"><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/mongoose.html">Mongoose</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/schema.html">Schema</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/connection.html">Connection</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/document.html">Document</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/model.html">Model</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/query.html">Query</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/aggregate.html">Aggregate</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/schematype.html">SchemaType</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/virtualtype.html">VirtualType</a></li></ul></li><li class="pure-menu-item"><a class="pure-menu-link selected" href="/docs/migrating_to_9.html">Migration Guide</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/compatibility.html">Version Compatibility</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/version-support.html">Version Support</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/faq.html">FAQ</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/further_reading.html">Further Reading</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/enterprise.html">For Enterprise</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/sponsors.html" >Sponsors</a></li></ul><div class="cpc-ad"><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CKYIL27I&placement=mongoosejscom" id="_carbonads_js"></script></div></nav></div><div class="container"><div id="content"><a class="edit-docs-link" href="https://github.com/Automattic/mongoose/blob/master/docs/migrating_to_9.md" target="_blank">
<img src="/docs/images/pencil.svg" />
</a><h1 id="migrating-from-8x-to-9x">
        <a href="#migrating-from-8x-to-9x">
          Migrating from 8.x to 9.x
        </a>
      </h1>
<div class="sponsored-ad">
  <a href="https://localizejs.com/?utm_campaign=Mongoose&utm_source=mongoose&utm_medium=banner">
    <img src="/docs/images/localize-mongoose-ad-banner-2x.jpg">
  </a>
</div>

<style>
  ul > li {
    padding: 4px 0px;
  }
</style>

<p>There are several backwards-breaking changes you should be aware of when migrating from Mongoose 8.x to Mongoose 9.x.</p>
<p>If you&#39;re still on Mongoose 7.x or earlier, please read the <a href="migrating_to_8.html">Mongoose 7.x to 8.x migration guide</a> and upgrade to Mongoose 8.x first before upgrading to Mongoose 9.</p>
<h2 id="pre-middleware-no-longer-supports-next">
        <a href="#pre-middleware-no-longer-supports-next">
          Pre middleware no longer supports <code>next()</code>
        </a>
      </h2>
<p>In Mongoose 9, pre middleware no longer receives a <code>next()</code> parameter.
Instead, you should use <code>async</code> functions or promises to handle async pre middleware.</p>
<pre><code lang="javascript"><span class="hljs-comment">// Worked in Mongoose 8.x, no longer supported in Mongoose 9!</span>
schema.<span class="hljs-title function_">pre</span>(<span class="hljs-string">&#x27;save&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) {
  <span class="hljs-comment">// Do something async</span>
  <span class="hljs-title function_">next</span>();
});

<span class="hljs-comment">// Mongoose 9.x example usage</span>
schema.<span class="hljs-title function_">pre</span>(<span class="hljs-string">&#x27;save&#x27;</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// Do something async</span>
});
<span class="hljs-comment">// or use promises:</span>
schema.<span class="hljs-title function_">pre</span>(<span class="hljs-string">&#x27;save&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-comment">// Do something async</span>
    <span class="hljs-title function_">resolve</span>();
  });
});</code></pre><h2 id="schemaprototypedovalidate-now-returns-a-promise">
        <a href="#schemaprototypedovalidate-now-returns-a-promise">
          <code>Schema.prototype.doValidate()</code> now returns a promise
        </a>
      </h2>
<p><code>Schema.prototype.doValidate()</code> now returns a promise that rejects with a validation error if one occurred.
In Mongoose 8.x, <code>doValidate()</code> took a callback and did not return a promise.</p>
<pre><code lang="javascript"><span class="hljs-comment">// Mongoose 8.x function signature</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">doValidate</span>(<span class="hljs-params">value, cb, scope, options</span>) {}

<span class="hljs-comment">// Mongoose 8.x example usage</span>
schema.<span class="hljs-title function_">doValidate</span>(value, <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
  <span class="hljs-keyword">if</span> (error) {
    <span class="hljs-comment">// Handle validation error</span>
  }
}, scope, options);

<span class="hljs-comment">// Mongoose 9.x function signature</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">doValidate</span>(<span class="hljs-params">value, scope, options</span>) {}

<span class="hljs-comment">// Mongoose 9.x example usage</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">await</span> schema.<span class="hljs-title function_">doValidate</span>(value, scope, options);
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-comment">// Handle validation error</span>
}</code></pre><h2 id="update-pipelines-disallowed-by-default">
        <a href="#update-pipelines-disallowed-by-default">
          Update pipelines disallowed by default
        </a>
      </h2>
<p>As of MongoDB 4.2, you can pass an array of pipeline stages to <code>updateOne()</code>, <code>updateMany()</code>, and <code>findOneAndUpdate()</code> to modify the document in multiple stages.
Mongoose does not cast update pipelines at all, so for Mongoose 9 we&#39;ve made using update pipelines throw an error by default.</p>
<pre><code lang="javascript"><span class="hljs-comment">// Throws in Mongoose 9. Works in Mongoose 8</span>
<span class="hljs-keyword">await</span> <span class="hljs-title class_">Model</span>.<span class="hljs-title function_">updateOne</span>({}, [{ <span class="hljs-attr">$set</span>: { <span class="hljs-attr">newProp</span>: <span class="hljs-string">&#x27;test2&#x27;</span> } }]);</code></pre><p>Set <code>updatePipeline: true</code> to enable update pipelines.</p>
<pre><code lang="javascript"><span class="hljs-comment">// Works in Mongoose 9</span>
<span class="hljs-keyword">await</span> <span class="hljs-title class_">Model</span>.<span class="hljs-title function_">updateOne</span>({}, [{ <span class="hljs-attr">$set</span>: { <span class="hljs-attr">newProp</span>: <span class="hljs-string">&#x27;test2&#x27;</span> } }], { <span class="hljs-attr">updatePipeline</span>: <span class="hljs-literal">true</span> });</code></pre><p>You can also set <code>updatePipeline</code> globally to enable update pipelines for all update operations by default.</p>
<pre><code lang="javascript"><span class="hljs-comment">// Enable update pipelines globally</span>
mongoose.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;updatePipeline&#x27;</span>, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// Now update pipelines work without needing to specify the option on each query</span>
<span class="hljs-keyword">await</span> <span class="hljs-title class_">Model</span>.<span class="hljs-title function_">updateOne</span>({}, [{ <span class="hljs-attr">$set</span>: { <span class="hljs-attr">newProp</span>: <span class="hljs-string">&#x27;test2&#x27;</span> } }]);

<span class="hljs-comment">// You can still override the global setting per query</span>
<span class="hljs-keyword">await</span> <span class="hljs-title class_">Model</span>.<span class="hljs-title function_">updateOne</span>({}, [{ <span class="hljs-attr">$set</span>: { <span class="hljs-attr">newProp</span>: <span class="hljs-string">&#x27;test2&#x27;</span> } }], { <span class="hljs-attr">updatePipeline</span>: <span class="hljs-literal">false</span> }); <span class="hljs-comment">// throws</span></code></pre><h2 id="removed-background-option-for-indexes">
        <a href="#removed-background-option-for-indexes">
          Removed background option for indexes
        </a>
      </h2>
<p><a href="https://www.mongodb.com/docs/manual/core/index-creation/#index-operations">MongoDB no longer supports the <code>background</code> option for indexes as of MongoDB 4.2</a>. Mongoose 9 will no longer set the background option by default and Mongoose 9 no longer supports setting the <code>background</code> option on <code>Schema.prototype.index()</code>.</p>
<h2 id="mongooseisvalidobjectid-returns-false-for-numbers">
        <a href="#mongooseisvalidobjectid-returns-false-for-numbers">
          <code>mongoose.isValidObjectId()</code> returns false for numbers
        </a>
      </h2>
<p>In Mongoose 8, you could create a new ObjectId from a number, and <code>isValidObjectId()</code> would return <code>true</code> for numbers. In Mongoose 9, <code>isValidObjectId()</code> will return <code>false</code> for numbers and you can no longer create a new ObjectId from a number.</p>
<pre><code lang="javascript"><span class="hljs-comment">// true in mongoose 8, false in mongoose 9</span>
mongoose.<span class="hljs-title function_">isValidObjectId</span>(<span class="hljs-number">6</span>);

<span class="hljs-comment">// Works in Mongoose 8, throws in Mongoose 9</span>
<span class="hljs-keyword">new</span> mongoose.<span class="hljs-property">Types</span>.<span class="hljs-title class_">ObjectId</span>(<span class="hljs-number">6</span>);</code></pre><h2 id="subdocument-deleteone-hooks-execute-only-when-subdocument-is-deleted">
        <a href="#subdocument-deleteone-hooks-execute-only-when-subdocument-is-deleted">
          Subdocument <code>deleteOne()</code> hooks execute only when subdocument is deleted
        </a>
      </h2>
<p>Currently, calling <code>deleteOne()</code> on a subdocument will execute the <code>deleteOne()</code> hooks on the subdocument regardless of whether the subdocument is actually deleted.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">SubSchema</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">myValue</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>
  }
}, {});
<span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
<span class="hljs-title class_">SubSchema</span>.<span class="hljs-title function_">pre</span>(<span class="hljs-string">&#x27;deleteOne&#x27;</span>, { <span class="hljs-attr">document</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">query</span>: <span class="hljs-literal">false</span> }, <span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) {
  count++;
  <span class="hljs-title function_">next</span>();
});
<span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">foo</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">mySubdoc</span>: {
    <span class="hljs-attr">type</span>: [<span class="hljs-title class_">SubSchema</span>],
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
  }
}, { <span class="hljs-attr">minimize</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">collection</span>: <span class="hljs-string">&#x27;test&#x27;</span> });

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Model</span> = db.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;TestModel&#x27;</span>, schema);

<span class="hljs-keyword">const</span> newModel = {
  <span class="hljs-attr">foo</span>: <span class="hljs-string">&#x27;bar&#x27;</span>,
  <span class="hljs-attr">mySubdoc</span>: [{ <span class="hljs-attr">myValue</span>: <span class="hljs-string">&#x27;some value&#x27;</span> }]
};
<span class="hljs-keyword">const</span> doc = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Model</span>.<span class="hljs-title function_">create</span>(newModel);

<span class="hljs-comment">// In Mongoose 8, the following would trigger the `deleteOne` hook, even if `doc` is not saved or deleted.</span>
doc.<span class="hljs-property">mySubdoc</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">deleteOne</span>();

<span class="hljs-comment">// In Mongoose 9, you would need to either `save()` or `deleteOne()` on `doc` to trigger the subdocument `deleteOne` hook.</span>
<span class="hljs-keyword">await</span> doc.<span class="hljs-title function_">save</span>();</code></pre><h2 id="hooks-for-custom-methods-and-statics-no-longer-support-callbacks">
        <a href="#hooks-for-custom-methods-and-statics-no-longer-support-callbacks">
          Hooks for custom methods and statics no longer support callbacks
        </a>
      </h2>
<p>Previously, you could use Mongoose middleware with custom methods and statics that took callbacks.
In Mongoose 9, this is no longer supported.
If you want to use Mongoose middleware with a custom method or static, that custom method or static must be an async function or return a Promise.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> mySchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span>
});

<span class="hljs-comment">// This is an example of a custom method that uses callbacks. While this method by itself still works in Mongoose 9,</span>
<span class="hljs-comment">// Mongoose 9 no longer supports hooks for this method.</span>
mySchema.<span class="hljs-property">methods</span>.<span class="hljs-property">foo</span> = <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">cb</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">cb</span>(<span class="hljs-literal">null</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
};
mySchema.<span class="hljs-property">statics</span>.<span class="hljs-property">bar</span> = <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">cb</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">cb</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&#x27;bar&#x27;</span>);
};

<span class="hljs-comment">// This is no longer supported because `foo()` and `bar()` use callbacks.</span>
mySchema.<span class="hljs-title function_">pre</span>(<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;foo pre hook&#x27;</span>);
});
mySchema.<span class="hljs-title function_">pre</span>(<span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;bar pre hook&#x27;</span>);
});

<span class="hljs-comment">// The following code has a custom method and a custom static that use async functions.</span>
<span class="hljs-comment">// The following works correctly in Mongoose 9: `pre(&#x27;bar&#x27;)` is executed when you call `bar()` and</span>
<span class="hljs-comment">// `pre(&#x27;qux&#x27;)` is executed when you call `qux()`.</span>
mySchema.<span class="hljs-property">methods</span>.<span class="hljs-property">baz</span> = <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">baz</span>(<span class="hljs-params">arg</span>) {
  <span class="hljs-keyword">return</span> arg;
};
mySchema.<span class="hljs-title function_">pre</span>(<span class="hljs-string">&#x27;baz&#x27;</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">baz</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;baz pre hook&#x27;</span>);
});
mySchema.<span class="hljs-property">statics</span>.<span class="hljs-property">qux</span> = <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">qux</span>(<span class="hljs-params">arg</span>) {
  <span class="hljs-keyword">return</span> arg;
};
mySchema.<span class="hljs-title function_">pre</span>(<span class="hljs-string">&#x27;qux&#x27;</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">qux</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;qux pre hook&#x27;</span>);
});</code></pre><h2 id="documentprototypeupdateone-no-longer-accepts-a-callback">
        <a href="#documentprototypeupdateone-no-longer-accepts-a-callback">
          <code>Document.prototype.updateOne</code> no longer accepts a callback
        </a>
      </h2>
<p><code>Document.prototype.updateOne</code> still supported callbacks in Mongoose 8. In Mongoose 9, the callback parameter was removed.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> doc = <span class="hljs-keyword">await</span> <span class="hljs-title class_">TestModel</span>.<span class="hljs-title function_">findOne</span>().<span class="hljs-title function_">orFail</span>();

<span class="hljs-comment">// Worked in Mongoose 8, no longer supported in Mongoose 9.</span>
doc.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;updated&#x27;</span> }, <span class="hljs-literal">null</span>, <span class="hljs-function">(<span class="hljs-params">err, res</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
});</code></pre><h2 id="removed-promiseorcallback">
        <a href="#removed-promiseorcallback">
          Removed <code>promiseOrCallback</code>
        </a>
      </h2>
<p>Mongoose 9 removed the <code>promiseOrCallback</code> helper function.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> { promiseOrCallback } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mongoose&#x27;</span>);

promiseOrCallback; <span class="hljs-comment">// undefined in Mongoose 9</span></code></pre><h2 id="isasync-middleware-no-longer-supported">
        <a href="#isasync-middleware-no-longer-supported">
          <code>isAsync</code> middleware no longer supported
        </a>
      </h2>
<p>Mongoose 9 no longer supports <code>isAsync</code> middleware. Middleware functions that use the legacy signature with both <code>next</code> and <code>done</code> callbacks (i.e., <code>function(next, done)</code>) are not supported. We recommend middleware now use promises or async/await.</p>
<p>If you have code that uses <code>isAsync</code> middleware, you must refactor it to use async functions or return a promise instead.</p>
<pre><code lang="javascript"><span class="hljs-comment">// ❌ Not supported in Mongoose 9</span>
<span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({});

schema.<span class="hljs-title function_">pre</span>(<span class="hljs-string">&#x27;save&#x27;</span>, <span class="hljs-literal">true</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">next, done</span>) {
  execed.<span class="hljs-property">first</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-built_in">setTimeout</span>(
    <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
      <span class="hljs-title function_">done</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;first done() error&#x27;</span>));
    },
    <span class="hljs-number">5</span>);

  <span class="hljs-title function_">next</span>();
});

schema.<span class="hljs-title function_">pre</span>(<span class="hljs-string">&#x27;save&#x27;</span>, <span class="hljs-literal">true</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">next, done</span>) {
  execed.<span class="hljs-property">second</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-built_in">setTimeout</span>(
    <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
      <span class="hljs-title function_">next</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;second next() error&#x27;</span>));
      <span class="hljs-title function_">done</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;second done() error&#x27;</span>));
    },
    <span class="hljs-number">25</span>);
});

<span class="hljs-comment">// ✅ Supported in Mongoose 9: use async functions or return a promise</span>
schema.<span class="hljs-title function_">pre</span>(<span class="hljs-string">&#x27;save&#x27;</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  execed.<span class="hljs-property">first</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">5</span>));
});

schema.<span class="hljs-title function_">pre</span>(<span class="hljs-string">&#x27;save&#x27;</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  execed.<span class="hljs-property">second</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">25</span>));
});</code></pre><h2 id="removed-skiporiginalstacktraces-option">
        <a href="#removed-skiporiginalstacktraces-option">
          Removed <code>skipOriginalStackTraces</code> option
        </a>
      </h2>
<p>In Mongoose 8, Mongoose queries store an <code>_executionStack</code> property that stores the stack trace of where the query was originally executed for debugging <code>Query was already executed</code> errors.
This behavior can cause performance issues with bundlers and source maps.
<code>skipOriginalStackTraces</code> was added to work around this behavior.
In Mongoose 9, this option is no longer necessary because Mongoose no longer stores the original stack trace.</p>
<h2 id="nodejs-version-support">
        <a href="#nodejs-version-support">
          Node.js version support
        </a>
      </h2>
<p>Mongoose 9 requires Node.js 18 or higher.</p>
<h2 id="uuid39s-are-now-mongodb-uuid-objects">
        <a href="#uuid39s-are-now-mongodb-uuid-objects">
          UUID&#39;s are now MongoDB UUID objects
        </a>
      </h2>
<p>Mongoose 9 now returns UUID objects as instances of <code>bson.UUID</code>. In Mongoose 8, UUIDs were Mongoose Buffers that were converted to strings via a getter.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">uuid</span>: <span class="hljs-string">&#x27;UUID&#x27;</span> });
<span class="hljs-keyword">const</span> <span class="hljs-title class_">TestModel</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Test&#x27;</span>, schema);

<span class="hljs-keyword">const</span> test = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestModel</span>({ <span class="hljs-attr">uuid</span>: <span class="hljs-keyword">new</span> bson.<span class="hljs-title function_">UUID</span>() });
<span class="hljs-keyword">await</span> test.<span class="hljs-title function_">save</span>();

test.<span class="hljs-property">uuid</span>; <span class="hljs-comment">// string in Mongoose 8, bson.UUID instance in Mongoose 9</span></code></pre><p>With this change, UUIDs will be represented in hex string format in JSON, even if <code>getters: true</code> is not set.</p>
<p>If you want to convert UUIDs to strings via a getter by default, you can use <code>mongoose.Schema.Types.UUID.get()</code>:</p>
<pre><code lang="javascript"><span class="hljs-comment">// Configure all UUIDs to have a getter which converts the UUID to a string</span>
mongoose.<span class="hljs-property">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">UUID</span>.<span class="hljs-title function_">get</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v == <span class="hljs-literal">null</span> ? v : v.<span class="hljs-title function_">toString</span>());

<span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">uuid</span>: <span class="hljs-string">&#x27;UUID&#x27;</span> });
<span class="hljs-keyword">const</span> <span class="hljs-title class_">TestModel</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Test&#x27;</span>, schema);

<span class="hljs-keyword">const</span> test = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestModel</span>({ <span class="hljs-attr">uuid</span>: <span class="hljs-keyword">new</span> bson.<span class="hljs-title function_">UUID</span>() });
<span class="hljs-keyword">await</span> test.<span class="hljs-title function_">save</span>();

test.<span class="hljs-property">uuid</span>; <span class="hljs-comment">// string</span></code></pre><h3 id="schematype-caster-and-casterconstructor-properties-were-removed">
        <a href="#schematype-caster-and-casterconstructor-properties-were-removed">
          SchemaType <code>caster</code> and <code>casterConstructor</code> properties were removed
        </a>
      </h3>
<p>In Mongoose 8, certain schema type instances had a <code>caster</code> property which contained either the embedded schema type or embedded subdocument constructor.
In Mongoose 9, to make types and internal logic more consistent, we removed the <code>caster</code> property in favor of <code>embeddedSchemaType</code> and <code>Constructor</code>.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> mongoose.<span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">docArray</span>: [<span class="hljs-keyword">new</span> mongoose.<span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span> })], <span class="hljs-attr">arr</span>: [<span class="hljs-title class_">String</span>] });

<span class="hljs-comment">// In Mongoose 8:</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(schema.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;arr&#x27;</span>).<span class="hljs-property">caster</span>); <span class="hljs-comment">// SchemaString</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(schema.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;docArray&#x27;</span>).<span class="hljs-property">caster</span>); <span class="hljs-comment">// EmbeddedDocument constructor</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(schema.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;arr&#x27;</span>).<span class="hljs-property">casterConstructor</span>); <span class="hljs-comment">// SchemaString constructor</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(schema.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;docArray&#x27;</span>).<span class="hljs-property">casterConstructor</span>); <span class="hljs-comment">// EmbeddedDocument constructor</span>

<span class="hljs-comment">// In Mongoose 9:</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(schema.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;arr&#x27;</span>).<span class="hljs-property">embeddedSchemaType</span>); <span class="hljs-comment">// SchemaString</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(schema.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;docArray&#x27;</span>).<span class="hljs-property">embeddedSchemaType</span>); <span class="hljs-comment">// SchemaDocumentArrayElement</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(schema.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;arr&#x27;</span>).<span class="hljs-property">Constructor</span>); <span class="hljs-comment">// undefined</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(schema.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;docArray&#x27;</span>).<span class="hljs-property">Constructor</span>); <span class="hljs-comment">// EmbeddedDocument constructor</span></code></pre><p>In Mongoose 8, there was also an internal <code>$embeddedSchemaType</code> property. That property has been replaced with <code>embeddedSchemaType</code>, which is now part of the public API.</p>
<h3 id="removed-skipid-parameter-to-model-and-document">
        <a href="#removed-skipid-parameter-to-model-and-document">
          Removed <code>skipId</code> parameter to <code>Model()</code> and <code>Document()</code>
        </a>
      </h3>
<p>In Mongoose 8, the 3rd parameter to <code>Model()</code> and <code>Document()</code> was either a boolean or <code>options</code> object.
If a boolean, Mongoose would interpret the 3rd parameter as the <code>skipId</code> option.
In Mongoose 9, the 3rd parameter is always an <code>options</code> object, passing a <code>boolean</code> is no longer supported.</p>
<h3 id="query-usegeowithin-removed-now-always-true">
        <a href="#query-usegeowithin-removed-now-always-true">
          Query use$geoWithin removed, now always true
        </a>
      </h3>
<p><code>mongoose.Query</code> had a <code>use$geoWithin</code> property that could configure converting <code>$geoWithin</code> to <code>$within</code> to support MongoDB versions before 2.4.
That property has been removed in Mongoose 9. <code>$geoWithin</code> is now never converted to <code>$within</code>, because MongoDB no longer supports <code>$within</code>.</p>
<h3 id="removed-nolistener-option-from-usedbconnections">
        <a href="#removed-nolistener-option-from-usedbconnections">
          Removed <code>noListener</code> option from <code>useDb()</code>/connections
        </a>
      </h3>
<p>The <code>noListener</code> option has been removed from connections and from the <code>useDb()</code> method. In Mongoose 8.x, you could call <code>useDb()</code> with <code>{ noListener: true }</code> to prevent the new connection object from listening to state changes on the base connection, which was sometimes useful to reduce memory usage when dynamically creating connections for every request.</p>
<p>In Mongoose 9.x, the <code>noListener</code> option is no longer supported or documented. The second argument to <code>useDb()</code> now only supports <code>{ useCache }</code>.</p>
<pre><code lang="javascript"><span class="hljs-comment">// Mongoose 8.x</span>
conn.<span class="hljs-title function_">useDb</span>(<span class="hljs-string">&#x27;myDb&#x27;</span>, { <span class="hljs-attr">noListener</span>: <span class="hljs-literal">true</span> }); <span class="hljs-comment">// works</span>

<span class="hljs-comment">// Mongoose 9.x</span>
conn.<span class="hljs-title function_">useDb</span>(<span class="hljs-string">&#x27;myDb&#x27;</span>, { <span class="hljs-attr">noListener</span>: <span class="hljs-literal">true</span> }); <span class="hljs-comment">// TypeError: noListener is not a supported option</span>
conn.<span class="hljs-title function_">useDb</span>(<span class="hljs-string">&#x27;myDb&#x27;</span>, { <span class="hljs-attr">useCache</span>: <span class="hljs-literal">true</span> }); <span class="hljs-comment">// works</span></code></pre><h2 id="typescript">
        <a href="#typescript">
          TypeScript
        </a>
      </h2>
<h3 id="filterquery-renamed-to-queryfilter">
        <a href="#filterquery-renamed-to-queryfilter">
          FilterQuery renamed to QueryFilter
        </a>
      </h3>
<p>In Mongoose 9, <code>FilterQuery</code> (the first parameter to <code>Model.find()</code>, <code>Model.findOne()</code>, etc.) was renamed to <code>QueryFilter</code>.</p>
<h3 id="queryfilter-properties-no-longer-resolve-to-any">
        <a href="#queryfilter-properties-no-longer-resolve-to-any">
          QueryFilter Properties No Longer Resolve to any
        </a>
      </h3>
<p>In Mongoose 9, the <code>QueryFilter</code> type, which is the type of the first param to <code>Model.find()</code>, <code>Model.findOne()</code>, etc. now enforces stronger types for top-level keys.</p>
<pre><code lang="typescript"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">age</span>: <span class="hljs-title class_">Number</span> });
<span class="hljs-keyword">const</span> <span class="hljs-title class_">TestModel</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Test&#x27;</span>, schema);

<span class="hljs-title class_">TestModel</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">age</span>: <span class="hljs-string">&#x27;not a number&#x27;</span> }); <span class="hljs-comment">// Works in Mongoose 8, TS error in Mongoose 9</span>
<span class="hljs-title class_">TestModel</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">age</span>: { <span class="hljs-attr">$notAnOperator</span>: <span class="hljs-number">42</span> } }); <span class="hljs-comment">// Works in Mongoose 8, TS error in Mongoose 9</span></code></pre><p>This change is backwards breaking if you use generics when creating queries as shown in the following example.
If you run into the following issue or any similar issues, you can use <code>as QueryFilter</code>.</p>
<pre><code lang="typescript"><span class="hljs-comment">// From https://stackoverflow.com/questions/56505560/how-to-fix-ts2322-could-be-instantiated-with-a-different-subtype-of-constraint:</span>
<span class="hljs-comment">// &quot;Never assign a concrete type to a generic type parameter, consider it as read-only!&quot;</span>
<span class="hljs-comment">// This function is generally something you shouldn&#x27;t do in TypeScript, can work around it with `as` though.</span>
<span class="hljs-keyword">function</span> findById&lt;<span class="hljs-title class_">ModelType</span> <span class="hljs-keyword">extends</span> {<span class="hljs-attr">_id</span>: <span class="hljs-title class_">Types</span>.<span class="hljs-property">ObjectId</span> | <span class="hljs-built_in">string</span>}&gt;(<span class="hljs-attr">model</span>: <span class="hljs-title class_">Model</span>&lt;<span class="hljs-title class_">ModelType</span>&gt;, <span class="hljs-attr">_id</span>: <span class="hljs-title class_">Types</span>.<span class="hljs-property">ObjectId</span> | <span class="hljs-built_in">string</span>) {
  <span class="hljs-keyword">return</span> model.<span class="hljs-title function_">find</span>({<span class="hljs-attr">_id</span>: _id} <span class="hljs-keyword">as</span> <span class="hljs-title class_">QueryFilter</span>&lt;<span class="hljs-title class_">ModelType</span>&gt;); <span class="hljs-comment">// In Mongoose 8, this `as` was not required</span>
}</code></pre><h3 id="no-more-generic-parameter-for-create-and-insertone">
        <a href="#no-more-generic-parameter-for-create-and-insertone">
          No more generic parameter for <code>create()</code> and <code>insertOne()</code>
        </a>
      </h3>
<p>In Mongoose 8, <code>create()</code> and <code>insertOne()</code> accepted a generic parameter, which meant TypeScript let you pass any value to the function.</p>
<pre><code lang="ts"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">age</span>: <span class="hljs-title class_">Number</span> });
<span class="hljs-keyword">const</span> <span class="hljs-title class_">TestModel</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Test&#x27;</span>, schema);

<span class="hljs-comment">// Worked in Mongoose 8, TypeScript error in Mongoose 9</span>
<span class="hljs-keyword">const</span> doc = <span class="hljs-keyword">await</span> <span class="hljs-title class_">TestModel</span>.<span class="hljs-title function_">create</span>({ <span class="hljs-attr">age</span>: <span class="hljs-string">&#x27;not a number&#x27;</span>, <span class="hljs-attr">someOtherProperty</span>: <span class="hljs-string">&#x27;value&#x27;</span> });</code></pre><p>In Mongoose 9, <code>create()</code> and <code>insertOne()</code> no longer accept a generic parameter. Instead, they accept <code>Partial&lt;RawDocType&gt;</code> with some additional query casting applied that allows objects for maps, strings for ObjectIds, and POJOs for subdocuments and document arrays.</p>
<p>If your parameters to <code>create()</code> don&#39;t match <code>Partial&lt;RawDocType&gt;</code>, you can use <code>as</code> to cast as follows.</p>
<pre><code lang="ts"><span class="hljs-keyword">const</span> doc = <span class="hljs-keyword">await</span> <span class="hljs-title class_">TestModel</span>.<span class="hljs-title function_">create</span>({ <span class="hljs-attr">age</span>: <span class="hljs-string">&#x27;not a number&#x27;</span>, <span class="hljs-attr">someOtherProperty</span>: <span class="hljs-string">&#x27;value&#x27;</span> } <span class="hljs-keyword">as</span> <span class="hljs-built_in">unknown</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Partial</span>&lt;<span class="hljs-title class_">InferSchemaType</span>&lt;<span class="hljs-keyword">typeof</span> schema&gt;&gt;);</code></pre><h3 id="document-id-is-no-longer-any">
        <a href="#document-id-is-no-longer-any">
          Document <code>id</code> is no longer <code>any</code>
        </a>
      </h3>
<p>In Mongoose 8 and earlier, <code>id</code> was a property on the <code>Document</code> class that was set to <code>any</code>.
This was inconsistent with runtime behavior, where <code>id</code> is a virtual property that returns <code>_id</code> as a string, unless there is already an <code>id</code> property on the schema or the schema has the <code>id</code> option set to <code>false</code>.</p>
<p>Mongoose 9 appends <code>id</code> as a string property to <code>TVirtuals</code>. The <code>Document</code> class no longer has an <code>id</code> property.</p>
<pre><code lang="ts"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">age</span>: <span class="hljs-title class_">Number</span> });
<span class="hljs-keyword">const</span> <span class="hljs-title class_">TestModel</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Test&#x27;</span>, schema);

<span class="hljs-keyword">const</span> doc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestModel</span>();
doc.<span class="hljs-property">id</span>; <span class="hljs-comment">// &#x27;string&#x27; in Mongoose 9, &#x27;any&#x27; in Mongoose 8.</span></code></pre></div></div><div id="jobs"><div class="job-listing"><a href="/docs/jobs.html#61f0b0402d893554bc3a247f"><div class="company-logo"><img src="https://assets.localizecdn.com/uploads/1689251999716.png"></div><div class="description"><div class="company">Localize</div><div class="title">Full Stack Engineer</div><div class="location">Anywhere</div></div></a></div><div class="button jobs-view-more"><a href="/docs/jobs.html">View more jobs!</a></div></div><script type="text/javascript" src="/docs/js/navbar-search.js"></script><script type="text/javascript" src="/docs/js/mobile-navbar-toggle.js"></script><script type="text/javascript" src="/docs/js/theme-toggle.js"></script><script type="text/javascript" src="/docs/js/copy-code.js"></script></div></body></html>