<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Mongoose v8.19.1: SchemaTypes</title><link rel="apple-touch-icon" sizes="57x57" href="/docs/images/favicon/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/docs/images/favicon/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/docs/images/favicon/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/docs/images/favicon/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/docs/images/favicon/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/docs/images/favicon/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/docs/images/favicon/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/docs/images/favicon/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/docs/images/favicon/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/docs/images/favicon/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/docs/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/docs/images/favicon/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/docs/images/favicon/favicon-16x16.png"><link rel="manifest" href="/docs/images/favicon/manifest.json"><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans"><link rel="stylesheet" href="/docs/css/github.css"><link rel="stylesheet" href="/docs/css/mongoose5.css"><link rel="stylesheet" href="/docs/css/carbonads.css"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/docs/images/favicon/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/docs/css/inlinecpc.css"><script type="text/javascript" src="/docs/js/native.js"></script><style>p { line-height: 1.5em }
</style></head><body><div id="layout"><div id="mobile-menu"><a class="menu-link" id="menuLink" href="#menu"><svg width="100%" height="100%" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></a><div id="mobile-logo-container"><a href="/"><img id="logo" src="/docs/images/mongoose5_62x30_transparent.png"><span class="logo-text">mongoose</span></a></div></div><div id="menu"><nav class="pure-menu"><div class="pure-menu-heading" id="logo-container"><a href="/"><img id="logo" src="/docs/images/mongoose5_62x30_transparent.png"><span class="logo-text">mongoose</span></a></div><ul class="pure-menu-list" id="navbar"><li class="pure-menu-horizontal pure-menu-item pure-menu-has-children pure-menu-allow-hover version"><a class="pure-menu-link" href="/docs/index.html">Version 8.19.1</a><ul class="pure-menu-children"><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/7.x/index.html">Version 7.8.7</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/6.x/index.html">Version 6.13.8</a></li></ul></li><li class="pure-menu-item search"><input id="search-input-nav" type="text" placeholder="Search"><button id="search-button-nav"><img src="/docs/images/search.svg"></button></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/index.html">Quick Start</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/guides.html">Guides</a><ul class="pure-menu-list"><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/guide.html">Schemas</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link selected" href="/docs/schematypes.html">SchemaTypes</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/connections.html">Connections</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/models.html">Models</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/documents.html">Documents</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/subdocs.html">Subdocuments</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/queries.html">Queries</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/validation.html">Validation</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/middleware.html">Middleware</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/populate.html">Populate</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/discriminators.html">Discriminators</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/plugins.html">Plugins</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/timestamps.html">Timestamps</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/transactions.html">Transactions</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/typescript.html">TypeScript</a></li></ul></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/api/mongoose.html">API</a><ul class="pure-menu-list"><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/mongoose.html">Mongoose</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/schema.html">Schema</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/connection.html">Connection</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/document.html">Document</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/model.html">Model</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/query.html">Query</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/aggregate.html">Aggregate</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/schematype.html">SchemaType</a></li><li class="pure-menu-item sub-item"><a class="pure-menu-link" href="/docs/api/virtualtype.html">VirtualType</a></li></ul></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/migrating_to_8.html">Migration Guide</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/compatibility.html">Version Compatibility</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/version-support.html">Version Support</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/faq.html">FAQ</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/further_reading.html">Further Reading</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/enterprise.html">For Enterprise</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/docs/sponsors.html" >Sponsors</a></li></ul><div class="cpc-ad"><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CKYIL27I&placement=mongoosejscom" id="_carbonads_js"></script></div></nav></div><div class="container"><div id="content"><a class="edit-docs-link" href="https://github.com/Automattic/mongoose/blob/master/docs/schematypes.md" target="_blank">
<img src="/docs/images/pencil.svg" />
</a><h1 id="schematypes">
        <a href="#schematypes">
          SchemaTypes
        </a>
      </h1>
<div class="sponsored-ad">
  <a href="https://localizejs.com/?utm_campaign=Mongoose&utm_source=mongoose&utm_medium=banner">
    <img src="/docs/images/localize-mongoose-ad-banner-2x.jpg">
  </a>
</div>

<p>SchemaTypes handle definition of path
<a href="api/schematype.html#schematype_SchemaType-default">defaults</a>,
<a href="api/schematype.html#schematype_SchemaType-validate">validation</a>,
<a href="#getters">getters</a>,
<a href="api/schematype.html#schematype_SchemaType-set">setters</a>,
<a href="api/schematype.html#schematype_SchemaType-select">field selection defaults</a> for
<a href="api/query.html">queries</a>,
and other general characteristics for Mongoose document properties.</p>
<ul>
<li><a href="#what-is-a-schematype">What is a SchemaType?</a></li>
<li><a href="#type-key">The <code>type</code> Key</a></li>
<li><a href="#schematype-options">SchemaType Options</a></li>
<li><a href="#usage-notes">Usage Notes</a></li>
<li><a href="#getters">Getters</a></li>
<li><a href="#customtypes">Custom Types</a></li>
<li><a href="#path">The <code>schema.path()</code> Function</a></li>
<li><a href="#further-reading">Further Reading</a></li>
</ul>
<h2 id="what-is-a-schematype">
        <a href="#what-is-a-schematype">
          What is a SchemaType? 
        </a>
      </h2>
<p>You can think of a Mongoose schema as the configuration object for a
Mongoose model. A SchemaType is then a configuration object for an individual
property. A SchemaType says what type a given
path should have, whether it has any getters/setters, and what values are
valid for that path.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span> });
schema.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;name&#x27;</span>) <span class="hljs-keyword">instanceof</span> mongoose.<span class="hljs-property">SchemaType</span>; <span class="hljs-comment">// true</span>
schema.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;name&#x27;</span>) <span class="hljs-keyword">instanceof</span> mongoose.<span class="hljs-property">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">String</span>; <span class="hljs-comment">// true</span>
schema.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;name&#x27;</span>).<span class="hljs-property">instance</span>; <span class="hljs-comment">// &#x27;String&#x27;</span></code></pre><p>A SchemaType is different from a type. In other words, <code>mongoose.ObjectId !== mongoose.Types.ObjectId</code>.
A SchemaType is just a configuration object for Mongoose. An instance of
the <code>mongoose.ObjectId</code> SchemaType doesn&#39;t actually create MongoDB ObjectIds,
it is just a configuration for a path in a schema.</p>
<p>The following are all the valid SchemaTypes in Mongoose. Mongoose plugins
can also add custom SchemaTypes like <a href="http://plugins.mongoosejs.io/plugins/int32">int32</a>.
Check out <a href="http://plugins.mongoosejs.io">Mongoose&#39;s plugins search</a> to find plugins.</p>
<ul>
<li><a href="#strings">String</a></li>
<li><a href="#numbers">Number</a></li>
<li><a href="#dates">Date</a></li>
<li><a href="#buffers">Buffer</a></li>
<li><a href="#booleans">Boolean</a></li>
<li><a href="#mixed">Mixed</a></li>
<li><a href="#objectids">ObjectId</a></li>
<li><a href="#arrays">Array</a></li>
<li><a href="api/mongoose.html#mongoose_Mongoose-Decimal128">Decimal128</a></li>
<li><a href="#maps">Map</a></li>
<li><a href="#schemas">Schema</a></li>
<li><a href="#uuid">UUID</a></li>
<li><a href="#bigint">BigInt</a></li>
<li><a href="#double">Double</a></li>
<li><a href="#int32">Int32</a></li>
</ul>
<h3 id="example">
        <a href="#example">
          Example
        </a>
      </h3>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span>,
  <span class="hljs-attr">binary</span>: <span class="hljs-title class_">Buffer</span>,
  <span class="hljs-attr">living</span>: <span class="hljs-title class_">Boolean</span>,
  <span class="hljs-attr">updated</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Date</span>, <span class="hljs-attr">default</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-property">now</span> },
  <span class="hljs-attr">age</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>, <span class="hljs-attr">min</span>: <span class="hljs-number">18</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">65</span> },
  <span class="hljs-attr">mixed</span>: <span class="hljs-title class_">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">Mixed</span>,
  <span class="hljs-attr">_someId</span>: <span class="hljs-title class_">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">ObjectId</span>,
  <span class="hljs-attr">decimal</span>: <span class="hljs-title class_">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">Decimal128</span>,
  <span class="hljs-attr">double</span>: <span class="hljs-title class_">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">Double</span>,
  <span class="hljs-attr">int32bit</span>: <span class="hljs-title class_">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">Int32</span>,
  <span class="hljs-attr">array</span>: [],
  <span class="hljs-attr">ofString</span>: [<span class="hljs-title class_">String</span>],
  <span class="hljs-attr">ofNumber</span>: [<span class="hljs-title class_">Number</span>],
  <span class="hljs-attr">ofDates</span>: [<span class="hljs-title class_">Date</span>],
  <span class="hljs-attr">ofBuffer</span>: [<span class="hljs-title class_">Buffer</span>],
  <span class="hljs-attr">ofBoolean</span>: [<span class="hljs-title class_">Boolean</span>],
  <span class="hljs-attr">ofMixed</span>: [<span class="hljs-title class_">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">Mixed</span>],
  <span class="hljs-attr">ofObjectId</span>: [<span class="hljs-title class_">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">ObjectId</span>],
  <span class="hljs-attr">ofArrays</span>: [[]],
  <span class="hljs-attr">ofArrayOfNumbers</span>: [[<span class="hljs-title class_">Number</span>]],
  <span class="hljs-attr">nested</span>: {
    <span class="hljs-attr">stuff</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>, <span class="hljs-attr">lowercase</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">trim</span>: <span class="hljs-literal">true</span> }
  },
  <span class="hljs-attr">map</span>: <span class="hljs-title class_">Map</span>,
  <span class="hljs-attr">mapOfString</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Map</span>,
    <span class="hljs-attr">of</span>: <span class="hljs-title class_">String</span>
  }
});

<span class="hljs-comment">// example use</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Thing</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Thing&#x27;</span>, schema);

<span class="hljs-keyword">const</span> m = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thing</span>;
m.<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;Statue of Liberty&#x27;</span>;
m.<span class="hljs-property">age</span> = <span class="hljs-number">125</span>;
m.<span class="hljs-property">updated</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>;
m.<span class="hljs-property">binary</span> = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">0</span>);
m.<span class="hljs-property">living</span> = <span class="hljs-literal">false</span>;
m.<span class="hljs-property">mixed</span> = { <span class="hljs-attr">any</span>: { <span class="hljs-attr">thing</span>: <span class="hljs-string">&#x27;i want&#x27;</span> } };
m.<span class="hljs-title function_">markModified</span>(<span class="hljs-string">&#x27;mixed&#x27;</span>);
m.<span class="hljs-property">_someId</span> = <span class="hljs-keyword">new</span> mongoose.<span class="hljs-property">Types</span>.<span class="hljs-property">ObjectId</span>;
m.<span class="hljs-property">array</span>.<span class="hljs-title function_">push</span>(<span class="hljs-number">1</span>);
m.<span class="hljs-property">ofString</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;strings!&#x27;</span>);
m.<span class="hljs-property">ofNumber</span>.<span class="hljs-title function_">unshift</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>);
m.<span class="hljs-property">ofDates</span>.<span class="hljs-title function_">addToSet</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>);
m.<span class="hljs-property">ofBuffer</span>.<span class="hljs-title function_">pop</span>();
m.<span class="hljs-property">ofMixed</span> = [<span class="hljs-number">1</span>, [], <span class="hljs-string">&#x27;three&#x27;</span>, { <span class="hljs-attr">four</span>: <span class="hljs-number">5</span> }];
m.<span class="hljs-property">nested</span>.<span class="hljs-property">stuff</span> = <span class="hljs-string">&#x27;good&#x27;</span>;
m.<span class="hljs-property">map</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([[<span class="hljs-string">&#x27;key&#x27;</span>, <span class="hljs-string">&#x27;value&#x27;</span>]]);
m.<span class="hljs-title function_">save</span>(callback);</code></pre><h2 id="type-key">
        <a href="#type-key">
          The <code>type</code> Key 
        </a>
      </h2>
<p><code>type</code> is a special property in Mongoose schemas. When Mongoose finds
a nested property named <code>type</code> in your schema, Mongoose assumes that
it needs to define a SchemaType with the given type.</p>
<pre><code lang="javascript"><span class="hljs-comment">// 3 string SchemaTypes: &#x27;name&#x27;, &#x27;nested.firstName&#x27;, &#x27;nested.lastName&#x27;</span>
<span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">name</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> },
  <span class="hljs-attr">nested</span>: {
    <span class="hljs-attr">firstName</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> },
    <span class="hljs-attr">lastName</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> }
  }
});</code></pre><p>As a consequence, <a href="faq.html#type-key">you need a little extra work to define a property named <code>type</code> in your schema</a>.
For example, suppose you&#39;re building a stock portfolio app, and you
want to store the asset&#39;s <code>type</code> (stock, bond, ETF, etc.). Naively,
you might define your schema as shown below:</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> holdingSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-comment">// You might expect `asset` to be an object that has 2 properties,</span>
  <span class="hljs-comment">// but unfortunately `type` is special in Mongoose so mongoose</span>
  <span class="hljs-comment">// interprets this schema to mean that `asset` is a string</span>
  <span class="hljs-attr">asset</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">ticker</span>: <span class="hljs-title class_">String</span>
  }
});</code></pre><p>However, when Mongoose sees <code>type: String</code>, it assumes that you mean
<code>asset</code> should be a string, not an object with a property <code>type</code>.
The correct way to define an object with a property <code>type</code> is shown
below.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> holdingSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">asset</span>: {
    <span class="hljs-comment">// Workaround to make sure Mongoose knows `asset` is an object</span>
    <span class="hljs-comment">// and `asset.type` is a string, rather than thinking `asset`</span>
    <span class="hljs-comment">// is a string.</span>
    <span class="hljs-attr">type</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> },
    <span class="hljs-attr">ticker</span>: <span class="hljs-title class_">String</span>
  }
});</code></pre><h2 id="schematype-options">
        <a href="#schematype-options">
          SchemaType Options 
        </a>
      </h2>
<p>You can declare a schema type using the type directly, or an object with
a <code>type</code> property.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> schema1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">test</span>: <span class="hljs-title class_">String</span> <span class="hljs-comment">// `test` is a path of type String</span>
});

<span class="hljs-keyword">const</span> schema2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-comment">// The `test` object contains the &quot;SchemaType options&quot;</span>
  <span class="hljs-attr">test</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> } <span class="hljs-comment">// `test` is a path of type string</span>
});</code></pre><p>In addition to the type property, you can specify additional properties
for a path. For example, if you want to lowercase a string before saving:</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> schema2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">lowercase</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// Always convert `test` to lowercase</span>
  }
});</code></pre><p>You can add any property you want to your SchemaType options. Many plugins
rely on custom SchemaType options. For example, the <a href="http://plugins.mongoosejs.io/plugins/autopopulate">mongoose-autopopulate</a>
plugin automatically populates paths if you set <code>autopopulate: true</code> in your
SchemaType options. Mongoose comes with support for several built-in
SchemaType options, like <code>lowercase</code> in the above example.</p>
<p>The <code>lowercase</code> option only works for strings. There are certain options
which apply for all schema types, and some that apply for specific schema
types.</p>
<h3 id="all-schema-types">
        <a href="#all-schema-types">
          All Schema Types
        </a>
      </h3>
<ul>
<li><code>required</code>: boolean or function, if true adds a <a href="validation.html#built-in-validators">required validator</a> for this property</li>
<li><code>default</code>: Any or function, sets a default value for the path. If the value is a function, the return value of the function is used as the default.</li>
<li><code>select</code>: boolean, specifies default <a href="https://www.mongodb.com/docs/manual/tutorial/project-fields-from-query-results/">projections</a> for queries</li>
<li><code>validate</code>: function, adds a <a href="validation.html#built-in-validators">validator function</a> for this property</li>
<li><code>get</code>: function, defines a custom getter for this property using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty"><code>Object.defineProperty()</code></a>.</li>
<li><code>set</code>: function, defines a custom setter for this property using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty"><code>Object.defineProperty()</code></a>.</li>
<li><code>alias</code>: string, mongoose &gt;= 4.10.0 only. Defines a <a href="guide.html#virtuals">virtual</a> with the given name that gets/sets this path.</li>
<li><code>immutable</code>: boolean, defines path as immutable. Mongoose prevents you from changing immutable paths unless the parent document has <code>isNew: true</code>.</li>
<li><code>transform</code>: function, Mongoose calls this function when you call <a href="api/document.html#document_Document-toJSON"><code>Document#toJSON()</code></a> function, including when you <a href="https://thecodebarbarian.com/the-80-20-guide-to-json-stringify-in-javascript"><code>JSON.stringify()</code></a> a document.</li>
</ul>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> numberSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">integerOnly</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
    <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(v),
    <span class="hljs-attr">set</span>: <span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(v),
    <span class="hljs-attr">alias</span>: <span class="hljs-string">&#x27;i&#x27;</span>
  }
});

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Number</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Number&#x27;</span>, numberSchema);

<span class="hljs-keyword">const</span> doc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Number</span>();
doc.<span class="hljs-property">integerOnly</span> = <span class="hljs-number">2.001</span>;
doc.<span class="hljs-property">integerOnly</span>; <span class="hljs-comment">// 2</span>
doc.<span class="hljs-property">i</span>; <span class="hljs-comment">// 2</span>
doc.<span class="hljs-property">i</span> = <span class="hljs-number">3.001</span>;
doc.<span class="hljs-property">integerOnly</span>; <span class="hljs-comment">// 3</span>
doc.<span class="hljs-property">i</span>; <span class="hljs-comment">// 3</span></code></pre><h3 id="indexes">
        <a href="#indexes">
          Indexes
        </a>
      </h3>
<p>You can also define <a href="https://www.mongodb.com/docs/manual/indexes/">MongoDB indexes</a>
using schema type options.</p>
<ul>
<li><code>index</code>: boolean, whether to define an <a href="https://www.mongodb.com/docs/manual/indexes/">index</a> on this property.</li>
<li><code>unique</code>: boolean, whether to define a <a href="https://www.mongodb.com/docs/manual/core/index-unique/">unique index</a> on this property.</li>
<li><code>sparse</code>: boolean, whether to define a <a href="https://www.mongodb.com/docs/manual/core/index-sparse/">sparse index</a> on this property.</li>
</ul>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> schema2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">index</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">unique</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// Unique index. If you specify `unique: true`</span>
    <span class="hljs-comment">// specifying `index: true` is optional if you do `unique: true`</span>
  }
});</code></pre><h3 id="string-validators">
        <a href="#string-validators">
          String 
        </a>
      </h3>
<ul>
<li><code>lowercase</code>: boolean, whether to always call <code>.toLowerCase()</code> on the value</li>
<li><code>uppercase</code>: boolean, whether to always call <code>.toUpperCase()</code> on the value</li>
<li><code>trim</code>: boolean, whether to always call <a href="https://masteringjs.io/tutorials/fundamentals/trim-string"><code>.trim()</code></a> on the value</li>
<li><code>match</code>: RegExp, creates a <a href="validation.html">validator</a> that checks if the value matches the given regular expression</li>
<li><code>enum</code>: Array, creates a <a href="validation.html">validator</a> that checks if the value is in the given array.</li>
<li><code>minLength</code>: Number, creates a <a href="validation.html">validator</a> that checks if the value length is not less than the given number</li>
<li><code>maxLength</code>: Number, creates a <a href="validation.html">validator</a> that checks if the value length is not greater than the given number</li>
<li><code>populate</code>: Object, sets default <a href="populate.html#query-conditions">populate options</a></li>
</ul>
<h3 id="number-validators">
        <a href="#number-validators">
          Number 
        </a>
      </h3>
<ul>
<li><code>min</code>: Number, creates a <a href="validation.html">validator</a> that checks if the value is greater than or equal to the given minimum.</li>
<li><code>max</code>: Number, creates a <a href="validation.html">validator</a> that checks if the value is less than or equal to the given maximum.</li>
<li><code>enum</code>: Array, creates a <a href="validation.html">validator</a> that checks if the value is strictly equal to one of the values in the given array.</li>
<li><code>populate</code>: Object, sets default <a href="populate.html#query-conditions">populate options</a></li>
</ul>
<h3 id="date">
        <a href="#date">
          Date
        </a>
      </h3>
<ul>
<li><code>min</code>: Date, creates a <a href="validation.html">validator</a> that checks if the value is greater than or equal to the given minimum.</li>
<li><code>max</code>: Date, creates a <a href="validation.html">validator</a> that checks if the value is less than or equal to the given maximum.</li>
<li><code>expires</code>: Number or String, creates a TTL index with the value expressed in seconds.</li>
</ul>
<h3 id="objectid">
        <a href="#objectid">
          ObjectId
        </a>
      </h3>
<ul>
<li><code>populate</code>: Object, sets default <a href="populate.html#query-conditions">populate options</a></li>
</ul>
<h2 id="usage-notes">
        <a href="#usage-notes">
          Usage Notes 
        </a>
      </h2>
<h3 id="strings">
        <a href="#strings">
          String 
        </a>
      </h3>
<p>To declare a path as a string, you may use either the <code>String</code> global
constructor or the string <code>&#39;String&#39;</code>.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> schema1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span> }); <span class="hljs-comment">// name will be cast to string</span>
<span class="hljs-keyword">const</span> schema2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;String&#x27;</span> }); <span class="hljs-comment">// Equivalent</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Person</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Person&#x27;</span>, schema2);</code></pre><p>If you pass an element that has a <code>toString()</code> function, Mongoose will call it,
unless the element is an array or the <code>toString()</code> function is strictly equal to
<code>Object.prototype.toString()</code>.</p>
<pre><code lang="javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>({ <span class="hljs-attr">name</span>: <span class="hljs-number">42</span> }).<span class="hljs-property">name</span>; <span class="hljs-comment">// &quot;42&quot; as a string</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>({ <span class="hljs-attr">name</span>: { <span class="hljs-attr">toString</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-number">42</span> } }).<span class="hljs-property">name</span>; <span class="hljs-comment">// &quot;42&quot; as a string</span>

<span class="hljs-comment">// &quot;undefined&quot;, will get a cast error if you `save()` this document</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>({ <span class="hljs-attr">name</span>: { <span class="hljs-attr">foo</span>: <span class="hljs-number">42</span> } }).<span class="hljs-property">name</span>;</code></pre><h3 id="numbers">
        <a href="#numbers">
          Number 
        </a>
      </h3>
<p>To declare a path as a number, you may use either the <code>Number</code> global
constructor or the string <code>&#39;Number&#39;</code>.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> schema1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">age</span>: <span class="hljs-title class_">Number</span> }); <span class="hljs-comment">// age will be cast to a Number</span>
<span class="hljs-keyword">const</span> schema2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">age</span>: <span class="hljs-string">&#x27;Number&#x27;</span> }); <span class="hljs-comment">// Equivalent</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Car</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Car&#x27;</span>, schema2);</code></pre><p>There are several types of values that will be successfully cast to a Number.</p>
<pre><code lang="javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>({ <span class="hljs-attr">age</span>: <span class="hljs-string">&#x27;15&#x27;</span> }).<span class="hljs-property">age</span>; <span class="hljs-comment">// 15 as a Number</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>({ <span class="hljs-attr">age</span>: <span class="hljs-literal">true</span> }).<span class="hljs-property">age</span>; <span class="hljs-comment">// 1 as a Number</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>({ <span class="hljs-attr">age</span>: <span class="hljs-literal">false</span> }).<span class="hljs-property">age</span>; <span class="hljs-comment">// 0 as a Number</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>({ <span class="hljs-attr">age</span>: { <span class="hljs-attr">valueOf</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-number">83</span> } }).<span class="hljs-property">age</span>; <span class="hljs-comment">// 83 as a Number</span></code></pre><p>If you pass an object with a <code>valueOf()</code> function that returns a Number, Mongoose will
call it and assign the returned value to the path.</p>
<p>The values <code>null</code> and <code>undefined</code> are not cast.</p>
<p>NaN, strings that cast to NaN, arrays, and objects that don&#39;t have a <code>valueOf()</code> function
will all result in a <a href="validation.html#cast-errors">CastError</a> once validated, meaning that it will not throw on initialization, only when validated.</p>
<h3 id="dates">
        <a href="#dates">
          Dates 
        </a>
      </h3>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">Built-in <code>Date</code> methods</a> are <a href="https://github.com/Automattic/mongoose/issues/1598"><strong>not</strong> hooked into</a> the mongoose change tracking logic which in English means that if you use a <code>Date</code> in your document and modify it with a method like <code>setMonth()</code>, mongoose will be unaware of this change and <code>doc.save()</code> will not persist this modification. If you must modify <code>Date</code> types using built-in methods, tell mongoose about the change with <code>doc.markModified(&#39;pathToYourDate&#39;)</code> before saving.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Assignment</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Assignment&#x27;</span>, { <span class="hljs-attr">dueDate</span>: <span class="hljs-title class_">Date</span> });
<span class="hljs-keyword">const</span> doc = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Assignment</span>.<span class="hljs-title function_">findOne</span>();
doc.<span class="hljs-property">dueDate</span>.<span class="hljs-title function_">setMonth</span>(<span class="hljs-number">3</span>);
<span class="hljs-keyword">await</span> doc.<span class="hljs-title function_">save</span>(); <span class="hljs-comment">// THIS DOES NOT SAVE YOUR CHANGE</span>

doc.<span class="hljs-title function_">markModified</span>(<span class="hljs-string">&#x27;dueDate&#x27;</span>);
<span class="hljs-keyword">await</span> doc.<span class="hljs-title function_">save</span>(); <span class="hljs-comment">// works</span></code></pre><h3 id="buffers">
        <a href="#buffers">
          Buffer 
        </a>
      </h3>
<p>To declare a path as a Buffer, you may use either the <code>Buffer</code> global
constructor or the string <code>&#39;Buffer&#39;</code>.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> schema1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">binData</span>: <span class="hljs-title class_">Buffer</span> }); <span class="hljs-comment">// binData will be cast to a Buffer</span>
<span class="hljs-keyword">const</span> schema2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">binData</span>: <span class="hljs-string">&#x27;Buffer&#x27;</span> }); <span class="hljs-comment">// Equivalent</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Data</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Data&#x27;</span>, schema2);</code></pre><p>Mongoose will successfully cast the below values to buffers.</p>
<pre><code lang="js"><span class="hljs-keyword">const</span> file1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Data</span>({ <span class="hljs-attr">binData</span>: <span class="hljs-string">&#x27;test&#x27;</span>}); <span class="hljs-comment">// {&quot;type&quot;:&quot;Buffer&quot;,&quot;data&quot;:[116,101,115,116]}</span>
<span class="hljs-keyword">const</span> file2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Data</span>({ <span class="hljs-attr">binData</span>: <span class="hljs-number">72987</span> }); <span class="hljs-comment">// {&quot;type&quot;:&quot;Buffer&quot;,&quot;data&quot;:[27]}</span>
<span class="hljs-keyword">const</span> file4 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Data</span>({ <span class="hljs-attr">binData</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;Buffer&#x27;</span>, <span class="hljs-attr">data</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]}}); <span class="hljs-comment">// {&quot;type&quot;:&quot;Buffer&quot;,&quot;data&quot;:[1,2,3]}</span></code></pre><h3 id="mixed">
        <a href="#mixed">
          Mixed 
        </a>
      </h3>
<p>An &quot;anything goes&quot; SchemaType. Mongoose will not do any casting on mixed paths.
You can define a mixed path using <code>Schema.Types.Mixed</code> or by passing an empty
object literal. The following are equivalent.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Any</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">any</span>: {} });
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Any</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">any</span>: <span class="hljs-title class_">Object</span> });
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Any</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">any</span>: <span class="hljs-title class_">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">Mixed</span> });
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Any</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">any</span>: mongoose.<span class="hljs-property">Mixed</span> });</code></pre><p>Since Mixed is a schema-less type, you can change the value to anything else you
like, but Mongoose loses the ability to auto detect and save those changes.
To tell Mongoose that the value of a Mixed type has changed, you need to
call <code>doc.markModified(path)</code>, passing the path to the Mixed type you just changed.</p>
<p>To avoid these side-effects, a <a href="subdocs.html">Subdocument</a> path may be used
instead.</p>
<pre><code lang="javascript">person.<span class="hljs-property">anything</span> = { <span class="hljs-attr">x</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, { <span class="hljs-attr">y</span>: <span class="hljs-string">&#x27;changed&#x27;</span> }] };
person.<span class="hljs-title function_">markModified</span>(<span class="hljs-string">&#x27;anything&#x27;</span>);
person.<span class="hljs-title function_">save</span>(); <span class="hljs-comment">// Mongoose will save changes to `anything`.</span></code></pre><h3 id="objectids">
        <a href="#objectids">
          ObjectIds 
        </a>
      </h3>
<p>An <a href="https://www.mongodb.com/docs/manual/reference/method/ObjectId/">ObjectId</a>
is a special type typically used for unique identifiers. Here&#39;s how
you declare a schema with a path <code>driver</code> that is an ObjectId:</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mongoose&#x27;</span>);
<span class="hljs-keyword">const</span> carSchema = <span class="hljs-keyword">new</span> mongoose.<span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">driver</span>: mongoose.<span class="hljs-property">ObjectId</span> });</code></pre><p><code>ObjectId</code> is a class, and ObjectIds are objects. However, they are
often represented as strings. When you convert an ObjectId to a string
using <code>toString()</code>, you get a 24-character hexadecimal string:</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Car</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Car&#x27;</span>, carSchema);

<span class="hljs-keyword">const</span> car = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>();
car.<span class="hljs-property">driver</span> = <span class="hljs-keyword">new</span> mongoose.<span class="hljs-property">Types</span>.<span class="hljs-title class_">ObjectId</span>();

<span class="hljs-keyword">typeof</span> car.<span class="hljs-property">driver</span>; <span class="hljs-comment">// &#x27;object&#x27;</span>
car.<span class="hljs-property">driver</span> <span class="hljs-keyword">instanceof</span> mongoose.<span class="hljs-property">Types</span>.<span class="hljs-property">ObjectId</span>; <span class="hljs-comment">// true</span>

car.<span class="hljs-property">driver</span>.<span class="hljs-title function_">toString</span>(); <span class="hljs-comment">// Something like &quot;5e1a0651741b255ddda996c4&quot;</span></code></pre><h3 id="booleans">
        <a href="#booleans">
          Boolean 
        </a>
      </h3>
<p>Booleans in Mongoose are <a href="https://www.w3schools.com/js/js_booleans.asp">plain JavaScript booleans</a>.
By default, Mongoose casts the below values to <code>true</code>:</p>
<ul>
<li><code>true</code></li>
<li><code>&#39;true&#39;</code></li>
<li><code>1</code></li>
<li><code>&#39;1&#39;</code></li>
<li><code>&#39;yes&#39;</code></li>
</ul>
<p>Mongoose casts the below values to <code>false</code>:</p>
<ul>
<li><code>false</code></li>
<li><code>&#39;false&#39;</code></li>
<li><code>0</code></li>
<li><code>&#39;0&#39;</code></li>
<li><code>&#39;no&#39;</code></li>
</ul>
<p>Any other value causes a <a href="validation.html#cast-errors">CastError</a>.
You can modify what values Mongoose converts to true or false using the
<code>convertToTrue</code> and <code>convertToFalse</code> properties, which are <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">JavaScript sets</a>.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> M = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Test&#x27;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">b</span>: <span class="hljs-title class_">Boolean</span> }));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">M</span>({ <span class="hljs-attr">b</span>: <span class="hljs-string">&#x27;nay&#x27;</span> }).<span class="hljs-property">b</span>); <span class="hljs-comment">// undefined</span>

<span class="hljs-comment">// Set { false, &#x27;false&#x27;, 0, &#x27;0&#x27;, &#x27;no&#x27; }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(mongoose.<span class="hljs-property">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">Boolean</span>.<span class="hljs-property">convertToFalse</span>);

mongoose.<span class="hljs-property">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">Boolean</span>.<span class="hljs-property">convertToFalse</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;nay&#x27;</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">M</span>({ <span class="hljs-attr">b</span>: <span class="hljs-string">&#x27;nay&#x27;</span> }).<span class="hljs-property">b</span>); <span class="hljs-comment">// false</span></code></pre><h3 id="arrays">
        <a href="#arrays">
          Arrays 
        </a>
      </h3>
<p>Mongoose supports arrays of <a href="api/schema.html#schema_Schema-Types">SchemaTypes</a>
and arrays of <a href="subdocs.html">subdocuments</a>. Arrays of SchemaTypes are
also called <em>primitive arrays</em>, and arrays of subdocuments are also called
<em>document arrays</em>.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">ToySchema</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span> });
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ToyBoxSchema</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">toys</span>: [<span class="hljs-title class_">ToySchema</span>],
  <span class="hljs-attr">buffers</span>: [<span class="hljs-title class_">Buffer</span>],
  <span class="hljs-attr">strings</span>: [<span class="hljs-title class_">String</span>],
  <span class="hljs-attr">numbers</span>: [<span class="hljs-title class_">Number</span>]
  <span class="hljs-comment">// ... etc</span>
});</code></pre><p>Arrays are special because they implicitly have a default value of <code>[]</code> (empty array).</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">ToyBox</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;ToyBox&#x27;</span>, <span class="hljs-title class_">ToyBoxSchema</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>((<span class="hljs-keyword">new</span> <span class="hljs-title class_">ToyBox</span>()).<span class="hljs-property">toys</span>); <span class="hljs-comment">// []</span></code></pre><p>To overwrite this default, you need to set the default value to <code>undefined</code></p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">ToyBoxSchema</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">toys</span>: {
    <span class="hljs-attr">type</span>: [<span class="hljs-title class_">ToySchema</span>],
    <span class="hljs-attr">default</span>: <span class="hljs-literal">undefined</span>
  }
});</code></pre><p>Note: specifying an empty array is equivalent to <code>Mixed</code>. The following all create arrays of
<code>Mixed</code>:</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Empty1</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">any</span>: [] });
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Empty2</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">any</span>: <span class="hljs-title class_">Array</span> });
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Empty3</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">any</span>: [<span class="hljs-title class_">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">Mixed</span>] });
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Empty4</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">any</span>: [{}] });</code></pre><h3 id="maps">
        <a href="#maps">
          Maps 
        </a>
      </h3>
<p>A <code>MongooseMap</code> is a subclass of <a href="http://thecodebarbarian.com/the-80-20-guide-to-maps-in-javascript.html">JavaScript&#39;s <code>Map</code> class</a>.
In these docs, we&#39;ll use the terms &#39;map&#39; and <code>MongooseMap</code> interchangeably.
In Mongoose, maps are how you create a nested document with arbitrary keys.</p>
<p><strong>Note</strong>: In Mongoose Maps, keys must be strings in order to store the document in MongoDB.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> userSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-comment">// `socialMediaHandles` is a map whose values are strings. A map&#x27;s</span>
  <span class="hljs-comment">// keys are always strings. You specify the type of values using `of`.</span>
  <span class="hljs-attr">socialMediaHandles</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Map</span>,
    <span class="hljs-attr">of</span>: <span class="hljs-title class_">String</span>
  }
});

<span class="hljs-keyword">const</span> <span class="hljs-title class_">User</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;User&#x27;</span>, userSchema);
<span class="hljs-comment">// Map { &#x27;github&#x27; =&gt; &#x27;vkarpov15&#x27;, &#x27;twitter&#x27; =&gt; &#x27;@code_barbarian&#x27; }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>({
  <span class="hljs-attr">socialMediaHandles</span>: {
    <span class="hljs-attr">github</span>: <span class="hljs-string">&#x27;vkarpov15&#x27;</span>,
    <span class="hljs-attr">twitter</span>: <span class="hljs-string">&#x27;@code_barbarian&#x27;</span>
  }
}).<span class="hljs-property">socialMediaHandles</span>);</code></pre><p>The above example doesn&#39;t explicitly declare <code>github</code> or <code>twitter</code> as paths,
but, since <code>socialMediaHandles</code> is a map, you can store arbitrary key/value
pairs. However, since <code>socialMediaHandles</code> is a map, you <strong>must</strong> use
<code>.get()</code> to get the value of a key and <code>.set()</code> to set the value of a key.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>({
  <span class="hljs-attr">socialMediaHandles</span>: {}
});

<span class="hljs-comment">// Good</span>
user.<span class="hljs-property">socialMediaHandles</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;github&#x27;</span>, <span class="hljs-string">&#x27;vkarpov15&#x27;</span>);
<span class="hljs-comment">// Works too</span>
user.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;socialMediaHandles.twitter&#x27;</span>, <span class="hljs-string">&#x27;@code_barbarian&#x27;</span>);
<span class="hljs-comment">// Bad, the `myspace` property will **not** get saved</span>
user.<span class="hljs-property">socialMediaHandles</span>.<span class="hljs-property">myspace</span> = <span class="hljs-string">&#x27;fail&#x27;</span>;

<span class="hljs-comment">// &#x27;vkarpov15&#x27;</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">socialMediaHandles</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;github&#x27;</span>));
<span class="hljs-comment">// &#x27;@code_barbarian&#x27;</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;socialMediaHandles.twitter&#x27;</span>));
<span class="hljs-comment">// undefined</span>
user.<span class="hljs-property">socialMediaHandles</span>.<span class="hljs-property">github</span>;

<span class="hljs-comment">// Will only save the &#x27;github&#x27; and &#x27;twitter&#x27; properties</span>
user.<span class="hljs-title function_">save</span>();</code></pre><p>Map types are stored as <a href="https://en.wikipedia.org/wiki/BSON#Data_types_and_syntax">BSON objects in MongoDB</a>.
Keys in a BSON object are ordered, so this means the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Description">insertion order</a>
property of maps is maintained.</p>
<p>Mongoose supports a special <code>$*</code> syntax to <a href="populate.html">populate</a> all elements in a map.
For example, suppose your <code>socialMediaHandles</code> map contains a <code>ref</code>:</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> userSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">socialMediaHandles</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Map</span>,
    <span class="hljs-attr">of</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
      <span class="hljs-attr">handle</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">oauth</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">ObjectId</span>,
        <span class="hljs-attr">ref</span>: <span class="hljs-string">&#x27;OAuth&#x27;</span>
      }
    })
  }
});
<span class="hljs-keyword">const</span> <span class="hljs-title class_">User</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;User&#x27;</span>, userSchema);</code></pre><p>To populate every <code>socialMediaHandles</code> entry&#39;s <code>oauth</code> property, you should populate
on <code>socialMediaHandles.$*.oauth</code>:</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title class_">User</span>.<span class="hljs-title function_">findOne</span>().<span class="hljs-title function_">populate</span>(<span class="hljs-string">&#x27;socialMediaHandles.$*.oauth&#x27;</span>);</code></pre><h3 id="uuid">
        <a href="#uuid">
          UUID 
        </a>
      </h3>
<p>Mongoose also supports a UUID type that stores UUID instances as <a href="https://thecodebarbarian.com/an-overview-of-buffers-in-node-js.html">Node.js buffers</a>.
We recommend using <a href="#objectids">ObjectIds</a> rather than UUIDs for unique document ids in Mongoose, but you may use UUIDs if you need to.</p>
<p>In Node.js, a UUID is represented as an instance of <code>bson.Binary</code> type with a <a href="./tutorials/getters-setters.html">getter</a> that converts the binary to a string when you access it.
Mongoose stores UUIDs as <a href="https://www.mongodb.com/docs/manual/reference/bson-types/#binary-data">binary data with subtype 4 in MongoDB</a>.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> authorSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">_id</span>: <span class="hljs-title class_">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">UUID</span>, <span class="hljs-comment">// Can also do `_id: &#x27;UUID&#x27;`</span>
  <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span>
});

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Author</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Author&#x27;</span>, authorSchema);

<span class="hljs-keyword">const</span> bookSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">authorId</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">UUID</span>, <span class="hljs-attr">ref</span>: <span class="hljs-string">&#x27;Author&#x27;</span> }
});
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Book</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Book&#x27;</span>, bookSchema);

<span class="hljs-keyword">const</span> author = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Author</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Martin Fowler&#x27;</span> });
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> author.<span class="hljs-property">_id</span>); <span class="hljs-comment">// &#x27;string&#x27;</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(author.<span class="hljs-title function_">toObject</span>().<span class="hljs-property">_id</span> <span class="hljs-keyword">instanceof</span> mongoose.<span class="hljs-property">mongo</span>.<span class="hljs-property">BSON</span>.<span class="hljs-property">Binary</span>); <span class="hljs-comment">// true</span>

<span class="hljs-keyword">const</span> book = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>({ <span class="hljs-attr">authorId</span>: <span class="hljs-string">&#x27;09190f70-3d30-11e5-8814-0f4df9a59c41&#x27;</span> });</code></pre><p>To create UUIDs, we recommend using <a href="https://nodejs.org/api/crypto.html#cryptorandomuuidoptions">Node&#39;s built-in UUIDv4 generator</a>.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> { randomUUID } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;crypto&#x27;</span>);

<span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> mongoose.<span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">docId</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;UUID&#x27;</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">randomUUID</span>()
  }
});</code></pre><h3 id="bigint">
        <a href="#bigint">
          BigInt 
        </a>
      </h3>
<p>Mongoose supports <a href="https://thecodebarbarian.com/an-overview-of-bigint-in-node-js.html">JavaScript BigInts</a> as a SchemaType.
BigInts are stored as <a href="https://www.mongodb.com/docs/manual/reference/bson-types/">64-bit integers in MongoDB (BSON type &quot;long&quot;)</a>.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> questionSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">answer</span>: <span class="hljs-title class_">BigInt</span>
});
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Question</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Question&#x27;</span>, questionSchema);

<span class="hljs-keyword">const</span> question = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Question</span>({ <span class="hljs-attr">answer</span>: <span class="hljs-number">42n</span> });
<span class="hljs-keyword">typeof</span> question.<span class="hljs-property">answer</span>; <span class="hljs-comment">// &#x27;bigint&#x27;</span></code></pre><h3 id="double">
        <a href="#double">
          Double 
        </a>
      </h3>
<p>Mongoose supports <a href="https://en.wikipedia.org/wiki/IEEE_754-2008_revision">64-bit IEEE 754-2008 floating point numbers</a> as a SchemaType.
Doubles are stored as <a href="https://www.mongodb.com/docs/manual/reference/bson-types/">BSON type &quot;double&quot; in MongoDB</a>.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> temperatureSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">celsius</span>: <span class="hljs-title class_">Double</span>
});
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Temperature</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Temperature&#x27;</span>, temperatureSchema);

<span class="hljs-keyword">const</span> temperature = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Temperature</span>({ <span class="hljs-attr">celsius</span>: <span class="hljs-number">1339</span> });
temperature.<span class="hljs-property">celsius</span> <span class="hljs-keyword">instanceof</span> bson.<span class="hljs-property">Double</span>; <span class="hljs-comment">// true</span></code></pre><p>There are several types of values that will be successfully cast to a Double.</p>
<pre><code lang="javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Temperature</span>({ <span class="hljs-attr">celsius</span>: <span class="hljs-string">&#x27;1.2e12&#x27;</span> }).<span class="hljs-property">celsius</span>; <span class="hljs-comment">// 15 as a Double</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Temperature</span>({ <span class="hljs-attr">celsius</span>: <span class="hljs-literal">true</span> }).<span class="hljs-property">celsius</span>; <span class="hljs-comment">// 1 as a Double</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Temperature</span>({ <span class="hljs-attr">celsius</span>: <span class="hljs-literal">false</span> }).<span class="hljs-property">celsius</span>; <span class="hljs-comment">// 0 as a Double</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Temperature</span>({ <span class="hljs-attr">celsius</span>: { <span class="hljs-attr">valueOf</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-number">83.0033</span> } }).<span class="hljs-property">celsius</span>; <span class="hljs-comment">// 83 as a Double</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Temperature</span>({ <span class="hljs-attr">celsius</span>: <span class="hljs-string">&#x27;&#x27;</span> }).<span class="hljs-property">celsius</span>; <span class="hljs-comment">// null</span></code></pre><p>The following inputs will result will all result in a <a href="validation.html#cast-errors">CastError</a> once validated, meaning that it will not throw on initialization, only when validated:</p>
<ul>
<li>strings that do not represent a numeric string, a NaN or a null-ish value</li>
<li>objects that don&#39;t have a <code>valueOf()</code> function</li>
<li>an input that represents a value outside the bounds of a IEEE 754-2008 floating point</li>
</ul>
<h3 id="int32">
        <a href="#int32">
          Int32 
        </a>
      </h3>
<p>Mongoose supports 32-bit integers as a SchemaType.
Int32s are stored as <a href="https://www.mongodb.com/docs/manual/reference/bson-types/">32-bit integers in MongoDB (BSON type &quot;int&quot;)</a>.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> studentSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">id</span>: <span class="hljs-title class_">Int32</span>
});
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Student</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Student&#x27;</span>, studentSchema);

<span class="hljs-keyword">const</span> student = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>({ <span class="hljs-attr">id</span>: <span class="hljs-number">1339</span> });
<span class="hljs-keyword">typeof</span> student.<span class="hljs-property">id</span>; <span class="hljs-comment">// &#x27;number&#x27;</span></code></pre><p>There are several types of values that will be successfully cast to a Number.</p>
<pre><code lang="javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>({ <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;15&#x27;</span> }).<span class="hljs-property">id</span>; <span class="hljs-comment">// 15 as a Int32</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>({ <span class="hljs-attr">id</span>: <span class="hljs-literal">true</span> }).<span class="hljs-property">id</span>; <span class="hljs-comment">// 1 as a Int32</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>({ <span class="hljs-attr">id</span>: <span class="hljs-literal">false</span> }).<span class="hljs-property">id</span>; <span class="hljs-comment">// 0 as a Int32</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>({ <span class="hljs-attr">id</span>: { <span class="hljs-attr">valueOf</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-number">83</span> } }).<span class="hljs-property">id</span>; <span class="hljs-comment">// 83 as a Int32</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>({ <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;&#x27;</span> }).<span class="hljs-property">id</span>; <span class="hljs-comment">// null as a Int32</span></code></pre><p>If you pass an object with a <code>valueOf()</code> function that returns a Number, Mongoose will
call it and assign the returned value to the path.</p>
<p>The values <code>null</code> and <code>undefined</code> are not cast.</p>
<p>The following inputs will result will all result in a <a href="validation.html#cast-errors">CastError</a> once validated, meaning that it will not throw on initialization, only when validated:</p>
<ul>
<li>NaN</li>
<li>strings that cast to NaN</li>
<li>objects that don&#39;t have a <code>valueOf()</code> function</li>
<li>a decimal that must be rounded to be an integer</li>
<li>an input that represents a value outside the bounds of an 32-bit integer</li>
</ul>
<h2 id="getters">
        <a href="#getters">
          Getters 
        </a>
      </h2>
<p>Getters are like virtuals for paths defined in your schema. For example,
let&#39;s say you wanted to store user profile pictures as relative paths and
then add the hostname in your application. Below is how you would structure
your <code>userSchema</code>:</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> root = <span class="hljs-string">&#x27;https://s3.amazonaws.com/mybucket&#x27;</span>;

<span class="hljs-keyword">const</span> userSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span>,
  <span class="hljs-attr">picture</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${root}</span><span class="hljs-subst">${v}</span>`</span>
  }
});

<span class="hljs-keyword">const</span> <span class="hljs-title class_">User</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;User&#x27;</span>, userSchema);

<span class="hljs-keyword">const</span> doc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Val&#x27;</span>, <span class="hljs-attr">picture</span>: <span class="hljs-string">&#x27;/123.png&#x27;</span> });
doc.<span class="hljs-property">picture</span>; <span class="hljs-comment">// &#x27;https://s3.amazonaws.com/mybucket/123.png&#x27;</span>
doc.<span class="hljs-title function_">toObject</span>({ <span class="hljs-attr">getters</span>: <span class="hljs-literal">false</span> }).<span class="hljs-property">picture</span>; <span class="hljs-comment">// &#x27;/123.png&#x27;</span></code></pre><p>Generally, you only use getters on primitive paths as opposed to arrays
or subdocuments. Because getters override what accessing a Mongoose path returns,
declaring a getter on an object may remove Mongoose change tracking for
that path.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">arr</span>: [{ <span class="hljs-attr">url</span>: <span class="hljs-title class_">String</span> }]
});

<span class="hljs-keyword">const</span> root = <span class="hljs-string">&#x27;https://s3.amazonaws.com/mybucket&#x27;</span>;

<span class="hljs-comment">// Bad, don&#x27;t do this!</span>
schema.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;arr&#x27;</span>).<span class="hljs-title function_">get</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> v.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(el, { <span class="hljs-attr">url</span>: root + el.<span class="hljs-property">url</span> }));
});

<span class="hljs-comment">// Later</span>
doc.<span class="hljs-property">arr</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">key</span>: <span class="hljs-title class_">String</span> });
doc.<span class="hljs-property">arr</span>[<span class="hljs-number">0</span>]; <span class="hljs-comment">// &#x27;undefined&#x27; because every `doc.arr` creates a new array!</span></code></pre><p>Instead of declaring a getter on the array as shown above, you should
declare a getter on the <code>url</code> string as shown below. If you need to declare
a getter on a nested document or array, be very careful!</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">arr</span>: [{ <span class="hljs-attr">url</span>: <span class="hljs-title class_">String</span> }]
});

<span class="hljs-keyword">const</span> root = <span class="hljs-string">&#x27;https://s3.amazonaws.com/mybucket&#x27;</span>;

<span class="hljs-comment">// Good, do this instead of declaring a getter on `arr`</span>
schema.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;arr.0.url&#x27;</span>).<span class="hljs-title function_">get</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${root}</span><span class="hljs-subst">${v}</span>`</span>);</code></pre><h2 id="schemas">
        <a href="#schemas">
          Schemas 
        </a>
      </h2>
<p>To declare a path as another <a href="guide.html#definition">schema</a>,
set <code>type</code> to the sub-schema&#39;s instance.</p>
<p>To set a default value based on the sub-schema&#39;s shape, simply set a default value,
and the value will be cast based on the sub-schema&#39;s definition before being set
during document creation.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> subSchema = <span class="hljs-keyword">new</span> mongoose.<span class="hljs-title class_">Schema</span>({
  <span class="hljs-comment">// some schema definition here</span>
});

<span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> mongoose.<span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">data</span>: {
    <span class="hljs-attr">type</span>: subSchema,
    <span class="hljs-attr">default</span>: {}
  }
});</code></pre><h2 id="customtypes">
        <a href="#customtypes">
          Creating Custom Types 
        </a>
      </h2>
<p>Mongoose can also be extended with <a href="customschematypes.html">custom SchemaTypes</a>. Search the
<a href="http://plugins.mongoosejs.io">plugins</a>
site for compatible types like
<a href="https://github.com/aheckmann/mongoose-long">mongoose-long</a>,
<a href="https://github.com/vkarpov15/mongoose-int32">mongoose-int32</a>,
and
<a href="https://github.com/aheckmann/mongoose-function">mongoose-function</a>.</p>
<p>Read more about creating custom SchemaTypes in our <a href="customschematypes.html">Custom SchemaTypes guide</a>.</p>
<h2 id="path">
        <a href="#path">
          The <code>schema.path()</code> Function 
        </a>
      </h2>
<p>The <code>schema.path()</code> function returns the instantiated schema type for a
given path.</p>
<pre><code lang="javascript"><span class="hljs-keyword">const</span> sampleSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">name</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> } });
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sampleSchema.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;name&#x27;</span>));
<span class="hljs-comment">// Output looks like:</span>
<span class="hljs-comment">/**
 * SchemaString {
 *   enumValues: [],
  *   regExp: null,
  *   path: &#x27;name&#x27;,
  *   instance: &#x27;String&#x27;,
  *   validators: ...
  */</span></code></pre><p>You can use this function to inspect the schema type for a given path,
including what validators it has and what the type is.</p>
<h2 id="further-reading">
        <a href="#further-reading">
          Further Reading 
        </a>
      </h2>
<ul>
  <li><a href="https://masteringjs.io/tutorials/mongoose/schematype">An Introduction to Mongoose SchemaTypes</a></li>
  <li><a href="https://kb.objectrocket.com/mongo-db/mongoose-schema-types-1418">Mongoose Schema Types</a></li>
</ul>

<h2 id="next-up">
        <a href="#next-up">
          Next Up
        </a>
      </h2>
<p>Now that we&#39;ve covered <code>SchemaTypes</code>, let&#39;s take a look at <a href="connections.html">Connections</a>.</p>
</div></div><div id="jobs"><div class="job-listing"><a href="/docs/jobs.html#61f0b0402d893554bc3a247f"><div class="company-logo"><img src="https://assets.localizecdn.com/uploads/1689251999716.png"></div><div class="description"><div class="company">Localize</div><div class="title">Full Stack Engineer</div><div class="location">Anywhere</div></div></a></div><div class="button jobs-view-more"><a href="/docs/jobs.html">View more jobs!</a></div></div><script type="text/javascript" src="/docs/js/navbar-search.js"></script><script type="text/javascript" src="/docs/js/mobile-navbar-toggle.js"></script></div></body></html>